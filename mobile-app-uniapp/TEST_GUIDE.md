# 项目管理功能测试指南

## 🎯 测试前准备

### 1. 启动开发服务器
```bash
cd mobile-app-uniapp
npm run dev:h5
```

### 2. 访问应用
浏览器访问：`http://localhost:5173/`

---

## 📋 测试流程

### 步骤1：创建DID身份（如果还没有）
1. 打开应用后，如果提示"请先创建DID身份"
2. 点击"我的" Tab → 创建身份
3. 输入昵称和PIN码（至少6位）
4. 记住你的PIN码！

### 步骤2：访问项目列表
1. 点击底部TabBar的"项目" Tab
2. 应该看到空状态提示："暂无项目"
3. 右下角有一个紫色的"➕"按钮

### 步骤3：创建第一个项目
1. 点击右下角的"➕"按钮
2. 填写项目信息：
   - **项目名称**: 例如"测试项目1"（必填，2-50字符）
   - **项目类型**: 选择一个类型（通用/代码/研究/写作/学习/其他）
   - **项目描述**: 例如"这是一个测试项目"（可选，最多500字符）
   - **封面图片**: 点击上传图片（可选）
   - **选择模板**: 选择一个模板（可选）
3. 展开"高级设置"：
   - 开启/关闭 AI助手
   - 开启/关闭 智能检索(RAG)
   - 开启/关闭 自动备份
4. 点击右上角"创建"按钮

### 步骤4：查看项目详情
创建成功后会自动跳转到项目详情页面：

#### 文件Tab测试
1. 点击"文件"Tab（默认选中）
2. 应该看到空状态："暂无文件"
3. 点击右下角"添加文件"按钮
4. 选择一个文本文件上传（.txt, .md等）
5. 文件上传后应该在列表中显示
6. 点击文件右侧的"⋯"图标，测试：
   - 预览（开发中提示）
   - 下载（开发中提示）
   - 删除（弹出确认对话框）

#### 任务Tab测试
1. 点击"任务"Tab
2. 应该看到三列看板：待办、进行中、已完成
3. 点击右下角"创建任务"按钮
4. 在弹窗中填写：
   - **任务标题**: 例如"完成功能测试"（必填）
   - **任务描述**: 例如"测试所有项目管理功能"（可选）
   - **优先级**: 选择低/中/高
   - **截止日期**: 点击选择日期（可选）
5. 点击"创建"按钮
6. 任务应该出现在"待办"列
7. 点击任务卡片，在详情弹窗中：
   - 查看任务详情
   - 点击"开始任务"→任务移动到"进行中"列
8. 再次点击该任务，点击"完成任务"→任务移动到"已完成"列

#### 设置Tab测试
1. 点击"设置"Tab
2. 测试以下功能：
   - **基本信息** → 编辑项目信息（开发中）
   - **协作者** → 查看协作者数量、邀请协作者（开发中）
   - **高级设置** → 切换AI助手、RAG、自动备份开关
   - **归档项目** → 点击确认后项目状态变为已归档
   - **删除项目** → 点击确认后项目被删除

### 步骤5：测试项目列表功能
返回项目列表页面（点击导航栏"返回"或TabBar"项目"）：

1. **搜索功能**：
   - 在顶部搜索框输入项目名称
   - 应该实时过滤显示匹配的项目
   - 点击"✕"清空搜索

2. **Tab切换**：
   - 点击"全部" → 显示所有项目
   - 点击"进行中" → 只显示active状态的项目
   - 点击"已归档" → 只显示archived状态的项目
   - 点击"协作" → 显示协作项目（如果有）

3. **下拉刷新**：
   - 在列表顶部下拉
   - 应该看到刷新指示器
   - 释放后重新加载项目列表

4. **加载更多**：
   - 滚动到列表底部
   - 如果项目超过20个，会自动加载更多

5. **项目卡片**：
   - 点击任意项目卡片 → 进入项目详情页

---

## 🐛 常见问题排查

### 问题1：提示"请先创建DID身份"
**解决**: 需要先创建一个DID身份
- 进入"我的"Tab → 创建身份
- 或进入"设置" → 身份管理 → 创建身份

### 问题2：点击"创建"按钮没有反应
**检查**:
- 项目名称是否填写（至少2个字符）
- 浏览器控制台是否有错误提示（F12打开）

### 问题3：文件上传失败
**可能原因**:
- H5环境只支持文本文件内容读取
- 检查文件大小（建议小于1MB）
- 查看浏览器控制台错误信息

### 问题4：任务状态更新后看不到变化
**解决**:
- 关闭任务详情弹窗
- 任务应该已经移动到新的列
- 项目统计信息应该已更新

### 问题5：页面显示异常
**解决**:
- 刷新页面（Ctrl+R / Cmd+R）
- 清除浏览器缓存
- 检查浏览器控制台错误

---

## 📊 预期结果

### 数据持久化
- 所有数据保存在浏览器localStorage（H5模式）
- 刷新页面后数据不会丢失
- 可以在浏览器开发工具中查看：
  - Application → Local Storage → http://localhost:5173

### 数据库结构
检查localStorage中应该有以下数据：
```javascript
{
  "projects": [
    {
      "id": "proj_xxxxx",
      "name": "测试项目1",
      "type": "general",
      "status": "active",
      "owner_did": "did:chainlesschain:xxxxx",
      "created_at": 1234567890,
      "updated_at": 1234567890
    }
  ],
  "project_files": [...],
  "project_tasks": [...],
  "project_collaborators": [...]
}
```

---

## 🎨 UI/UX检查点

### 项目列表页
- [✓] Tab切换动画流畅
- [✓] 项目卡片点击有反馈
- [✓] 空状态显示正确
- [✓] 搜索实时过滤
- [✓] FAB按钮位置合理

### 项目创建页
- [✓] 表单验证提示清晰
- [✓] 类型选择器高亮正确
- [✓] 图片上传预览正常
- [✓] 高级设置折叠展开流畅

### 项目详情页
- [✓] Tab切换响应快速
- [✓] 文件列表排版美观
- [✓] 任务看板三列对齐
- [✓] 弹窗动画自然
- [✓] 设置开关反馈及时

---

## 📝 测试记录

建议记录以下信息：
- [ ] 浏览器类型和版本
- [ ] 遇到的错误或问题
- [ ] 控制台错误信息截图
- [ ] 期望行为 vs 实际行为

---

## 🔧 调试技巧

### 查看数据库数据
打开浏览器控制台（F12），输入：
```javascript
// 查看所有项目
JSON.parse(localStorage.getItem('chainlesschain_h5_data')).projects

// 查看所有任务
JSON.parse(localStorage.getItem('chainlesschain_h5_data')).project_tasks

// 查看所有文件
JSON.parse(localStorage.getItem('chainlesschain_h5_data')).project_files
```

### 清空测试数据
```javascript
// 清空所有数据（谨慎操作！）
localStorage.clear()
location.reload()
```

### 监听数据变化
```javascript
// 监听localStorage变化
window.addEventListener('storage', (e) => {
  console.log('Storage changed:', e.key, e.newValue)
})
```

---

## ✅ 测试完成标准

所有以下功能正常工作即为测试通过：
- [✓] 创建项目成功
- [✓] 项目列表正常显示
- [✓] 文件上传和删除正常
- [✓] 任务创建和状态更新正常
- [✓] 项目设置保存成功
- [✓] 搜索和筛选功能正常
- [✓] 数据持久化正常
- [✓] 无明显UI错误或卡顿

---

**祝测试顺利！** 🚀

如有问题，请记录错误信息并反馈。
