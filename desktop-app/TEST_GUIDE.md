# ChainlessChain 测试指南

## 快速测试步骤

### 1. 启动应用

在 `desktop-app` 目录下执行：

```bash
npm run dev
```

这将同时启动：
- Vite开发服务器 (http://localhost:5173)
- Electron应用窗口

**注意**: 第一次启动需要等待Vite服务器完全启动(约5-10秒)，然后Electron窗口才会打开。

### 2. 登录测试

1. 应用启动后会显示登录界面
2. 输入PIN码: `123456`
3. 点击"登录"按钮
4. 应该成功进入主界面

**预期结果**:
- ✅ U盾状态显示"已连接"
- ✅ PIN输入框可用
- ✅ 登录成功后跳转到主界面

### 3. 知识库功能测试

#### 3.1 查看示例笔记
- 左侧列表应显示1个示例笔记: "欢迎使用 ChainlessChain"
- 点击该笔记，中间编辑器应显示其内容

#### 3.2 创建新笔记
1. 点击左上角"新建笔记"按钮
2. 新笔记应出现在列表顶部
3. 可以编辑标题和内容

#### 3.3 编辑笔记
1. 修改标题或内容
2. 应自动保存(约1秒后)
3. 或按 `Ctrl+S` 手动保存

#### 3.4 预览模式
1. 点击"预览"按钮
2. 应显示Markdown渲染后的效果
3. 再次点击切换回编辑模式

#### 3.5 搜索功能
1. 在顶部搜索框输入关键词
2. 列表应实时过滤匹配的笔记

#### 3.6 删除笔记
1. 点击笔记列表项右侧的删除图标
2. 确认删除
3. 笔记应从列表中移除

### 4. AI对话功能测试

#### 4.1 打开AI助手
1. 点击右上角"AI助手"按钮
2. 右侧应滑出聊天面板

#### 4.2 发送消息
1. 在输入框输入问题
2. 点击"发送"或按 `Ctrl+Enter`
3. **注意**: 由于没有启动Ollama服务，会显示"LLM服务未连接"

#### 4.3 上下文模式
1. 选择一个笔记
2. 在AI面板中，"使用当前笔记上下文"按钮应可用
3. 点击切换是否使用当前笔记作为上下文

### 5. 界面功能测试

#### 5.1 三栏布局
- ✅ 左侧边栏: 图标导航 (60px)
- ✅ 笔记列表: 300px
- ✅ 编辑器: 自适应宽度
- ✅ AI面板: 400px (可选显示)

#### 5.2 响应式更新
- 创建笔记后立即显示在列表中
- 编辑内容后保存状态更新
- 删除笔记后列表自动刷新

### 6. 性能测试

#### 6.1 启动速度
- ✅ 应用启动 < 5秒
- ✅ 登录后加载 < 1秒

#### 6.2 操作响应
- ✅ 笔记切换即时
- ✅ 输入无卡顿
- ✅ 搜索实时响应

### 7. 已知限制 (MVP版本)

#### 7.1 数据持久化
- ❌ 数据存储在内存中
- ❌ 重启应用后数据丢失
- ✅ 这是预期行为(MVP特性)

#### 7.2 AI功能
- ❌ 需要Ollama服务才能使用
- ❌ 未启动时显示"服务未连接"
- ✅ UI功能正常，只是后端未响应

#### 7.3 Git同步
- ❌ 同步按钮显示但功能未实现
- ✅ 点击不会报错，只是无实际效果

### 8. 故障排除

#### 问题: Electron窗口未打开
**原因**: Vite服务器还未启动完成
**解决**: 等待10秒后再试，或查看终端输出

#### 问题: 白屏
**原因**: React组件加载失败
**解决**:
```bash
# 检查终端错误
# 清理并重新安装
rm -rf node_modules
npm install
npm run dev
```

#### 问题: 类型错误
**解决**:
```bash
npm run type-check
```

#### 问题: 构建失败
**解决**:
```bash
npm run build:preload
npm run build:main
```

### 9. 测试清单

完整功能测试清单:

- [ ] 登录界面显示正常
- [ ] PIN码验证成功
- [ ] 主界面三栏布局正确
- [ ] 示例笔记加载成功
- [ ] 创建新笔记
- [ ] 编辑笔记标题
- [ ] 编辑笔记内容
- [ ] 自动保存生效
- [ ] 手动保存 (Ctrl+S)
- [ ] 预览模式切换
- [ ] 搜索过滤笔记
- [ ] 删除笔记
- [ ] 打开AI助手
- [ ] AI输入框可用
- [ ] 上下文切换按钮
- [ ] 侧边栏导航
- [ ] 同步状态显示
- [ ] 登出功能

### 10. 下一步

测试通过后，可以:

1. **启动完整AI服务**
   ```bash
   cd ../backend/docker
   ./setup.bat  # Windows
   # 或
   ./setup.sh   # Linux/Mac
   ```

2. **集成真实数据库**
   - 替换内存数据库为SQLCipher
   - 实现数据持久化

3. **部署打包**
   ```bash
   npm run build
   npm run package
   ```

## 报告问题

如果发现任何bug或问题，请记录:
- 操作步骤
- 预期结果
- 实际结果
- 错误信息(如有)
- 终端输出
