<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChainlessChain é«˜çº§ç‰¹æ€§æ§åˆ¶é¢æ¿</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        h1 {
            color: #667eea;
            font-size: 32px;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 14px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            background: white;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .tab {
            flex: 1;
            padding: 15px 20px;
            background: #f5f5f5;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #666;
        }

        .tab:hover {
            background: #e8e8e8;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 20px;
            font-weight: 700;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .metric {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .metric.success {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
        }

        .metric.warning {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        }

        .metric.danger {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
        }

        .metric-label {
            font-size: 14px;
            color: #555;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .metric-value {
            font-size: 32px;
            font-weight: 700;
            color: #333;
        }

        .metric-unit {
            font-size: 18px;
            color: #666;
            margin-left: 5px;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin: 15px 0;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f5f5f5;
            color: #333;
        }

        .btn-secondary:hover {
            background: #e8e8e8;
        }

        .btn-success {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            color: #333;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            color: white;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .slider-container {
            padding: 10px 0;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #e0e0e0;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
        }

        .log-container {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 15px;
        }

        .log-entry {
            margin-bottom: 5px;
            padding: 5px;
        }

        .log-entry.info {
            color: #4ec9b0;
        }

        .log-entry.warn {
            color: #ce9178;
        }

        .log-entry.error {
            color: #f48771;
        }

        .status-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }

        .status-badge.running {
            background: #84fab0;
            color: #1a5f3a;
        }

        .status-badge.stopped {
            background: #ff9a9e;
            color: #7a1f23;
        }

        .status-badge.warning {
            background: #ffecd2;
            color: #7a4e1f;
        }

        .chart-container {
            height: 300px;
            margin-top: 20px;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alert-info {
            background: #e3f2fd;
            color: #1976d2;
            border-left: 4px solid #1976d2;
        }

        .alert-success {
            background: #e8f5e9;
            color: #388e3c;
            border-left: 4px solid #388e3c;
        }

        .alert-warning {
            background: #fff3e0;
            color: #f57c00;
            border-left: 4px solid #f57c00;
        }

        .alert-danger {
            background: #ffebee;
            color: #d32f2f;
            border-left: 4px solid #d32f2f;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .history-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .history-table th,
        .history-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .history-table th {
            background: #f5f5f5;
            font-weight: 600;
            color: #333;
        }

        .history-table tr:hover {
            background: #f9f9f9;
        }

        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸš€ ChainlessChain é«˜çº§ç‰¹æ€§æ§åˆ¶é¢æ¿</h1>
            <p class="subtitle">å®æ—¶ç›‘æ§å’Œæ§åˆ¶è‡ªé€‚åº”é˜ˆå€¼ã€åœ¨çº¿å­¦ä¹ å’Œé«˜çº§ä¼˜åŒ–å™¨</p>
        </header>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('overview')">ğŸ“Š æ€»è§ˆ</button>
            <button class="tab" onclick="switchTab('threshold')">âš™ï¸ è‡ªé€‚åº”é˜ˆå€¼</button>
            <button class="tab" onclick="switchTab('learning')">ğŸ§  åœ¨çº¿å­¦ä¹ </button>
            <button class="tab" onclick="switchTab('optimizer')">âš¡ é«˜çº§ä¼˜åŒ–å™¨</button>
            <button class="tab" onclick="switchTab('logs')">ğŸ“ æ—¥å¿—</button>
            <button class="tab" onclick="switchTab('settings')">ğŸ”§ è®¾ç½®</button>
        </div>

        <!-- æ€»è§ˆæ ‡ç­¾é¡µ -->
        <div id="overview" class="tab-content active">
            <div class="card">
                <div class="card-title">ç³»ç»ŸçŠ¶æ€</div>
                <div class="metric-grid">
                    <div class="metric success">
                        <div class="metric-label">æœåŠ¡çŠ¶æ€</div>
                        <div class="metric-value" id="service-status">è¿è¡Œä¸­</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">è¿è¡Œæ—¶é•¿</div>
                        <div class="metric-value" id="uptime">0<span class="metric-unit">å°æ—¶</span></div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">ç»¼åˆè¯„åˆ†</div>
                        <div class="metric-value" id="overall-score">--<span class="metric-unit">/100</span></div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">ä»Šæ—¥ä»»åŠ¡</div>
                        <div class="metric-value" id="today-tasks">0<span class="metric-unit">ä¸ª</span></div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">æ ¸å¿ƒæŒ‡æ ‡</div>
                <div class="metric-grid">
                    <div class="metric" id="small-model-metric">
                        <div class="metric-label">å°æ¨¡å‹ä½¿ç”¨ç‡</div>
                        <div class="metric-value" id="small-model-rate">--<span class="metric-unit">%</span></div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="small-model-progress" style="width: 0%">0%</div>
                        </div>
                    </div>
                    <div class="metric" id="success-rate-metric">
                        <div class="metric-label">æˆåŠŸç‡</div>
                        <div class="metric-value" id="success-rate">--<span class="metric-unit">%</span></div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="success-progress" style="width: 0%">0%</div>
                        </div>
                    </div>
                    <div class="metric" id="cost-savings-metric">
                        <div class="metric-label">æˆæœ¬èŠ‚çº¦</div>
                        <div class="metric-value" id="cost-savings">--<span class="metric-unit">%</span></div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="cost-progress" style="width: 0%">0%</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">å¿«é€Ÿæ“ä½œ</div>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="refreshData()">
                        <span>ğŸ”„</span> åˆ·æ–°æ•°æ®
                    </button>
                    <button class="btn btn-success" onclick="runFullOptimization()">
                        <span>âš¡</span> å…¨é¢ä¼˜åŒ–
                    </button>
                    <button class="btn btn-secondary" onclick="exportReport()">
                        <span>ğŸ“Š</span> å¯¼å‡ºæŠ¥å‘Š
                    </button>
                    <button class="btn btn-warning" onclick="openSettings()">
                        <span>ğŸ”§</span> é…ç½®è®¾ç½®
                    </button>
                </div>
            </div>

            <div class="card">
                <div class="card-title">æœ€è¿‘æ´»åŠ¨</div>
                <table class="history-table" id="recent-activity">
                    <thead>
                        <tr>
                            <th>æ—¶é—´</th>
                            <th>ç±»å‹</th>
                            <th>æ“ä½œ</th>
                            <th>ç»“æœ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="4" style="text-align: center; color: #999;">æš‚æ— æ•°æ®</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- è‡ªé€‚åº”é˜ˆå€¼æ ‡ç­¾é¡µ -->
        <div id="threshold" class="tab-content">
            <div class="card">
                <div class="card-title">
                    å½“å‰é˜ˆå€¼
                    <span class="status-badge running" id="threshold-status">è¿è¡Œä¸­</span>
                </div>
                <div class="metric-grid">
                    <div class="metric">
                        <div class="metric-label">å¤æ‚åº¦é˜ˆå€¼</div>
                        <div class="metric-value" id="current-threshold">0.52</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">ä¸Šæ¬¡è°ƒæ•´æ—¶é—´</div>
                        <div class="metric-value" style="font-size: 16px;" id="last-adjustment">--</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">è°ƒæ•´æ¬¡æ•°(24h)</div>
                        <div class="metric-value" id="adjustment-count">0</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">æ€§èƒ½ç›‘æ§</div>
                <div class="form-group">
                    <label class="form-label">ç›‘æ§å‘¨æœŸ</label>
                    <select class="form-input" id="monitor-period" onchange="loadThresholdData()">
                        <option value="1">æœ€è¿‘1å¤©</option>
                        <option value="7" selected>æœ€è¿‘7å¤©</option>
                        <option value="30">æœ€è¿‘30å¤©</option>
                    </select>
                </div>
                <div id="threshold-metrics-container"></div>
            </div>

            <div class="card">
                <div class="card-title">æ‰‹åŠ¨æ“ä½œ</div>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="monitorThreshold()">
                        <span>ğŸ“Š</span> æ€§èƒ½ç›‘æ§
                    </button>
                    <button class="btn btn-secondary" onclick="simulateThresholdAdjustment()">
                        <span>ğŸ”®</span> æ¨¡æ‹Ÿè°ƒæ•´
                    </button>
                    <button class="btn btn-warning" onclick="executeThresholdAdjustment()">
                        <span>âš™ï¸</span> æ‰§è¡Œè°ƒæ•´
                    </button>
                    <button class="btn btn-success" onclick="toggleAutoAdjust()">
                        <span id="auto-adjust-icon">â–¶ï¸</span> <span id="auto-adjust-text">å¯ç”¨è‡ªåŠ¨è°ƒæ•´</span>
                    </button>
                </div>
            </div>

            <div class="card">
                <div class="card-title">é˜ˆå€¼è°ƒæ•´å†å²</div>
                <table class="history-table" id="threshold-history">
                    <thead>
                        <tr>
                            <th>æ—¶é—´</th>
                            <th>æ—§é˜ˆå€¼</th>
                            <th>æ–°é˜ˆå€¼</th>
                            <th>è°ƒæ•´å¹…åº¦</th>
                            <th>åŸå› </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="5" style="text-align: center; color: #999;">æš‚æ— æ•°æ®</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- åœ¨çº¿å­¦ä¹ æ ‡ç­¾é¡µ -->
        <div id="learning" class="tab-content">
            <div class="card">
                <div class="card-title">
                    å­¦ä¹ çŠ¶æ€
                    <span class="status-badge running" id="learning-status">è¿è¡Œä¸­</span>
                </div>
                <div class="metric-grid">
                    <div class="metric">
                        <div class="metric-label">å¤æ‚åº¦é¢„æµ‹å‡†ç¡®ç‡</div>
                        <div class="metric-value" id="complexity-accuracy">--<span class="metric-unit">%</span></div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">æ„å›¾è¯†åˆ«å‡†ç¡®ç‡</div>
                        <div class="metric-value" id="intent-accuracy">--<span class="metric-unit">%</span></div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">å·¥å…·æ¨èé‡‡çº³ç‡</div>
                        <div class="metric-value" id="tool-adoption">--<span class="metric-unit">%</span></div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">è®­ç»ƒæ ·æœ¬æ•°</div>
                        <div class="metric-value" id="training-samples">0</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">æ¨¡å‹è¯¦æƒ…</div>
                <div class="settings-grid">
                    <div>
                        <h4 style="margin-bottom: 10px;">å¤æ‚åº¦ä¼°è®¡å™¨</h4>
                        <p style="color: #666; font-size: 14px; margin-bottom: 10px;">æƒé‡é…ç½®:</p>
                        <ul style="color: #666; font-size: 14px; line-height: 1.8;">
                            <li>æ„å›¾å¤æ‚åº¦: <strong id="weight-intent">0.30</strong></li>
                            <li>ä¸Šä¸‹æ–‡å¤æ‚åº¦: <strong id="weight-context">0.25</strong></li>
                            <li>å†å²å¤æ‚åº¦: <strong id="weight-history">0.20</strong></li>
                            <li>å·¥å…·å¤æ‚åº¦: <strong id="weight-tools">0.25</strong></li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="margin-bottom: 10px;">æ„å›¾è¯†åˆ«å™¨</h4>
                        <p style="color: #666; font-size: 14px; margin-bottom: 10px;">ç»Ÿè®¡ä¿¡æ¯:</p>
                        <ul style="color: #666; font-size: 14px; line-height: 1.8;">
                            <li>å·²å­¦ä¹ æ¨¡å¼: <strong id="learned-patterns">0</strong> ä¸ª</li>
                            <li>å…³é”®è¯è¦†ç›–: <strong id="keyword-coverage">0</strong> ä¸ª</li>
                            <li>å¹³å‡ç½®ä¿¡åº¦: <strong id="avg-confidence">0.00</strong></li>
                            <li>æ–°å¢æ¨¡å¼(24h): <strong id="new-patterns">0</strong> ä¸ª</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">è®­ç»ƒæ“ä½œ</div>
                <div class="form-group">
                    <label class="form-label">è®­ç»ƒæ•°æ®èŒƒå›´</label>
                    <select class="form-input" id="train-days">
                        <option value="7">æœ€è¿‘7å¤©</option>
                        <option value="30" selected>æœ€è¿‘30å¤©</option>
                        <option value="60">æœ€è¿‘60å¤©</option>
                        <option value="90">æœ€è¿‘90å¤©</option>
                    </select>
                </div>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="trainModels()">
                        <span>ğŸ¯</span> è®­ç»ƒæ¨¡å‹
                    </button>
                    <button class="btn btn-secondary" onclick="evaluateModels()">
                        <span>ğŸ“ˆ</span> è¯„ä¼°æ€§èƒ½
                    </button>
                    <button class="btn btn-success" onclick="showLearningStats()">
                        <span>ğŸ“Š</span> å­¦ä¹ ç»Ÿè®¡
                    </button>
                </div>
            </div>
        </div>

        <!-- é«˜çº§ä¼˜åŒ–å™¨æ ‡ç­¾é¡µ -->
        <div id="optimizer" class="tab-content">
            <div class="card">
                <div class="card-title">
                    ä¼˜åŒ–å™¨çŠ¶æ€
                    <span class="status-badge running" id="optimizer-status">è¿è¡Œä¸­</span>
                </div>
                <div class="metric-grid">
                    <div class="metric">
                        <div class="metric-label">é¢„æµ‹ç¼“å­˜å‘½ä¸­ç‡</div>
                        <div class="metric-value" id="cache-hit-rate">--<span class="metric-unit">%</span></div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">å¹¶è¡ŒåŒ–ä»»åŠ¡æ•°</div>
                        <div class="metric-value" id="parallel-tasks">0</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">å¹³å‡æ—¶é—´èŠ‚çº¦</div>
                        <div class="metric-value" id="time-savings">--<span class="metric-unit">%</span></div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">æ£€æµ‹åˆ°çš„ç“¶é¢ˆ</div>
                        <div class="metric-value" id="bottleneck-count">0</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">ä¼˜åŒ–åŠŸèƒ½</div>
                <div class="settings-grid">
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" id="feature-predictive" checked>
                            é¢„æµ‹æ€§ç¼“å­˜
                        </label>
                        <p style="color: #666; font-size: 13px; margin-top: 5px;">åŸºäºç”¨æˆ·è¡Œä¸ºé¢„åŠ è½½æ•°æ®</p>
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" id="feature-parallel" checked>
                            å¹¶è¡Œä»»åŠ¡ä¼˜åŒ–
                        </label>
                        <p style="color: #666; font-size: 13px; margin-top: 5px;">è‡ªåŠ¨å¹¶è¡ŒåŒ–ç‹¬ç«‹ä»»åŠ¡</p>
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" id="feature-retry" checked>
                            æ™ºèƒ½é‡è¯•æœºåˆ¶
                        </label>
                        <p style="color: #666; font-size: 13px; margin-top: 5px;">è‡ªé€‚åº”é‡è¯•ç­–ç•¥</p>
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" id="feature-bottleneck" checked>
                            ç“¶é¢ˆæ£€æµ‹
                        </label>
                        <p style="color: #666; font-size: 13px; margin-top: 5px;">è‡ªåŠ¨è¯†åˆ«æ€§èƒ½ç“¶é¢ˆ</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">ä¼˜åŒ–æ“ä½œ</div>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="runPredictiveCache()">
                        <span>ğŸ”®</span> é¢„æµ‹æ€§ç¼“å­˜
                    </button>
                    <button class="btn btn-primary" onclick="runParallelOptimization()">
                        <span>âš¡</span> å¹¶è¡Œä¼˜åŒ–
                    </button>
                    <button class="btn btn-primary" onclick="runSmartRetry()">
                        <span>ğŸ”„</span> æ™ºèƒ½é‡è¯•
                    </button>
                    <button class="btn btn-primary" onclick="runBottleneckDetection()">
                        <span>ğŸ”</span> ç“¶é¢ˆæ£€æµ‹
                    </button>
                    <button class="btn btn-success" onclick="runFullOptimizationDetail()">
                        <span>ğŸš€</span> å…¨é¢ä¼˜åŒ–
                    </button>
                </div>
            </div>

            <div class="card">
                <div class="card-title">ç“¶é¢ˆåˆ—è¡¨</div>
                <div id="bottleneck-list"></div>
            </div>
        </div>

        <!-- æ—¥å¿—æ ‡ç­¾é¡µ -->
        <div id="logs" class="tab-content">
            <div class="card">
                <div class="card-title">å®æ—¶æ—¥å¿—</div>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="refreshLogs()">
                        <span>ğŸ”„</span> åˆ·æ–°
                    </button>
                    <button class="btn btn-secondary" onclick="clearLogs()">
                        <span>ğŸ—‘ï¸</span> æ¸…ç©ºæ˜¾ç¤º
                    </button>
                    <button class="btn btn-success" onclick="exportLogs()">
                        <span>ğŸ’¾</span> å¯¼å‡ºæ—¥å¿—
                    </button>
                    <select class="form-input" style="width: 150px;" id="log-filter" onchange="filterLogs()">
                        <option value="all">å…¨éƒ¨</option>
                        <option value="info">INFO</option>
                        <option value="warn">WARN</option>
                        <option value="error">ERROR</option>
                    </select>
                </div>
                <div class="log-container" id="log-output">
                    <div class="log-entry info">[2026-01-02 14:30:00] [INFO] ç³»ç»Ÿå¯åŠ¨...</div>
                    <div class="log-entry info">[2026-01-02 14:30:05] [INFO] æ‰€æœ‰æœåŠ¡å·²å°±ç»ª</div>
                </div>
            </div>
        </div>

        <!-- è®¾ç½®æ ‡ç­¾é¡µ -->
        <div id="settings" class="tab-content">
            <div class="card">
                <div class="card-title">å…¨å±€é…ç½®</div>
                <div class="alert alert-info">
                    <span>â„¹ï¸</span>
                    <span>ä¿®æ”¹é…ç½®åéœ€è¦é‡å¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆ</span>
                </div>

                <h3 style="margin: 20px 0 15px 0;">è‡ªé€‚åº”é˜ˆå€¼é…ç½®</h3>
                <div class="settings-grid">
                    <div class="form-group">
                        <label class="form-label">æ£€æŸ¥é—´éš” (åˆ†é’Ÿ)</label>
                        <input type="number" class="form-input" id="config-threshold-interval" value="60" min="10" max="1440">
                    </div>
                    <div class="form-group">
                        <label class="form-label">æœ€å°æ ·æœ¬é‡</label>
                        <input type="number" class="form-input" id="config-threshold-samples" value="50" min="10" max="500">
                    </div>
                    <div class="form-group">
                        <label class="form-label">å­¦ä¹ ç‡</label>
                        <input type="number" class="form-input" id="config-threshold-lr" value="0.05" min="0.01" max="0.5" step="0.01">
                    </div>
                    <div class="form-group">
                        <label class="form-label">å†·å´æœŸ (å°æ—¶)</label>
                        <input type="number" class="form-input" id="config-threshold-cooldown" value="1" min="0.5" max="24" step="0.5">
                    </div>
                </div>

                <h3 style="margin: 30px 0 15px 0;">åœ¨çº¿å­¦ä¹ é…ç½®</h3>
                <div class="settings-grid">
                    <div class="form-group">
                        <label class="form-label">è®­ç»ƒæ•°æ®å¤©æ•°</label>
                        <input type="number" class="form-input" id="config-learning-days" value="30" min="7" max="365">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ç½®ä¿¡åº¦é˜ˆå€¼</label>
                        <input type="number" class="form-input" id="config-learning-confidence" value="0.7" min="0.1" max="1.0" step="0.1">
                    </div>
                </div>

                <h3 style="margin: 30px 0 15px 0;">é«˜çº§ä¼˜åŒ–å™¨é…ç½®</h3>
                <div class="settings-grid">
                    <div class="form-group">
                        <label class="form-label">æœ€å¤§å¹¶è¡Œä»»åŠ¡æ•°</label>
                        <input type="number" class="form-input" id="config-optimizer-parallel" value="4" min="1" max="16">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ç¼“å­˜è¿‡æœŸæ—¶é—´ (åˆ†é’Ÿ)</label>
                        <input type="number" class="form-input" id="config-optimizer-cache" value="30" min="5" max="120">
                    </div>
                    <div class="form-group">
                        <label class="form-label">æœ€å¤§é‡è¯•æ¬¡æ•°</label>
                        <input type="number" class="form-input" id="config-optimizer-retry" value="3" min="1" max="10">
                    </div>
                </div>

                <div class="button-group" style="margin-top: 30px;">
                    <button class="btn btn-primary" onclick="saveSettings()">
                        <span>ğŸ’¾</span> ä¿å­˜é…ç½®
                    </button>
                    <button class="btn btn-secondary" onclick="resetSettings()">
                        <span>â†©ï¸</span> é‡ç½®é»˜è®¤
                    </button>
                    <button class="btn btn-warning" onclick="restartServices()">
                        <span>ğŸ”„</span> é‡å¯æœåŠ¡
                    </button>
                </div>
            </div>

            <div class="card">
                <div class="card-title">æ•°æ®ç®¡ç†</div>
                <div class="button-group">
                    <button class="btn btn-secondary" onclick="backupDatabase()">
                        <span>ğŸ’¾</span> å¤‡ä»½æ•°æ®åº“
                    </button>
                    <button class="btn btn-warning" onclick="cleanOldData()">
                        <span>ğŸ—‘ï¸</span> æ¸…ç†æ—§æ•°æ®
                    </button>
                    <button class="btn btn-danger" onclick="resetAllData()">
                        <span>âš ï¸</span> é‡ç½®æ‰€æœ‰æ•°æ®
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€çŠ¶æ€
        let currentTab = 'overview';
        let autoRefreshInterval = null;
        let isAutoAdjustEnabled = false;

        // æ ‡ç­¾é¡µåˆ‡æ¢
        function switchTab(tabName) {
            // éšè—æ‰€æœ‰æ ‡ç­¾é¡µ
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾é¡µ
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            currentTab = tabName;

            // åŠ è½½å¯¹åº”æ•°æ®
            loadTabData(tabName);
        }

        // åŠ è½½æ ‡ç­¾é¡µæ•°æ®
        function loadTabData(tabName) {
            switch(tabName) {
                case 'overview':
                    loadOverviewData();
                    break;
                case 'threshold':
                    loadThresholdData();
                    break;
                case 'learning':
                    loadLearningData();
                    break;
                case 'optimizer':
                    loadOptimizerData();
                    break;
                case 'logs':
                    loadLogs();
                    break;
            }
        }

        // åŠ è½½æ€»è§ˆæ•°æ®
        function loadOverviewData() {
            // æ¨¡æ‹Ÿæ•°æ®ï¼ˆå®é™…åº”ä»APIè·å–ï¼‰
            updateMetric('small-model-rate', 42.3, 40, 60);
            updateMetric('success-rate', 98.1, 85, 100);
            updateMetric('cost-savings', 68.5, 50, 100);
            document.getElementById('overall-score').textContent = '87';
            document.getElementById('today-tasks').textContent = '234';
        }

        // æ›´æ–°æŒ‡æ ‡æ˜¾ç¤º
        function updateMetric(id, value, min, max) {
            const element = document.getElementById(id);
            const progressElement = document.getElementById(id.replace('-rate', '-progress').replace('-savings', '-progress'));
            const metricElement = document.getElementById(id + '-metric');

            if (element) {
                element.textContent = value.toFixed(1);
            }

            if (progressElement) {
                const percentage = Math.min(100, Math.max(0, ((value - 0) / max) * 100));
                progressElement.style.width = percentage + '%';
                progressElement.textContent = value.toFixed(1) + '%';
            }

            // æ ¹æ®å€¼è®¾ç½®é¢œè‰²
            if (metricElement) {
                metricElement.classList.remove('success', 'warning', 'danger');
                if (value >= min && value <= max) {
                    metricElement.classList.add('success');
                } else if (Math.abs(value - ((min + max) / 2)) < (max - min) * 0.3) {
                    metricElement.classList.add('warning');
                } else {
                    metricElement.classList.add('danger');
                }
            }
        }

        // åˆ·æ–°æ•°æ®
        function refreshData() {
            showNotification('æ­£åœ¨åˆ·æ–°æ•°æ®...', 'info');
            loadTabData(currentTab);
            setTimeout(() => {
                showNotification('æ•°æ®åˆ·æ–°æˆåŠŸ', 'success');
            }, 1000);
        }

        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type = 'info') {
            // ç®€å•çš„é€šçŸ¥å®ç°
            console.log(`[${type.toUpperCase()}] ${message}`);
            // å®é™…åº”ä½¿ç”¨Toastæˆ–å…¶ä»–é€šçŸ¥ç»„ä»¶
        }

        // è‡ªé€‚åº”é˜ˆå€¼æ“ä½œ
        function monitorThreshold() {
            showNotification('æ­£åœ¨æ‰§è¡Œæ€§èƒ½ç›‘æ§...', 'info');
            // è°ƒç”¨åç«¯API
            setTimeout(() => {
                showNotification('æ€§èƒ½ç›‘æ§å®Œæˆ', 'success');
            }, 2000);
        }

        function simulateThresholdAdjustment() {
            showNotification('æ­£åœ¨æ¨¡æ‹Ÿé˜ˆå€¼è°ƒæ•´...', 'info');
            setTimeout(() => {
                showNotification('æ¨¡æ‹Ÿå®Œæˆï¼šå»ºè®®è°ƒæ•´ +0.02 (0.52 â†’ 0.54)', 'success');
            }, 1500);
        }

        function executeThresholdAdjustment() {
            if (confirm('ç¡®å®šè¦æ‰§è¡Œé˜ˆå€¼è°ƒæ•´å—ï¼Ÿ')) {
                showNotification('æ­£åœ¨æ‰§è¡Œé˜ˆå€¼è°ƒæ•´...', 'warning');
                setTimeout(() => {
                    showNotification('é˜ˆå€¼è°ƒæ•´æˆåŠŸ', 'success');
                    loadThresholdData();
                }, 2000);
            }
        }

        function toggleAutoAdjust() {
            isAutoAdjustEnabled = !isAutoAdjustEnabled;
            const icon = document.getElementById('auto-adjust-icon');
            const text = document.getElementById('auto-adjust-text');

            if (isAutoAdjustEnabled) {
                icon.textContent = 'â¸ï¸';
                text.textContent = 'åœæ­¢è‡ªåŠ¨è°ƒæ•´';
                showNotification('è‡ªåŠ¨è°ƒæ•´å·²å¯ç”¨', 'success');
            } else {
                icon.textContent = 'â–¶ï¸';
                text.textContent = 'å¯ç”¨è‡ªåŠ¨è°ƒæ•´';
                showNotification('è‡ªåŠ¨è°ƒæ•´å·²åœæ­¢', 'info');
            }
        }

        // åœ¨çº¿å­¦ä¹ æ“ä½œ
        function trainModels() {
            const days = document.getElementById('train-days').value;
            showNotification(`æ­£åœ¨è®­ç»ƒæ¨¡å‹ï¼ˆä½¿ç”¨${days}å¤©æ•°æ®ï¼‰...`, 'info');
            setTimeout(() => {
                showNotification('æ¨¡å‹è®­ç»ƒå®Œæˆ', 'success');
                loadLearningData();
            }, 3000);
        }

        function evaluateModels() {
            showNotification('æ­£åœ¨è¯„ä¼°æ¨¡å‹æ€§èƒ½...', 'info');
            setTimeout(() => {
                showNotification('æ¨¡å‹è¯„ä¼°å®Œæˆ', 'success');
            }, 2000);
        }

        function showLearningStats() {
            showNotification('æ­£åœ¨åŠ è½½å­¦ä¹ ç»Ÿè®¡...', 'info');
            setTimeout(() => {
                showNotification('ç»Ÿè®¡æ•°æ®å·²æ›´æ–°', 'success');
                loadLearningData();
            }, 1000);
        }

        // é«˜çº§ä¼˜åŒ–å™¨æ“ä½œ
        function runPredictiveCache() {
            showNotification('æ­£åœ¨æ‰§è¡Œé¢„æµ‹æ€§ç¼“å­˜åˆ†æ...', 'info');
            setTimeout(() => {
                showNotification('é¢„æµ‹æ€§ç¼“å­˜åˆ†æå®Œæˆ', 'success');
            }, 2000);
        }

        function runParallelOptimization() {
            showNotification('æ­£åœ¨æ‰§è¡Œå¹¶è¡Œä»»åŠ¡ä¼˜åŒ–...', 'info');
            setTimeout(() => {
                showNotification('å¹¶è¡Œä¼˜åŒ–åˆ†æå®Œæˆ', 'success');
            }, 2000);
        }

        function runSmartRetry() {
            showNotification('æ­£åœ¨æ‰§è¡Œæ™ºèƒ½é‡è¯•åˆ†æ...', 'info');
            setTimeout(() => {
                showNotification('æ™ºèƒ½é‡è¯•åˆ†æå®Œæˆ', 'success');
            }, 2000);
        }

        function runBottleneckDetection() {
            showNotification('æ­£åœ¨æ‰§è¡Œç“¶é¢ˆæ£€æµ‹...', 'info');
            setTimeout(() => {
                showNotification('æ£€æµ‹åˆ° 3 ä¸ªæ€§èƒ½ç“¶é¢ˆ', 'warning');
                loadOptimizerData();
            }, 2000);
        }

        function runFullOptimization() {
            if (confirm('ç¡®å®šè¦æ‰§è¡Œå…¨é¢ä¼˜åŒ–å—ï¼Ÿè¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ã€‚')) {
                showNotification('æ­£åœ¨æ‰§è¡Œå…¨é¢ä¼˜åŒ–...', 'info');
                setTimeout(() => {
                    showNotification('å…¨é¢ä¼˜åŒ–å®Œæˆ', 'success');
                }, 5000);
            }
        }

        function runFullOptimizationDetail() {
            runFullOptimization();
        }

        // æ—¥å¿—æ“ä½œ
        function refreshLogs() {
            showNotification('æ­£åœ¨åˆ·æ–°æ—¥å¿—...', 'info');
            loadLogs();
        }

        function clearLogs() {
            document.getElementById('log-output').innerHTML = '';
            showNotification('æ—¥å¿—æ˜¾ç¤ºå·²æ¸…ç©º', 'info');
        }

        function exportLogs() {
            showNotification('æ­£åœ¨å¯¼å‡ºæ—¥å¿—...', 'info');
            setTimeout(() => {
                showNotification('æ—¥å¿—å·²å¯¼å‡º', 'success');
            }, 1000);
        }

        function filterLogs() {
            const filter = document.getElementById('log-filter').value;
            showNotification(`ç­›é€‰çº§åˆ«: ${filter.toUpperCase()}`, 'info');
        }

        // è®¾ç½®æ“ä½œ
        function saveSettings() {
            showNotification('æ­£åœ¨ä¿å­˜é…ç½®...', 'info');
            setTimeout(() => {
                showNotification('é…ç½®ä¿å­˜æˆåŠŸ', 'success');
            }, 1000);
        }

        function resetSettings() {
            if (confirm('ç¡®å®šè¦é‡ç½®ä¸ºé»˜è®¤é…ç½®å—ï¼Ÿ')) {
                showNotification('é…ç½®å·²é‡ç½®', 'info');
                // é‡æ–°åŠ è½½é»˜è®¤å€¼
            }
        }

        function restartServices() {
            if (confirm('ç¡®å®šè¦é‡å¯æœåŠ¡å—ï¼Ÿ')) {
                showNotification('æ­£åœ¨é‡å¯æœåŠ¡...', 'warning');
                setTimeout(() => {
                    showNotification('æœåŠ¡é‡å¯æˆåŠŸ', 'success');
                }, 3000);
            }
        }

        function backupDatabase() {
            showNotification('æ­£åœ¨å¤‡ä»½æ•°æ®åº“...', 'info');
            setTimeout(() => {
                showNotification('æ•°æ®åº“å¤‡ä»½æˆåŠŸ', 'success');
            }, 2000);
        }

        function cleanOldData() {
            if (confirm('ç¡®å®šè¦æ¸…ç†90å¤©å‰çš„æ—§æ•°æ®å—ï¼Ÿ')) {
                showNotification('æ­£åœ¨æ¸…ç†æ—§æ•°æ®...', 'info');
                setTimeout(() => {
                    showNotification('æ—§æ•°æ®æ¸…ç†å®Œæˆ', 'success');
                }, 2000);
            }
        }

        function resetAllData() {
            if (confirm('è­¦å‘Šï¼šè¿™å°†åˆ é™¤æ‰€æœ‰å†å²æ•°æ®ï¼ç¡®å®šè¦ç»§ç»­å—ï¼Ÿ')) {
                if (confirm('è¯·å†æ¬¡ç¡®è®¤ï¼šçœŸçš„è¦é‡ç½®æ‰€æœ‰æ•°æ®å—ï¼Ÿ')) {
                    showNotification('æ­£åœ¨é‡ç½®æ‰€æœ‰æ•°æ®...', 'danger');
                    setTimeout(() => {
                        showNotification('æ‰€æœ‰æ•°æ®å·²é‡ç½®', 'success');
                    }, 2000);
                }
            }
        }

        function exportReport() {
            showNotification('æ­£åœ¨ç”ŸæˆæŠ¥å‘Š...', 'info');
            setTimeout(() => {
                showNotification('æŠ¥å‘Šå·²ç”Ÿæˆå¹¶å¯¼å‡º', 'success');
            }, 2000);
        }

        function openSettings() {
            switchTab('settings');
        }

        // åŠ è½½å…¶ä»–æ ‡ç­¾é¡µæ•°æ®çš„æ¨¡æ‹Ÿå‡½æ•°
        function loadThresholdData() {
            document.getElementById('current-threshold').textContent = '0.52';
            document.getElementById('last-adjustment').textContent = '2å°æ—¶å‰';
            document.getElementById('adjustment-count').textContent = '3';
        }

        function loadLearningData() {
            document.getElementById('complexity-accuracy').textContent = '87.3';
            document.getElementById('intent-accuracy').textContent = '82.5';
            document.getElementById('tool-adoption').textContent = '76.8';
            document.getElementById('training-samples').textContent = '1,234';

            document.getElementById('weight-intent').textContent = '0.32';
            document.getElementById('weight-context').textContent = '0.24';
            document.getElementById('weight-history').textContent = '0.19';
            document.getElementById('weight-tools').textContent = '0.25';

            document.getElementById('learned-patterns').textContent = '345';
            document.getElementById('keyword-coverage').textContent = '567';
            document.getElementById('avg-confidence').textContent = '0.78';
            document.getElementById('new-patterns').textContent = '5';
        }

        function loadOptimizerData() {
            document.getElementById('cache-hit-rate').textContent = '74.2';
            document.getElementById('parallel-tasks').textContent = '12';
            document.getElementById('time-savings').textContent = '38.5';
            document.getElementById('bottleneck-count').textContent = '3';

            // æ˜¾ç¤ºç“¶é¢ˆåˆ—è¡¨
            const bottleneckList = document.getElementById('bottleneck-list');
            bottleneckList.innerHTML = `
                <div class="alert alert-warning">
                    <strong>æ…¢ä»»åŠ¡ç“¶é¢ˆ:</strong> RAGå‘é‡æœç´¢ (å¹³å‡ 4.5s)
                </div>
                <div class="alert alert-warning">
                    <strong>é«˜å¤±è´¥ç‡ç“¶é¢ˆ:</strong> Gitè¿œç¨‹åŒæ­¥ (å¤±è´¥ç‡ 28.5%)
                </div>
                <div class="alert alert-info">
                    <strong>ç¼“å­˜æœªå‘½ä¸­:</strong> LLMå“åº”ç¼“å­˜ (å‘½ä¸­ç‡ 42.3%)
                </div>
            `;
        }

        function loadLogs() {
            // æ¨¡æ‹ŸåŠ è½½æ—¥å¿—
            const logOutput = document.getElementById('log-output');
            const now = new Date();
            const timestamp = now.toISOString().replace('T', ' ').slice(0, 19);

            logOutput.innerHTML += `
                <div class="log-entry info">[${timestamp}] [INFO] æ—¥å¿—å·²åˆ·æ–°</div>
            `;

            // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
            logOutput.scrollTop = logOutput.scrollHeight;
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadOverviewData();

            // å¯åŠ¨è‡ªåŠ¨åˆ·æ–°
            autoRefreshInterval = setInterval(() => {
                if (currentTab === 'overview') {
                    loadOverviewData();
                }
            }, 5000);
        });
    </script>
</body>
</html>
