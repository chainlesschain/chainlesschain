# ChainlessChain P2优化 - 生产环境配置
# 版本: v0.18.0
# 更新: 2026-01-01
# 用途: 生产部署，性能阈值更宽松，稳定性优先

# ============================================
# 环境标识
# ============================================
NODE_ENV=production

# ============================================
# P2优化模块开关
# ============================================

# 意图融合（合并相似意图，减少LLM调用）
ENABLE_INTENT_FUSION=true

# 知识蒸馏（小模型处理简单任务）
ENABLE_KNOWLEDGE_DISTILLATION=true

# 流式响应（实时进度反馈）
ENABLE_STREAMING_RESPONSE=true

# ============================================
# P1优化模块（保持启用）
# ============================================

# 多意图识别
ENABLE_MULTI_INTENT=true

# 动态Few-shot学习
ENABLE_DYNAMIC_FEW_SHOT=true

# 分层任务规划
ENABLE_HIERARCHICAL_PLANNING=true

# 检查点校验
ENABLE_CHECKPOINT_VALIDATION=true

# 自我修正循环
ENABLE_SELF_CORRECTION=true

# ============================================
# P0优化模块（保持启用）
# ============================================

# 槽位填充
ENABLE_SLOT_FILLING=true

# 工具沙箱
ENABLE_TOOL_SANDBOX=true

# 性能监控
ENABLE_PERFORMANCE_MONITOR=true

# ============================================
# P2意图融合配置 - 生产环境
# ============================================

# 启用规则融合
FUSION_ENABLE_RULE=true

# 启用LLM融合
FUSION_ENABLE_LLM=true

# LLM融合置信度阈值（生产环境更高）
FUSION_LLM_CONFIDENCE_THRESHOLD=0.85

# 最大融合窗口
FUSION_MAX_WINDOW=5

# ============================================
# P2知识蒸馏配置 - 生产环境
# ============================================

# 小模型
DISTILL_STUDENT_MODEL=qwen2:1.5b
DISTILL_STUDENT_TEMPERATURE=0.5
DISTILL_STUDENT_MAX_TOKENS=1024

# 大模型
DISTILL_TEACHER_MODEL=qwen2:7b
DISTILL_TEACHER_TEMPERATURE=0.7
DISTILL_TEACHER_MAX_TOKENS=2048

# 路由配置（生产环境更保守）
DISTILL_COMPLEXITY_THRESHOLD=0.4
DISTILL_STUDENT_ACCURACY_THRESHOLD=0.90
DISTILL_CONFIDENCE_THRESHOLD=0.75

# 训练配置
DISTILL_MIN_SAMPLES=2000
DISTILL_MIN_CONFIDENCE=0.95
DISTILL_RETRAIN_INTERVAL=604800000
DISTILL_MAX_TRAINING_SAMPLES=20000

# 质量检查（生产环境更严格）
DISTILL_ENABLE_QUALITY_CHECK=true
DISTILL_FALLBACK_ON_LOW_CONFIDENCE=true
DISTILL_FALLBACK_THRESHOLD=0.75

# ============================================
# P2流式响应配置 - 生产环境
# ============================================

# 启用进度反馈
STREAMING_ENABLE_PROGRESS=true

# 启用取消功能
STREAMING_ENABLE_CANCEL=true

# 最小更新间隔（毫秒，生产环境稍长避免过于频繁）
STREAMING_MIN_UPDATE_INTERVAL=200

# 启用部分结果流式返回
STREAMING_ENABLE_PARTIAL_RESULTS=true

# ============================================
# 工具沙箱配置 - 生产环境（更宽松更稳定）
# ============================================

SANDBOX_TIMEOUT=60000
SANDBOX_RETRIES=3
SANDBOX_RETRY_DELAY=2000
SANDBOX_ENABLE_VALIDATION=true
SANDBOX_ENABLE_SNAPSHOT=true

# ============================================
# 性能监控配置 - 生产环境（宽松阈值）
# ============================================

PERF_RETENTION_DAYS=90
PERF_AUTO_CLEANUP=true

# 性能阈值（毫秒）- 生产环境更宽松
PERF_INTENT_RECOGNITION_WARNING=2000
PERF_INTENT_RECOGNITION_CRITICAL=4000
PERF_TASK_PLANNING_WARNING=5000
PERF_TASK_PLANNING_CRITICAL=10000
PERF_TOOL_EXECUTION_WARNING=6000
PERF_TOOL_EXECUTION_CRITICAL=12000
PERF_RAG_RETRIEVAL_WARNING=3000
PERF_RAG_RETRIEVAL_CRITICAL=6000
PERF_LLM_CALLS_WARNING=4000
PERF_LLM_CALLS_CRITICAL=8000
PERF_TOTAL_PIPELINE_WARNING=15000
PERF_TOTAL_PIPELINE_CRITICAL=30000

# ============================================
# LLM配置
# ============================================

# Ollama配置
OLLAMA_HOST=http://localhost:11434
OLLAMA_MODEL=qwen2:7b

# ============================================
# 向量数据库配置
# ============================================

QDRANT_HOST=http://localhost:6333

# ============================================
# 数据保留策略
# ============================================

# P2优化数据保留（天）
P2_DATA_RETENTION_DAYS=90

# 性能数据保留（天）
PERFORMANCE_DATA_RETENTION_DAYS=90

# ============================================
# 日志级别
# ============================================

LOG_LEVEL=info
LOG_TO_FILE=true

# ============================================
# 特性开关 - 生产环境
# ============================================

# 关闭调试模式
DEBUG_MODE=false

# 关闭详细日志
VERBOSE_LOGGING=false

# 关闭性能分析
ENABLE_PROFILING=false

# 关闭实验性功能
ENABLE_EXPERIMENTAL_FEATURES=false
