<template>
  <div class="language-switcher">
    <a-dropdown :trigger="['click']">
      <a-button shape="circle">
        <template #icon><GlobalOutlined /></template>
      </a-button>

      <template #overlay>
        <a-menu @click="handleMenuClick" :selected-keys="[currentLocale]">
          <a-menu-item :key="LOCALES.ZH_CN">
            <span>ðŸ‡¨ðŸ‡³ ç®€ä½“ä¸­æ–‡</span>
          </a-menu-item>
          <a-menu-item :key="LOCALES.EN_US">
            <span>ðŸ‡ºðŸ‡¸ English</span>
          </a-menu-item>
        </a-menu>
      </template>
    </a-dropdown>
  </div>
</template>

<script setup>
import { GlobalOutlined } from '@ant-design/icons-vue';
import { useI18n } from '../../i18n';
import { message } from 'ant-design-vue';

const { currentLocale, setLocale, LOCALES } = useI18n();

const handleMenuClick = ({ key }) => {
  setLocale(key);
  message.success('è¯­è¨€å·²åˆ‡æ¢ / Language changed');
  // åˆ·æ–°é¡µé¢ä»¥åº”ç”¨æ–°è¯­è¨€
  setTimeout(() => {
    window.location.reload();
  }, 500);
};
</script>

<style scoped lang="scss">
.language-switcher {
  display: inline-block;
}
</style>
