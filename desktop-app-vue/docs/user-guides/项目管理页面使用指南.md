# ChainlessChain 项目管理页面使用指南

## 🚀 快速开始

### 启动应用

```bash
# 进入桌面应用目录
cd desktop-app-vue

# 安装依赖（首次运行）
npm install

# 启动开发模式
npm run dev
```

---

## 📖 功能使用指南

### 1. 创建新项目（对话式）

#### 方式1：项目列表页快速创建

1. **打开项目列表页** - 点击左侧导航栏的"扣子编辑"
2. **输入创建需求** - 在中央的大型输入框中输入，例如：
   ```
   帮我创建一个智能手表的产品介绍网页
   ```
3. **查看AI处理过程** - AI会自动：
   - 🔍 **步骤1**: 识别意图（CREATE_FILE - Web项目）
   - 📋 **步骤2**: 制定执行计划（创建HTML/CSS/JS结构）
   - 🛠️ **步骤3**: 生成项目文件
   - 💾 **步骤4**: 保存到本地并Git初始化

4. **实时查看步骤** - 每个步骤都会显示：
   - 状态图标（🔄 运行中 / ✅ 完成 / ❌ 失败）
   - 执行时间
   - 详细信息（可点击展开/折叠）

#### 方式2：使用项目类型快捷按钮

1. 点击页面上方的快捷按钮：**写作**、**PPT**、**设计**、**Excel**、**网页**、**视频**、**图库**
2. 在输入框中描述具体需求
3. AI会根据选中的类型自动创建对应项目

---

### 2. 项目详情页功能

#### 2.1 文件管理

**左侧：文件树**
- 📁 查看项目所有文件
- 🔍 快速搜索文件
- ➕ 右键菜单：新建文件、重命名、删除
- 🔄 刷新按钮：同步文件系统变更

**选择文件后**：
- 自动在中央区域打开编辑器
- 支持语法高亮（HTML/CSS/JS/MD等）
- 实时保存（Ctrl+S 或自动保存）

#### 2.2 编辑与预览

**视图模式切换**（顶部工具栏）：
- 🤖 **自动模式**: 根据文件类型自动选择编辑或预览
- ✏️ **编辑模式**: 显示代码编辑器
- 👁️ **预览模式**: 显示渲染效果

**浏览器预览功能**：
- 🌐 地址栏：显示当前文件路径
- ⬅️➡️ 导航按钮：前进/后退
- 🔄 刷新按钮：重新加载
- 🔍 缩放控制：50% - 150%（下拉菜单快速选择）
- 📷 截图功能（更多菜单）
- 🔗 在浏览器中打开

#### 2.3 AI助手对话

**右侧：AI聊天面板**（默认显示，可通过顶部按钮隐藏）

**使用方式**：
1. 在底部输入框输入指令，例如：
   ```
   把标题改成蓝色
   添加一个返回顶部的按钮
   优化页面响应式布局
   ```

2. **@提及功能**：
   - 输入 `@` 触发提及菜单
   - 可以提及文件、知识库内容
   - 示例：`@index.html 在这个文件里添加导航栏`

3. **附件上传**：
   - 点击📎图标上传参考文件
   - 支持图片、文档等多种格式
   - AI会根据附件内容提供建议

**建议问题**：
- AI会根据当前上下文推荐相关问题
- 点击问题卡片可快速填充到输入框

#### 2.4 版本历史

**打开方式**：点击顶部工具栏的"版本历史"按钮

**功能**：
- 📅 **时间线视图**: 显示所有版本修改记录
- 📊 **统计信息**: 每个版本的文件变更数（新增/删除/修改）
- 🔄 **版本恢复**: 点击"恢复"按钮回退到指定版本
- 🔍 **版本对比**: 查看两个版本之间的差异
- 📝 **详情查看**: 查看完整的提交信息和文件列表

---

### 3. Git操作

#### 自动提交（推荐）

**默认配置**：
- ✅ 已启用自动提交
- ⏰ 每5分钟自动检查变更
- 📝 自动生成提交信息

**管理方式**：
```javascript
// 通过IPC调用
window.electronAPI.gitAutoCommit.start(projectId, repoPath);
window.electronAPI.gitAutoCommit.stop(projectId);
window.electronAPI.gitAutoCommit.setInterval(10 * 60 * 1000); // 10分钟
```

#### 手动Git操作

**顶部工具栏 → Git操作下拉菜单**：

1. **查看状态**：
   - 显示未追踪文件
   - 显示已修改文件
   - 显示暂存文件

2. **提交更改**：
   - 输入提交信息（支持多行）
   - 自动添加所有变更文件
   - 生成提交记录

3. **提交历史**：
   - 查看所有提交记录
   - 每条记录显示：提交ID、作者、时间、信息
   - 支持查看提交详情

4. **推送/拉取**：
   - 推送到远程仓库
   - 拉取最新代码
   - 冲突自动检测

---

### 4. 文件选择弹框

**打开方式**：点击对话输入框的📎附件按钮

**功能**：
- 🏷️ **多标签筛选**: 全部 / PPT / 网页 / 文档
- ⭐ **收藏管理**: 点击星标收藏常用文件
- 📥 **快速下载**: 点击下载图标导出文件
- ✅ **多选支持**: 按住Ctrl/Cmd多选文件

**使用场景**：
- 上传参考文件到AI对话
- 批量操作项目文件
- 导出项目文件

---

### 5. 项目类别和标签

#### 类别标签栏（项目列表页）

**预设类别**：
- 🔍 **探索**: 查看所有项目
- 👤 **人命相关**: 简历、个人网站等
- 📚 **教育学习**: 课程、笔记、教材
- 💰 **财经分析**: 数据报表、趋势分析
- 🎮 **生活娱乐**: 游戏、娱乐项目
- 📣 **市场营销**: 宣传页、广告素材
- ✈️ **旅游攻略**: 旅行计划、攻略

**切换方式**：
- 点击标签快速筛选
- 支持与项目类型快捷按钮组合使用

---

## 🎯 常见使用场景

### 场景1：创建产品介绍网页

```
输入：帮我创建一个智能手表的产品介绍页面，要求响应式设计，包含轮播图
```

**AI处理流程**：
1. 识别意图：CREATE_FILE (Web项目)
2. 检测需求：
   - 产品类型：智能手表
   - 功能需求：轮播图、响应式
3. 生成项目结构：
   ```
   smart-watch-intro/
   ├── index.html      # 主页面
   ├── css/
   │   └── style.css   # 样式文件（含响应式）
   ├── js/
   │   └── script.js   # 交互脚本（轮播图）
   └── images/         # 图片资源
   ```
4. 启动本地预览（localhost:3000）

### 场景2：编辑现有文件

```
步骤1：在文件树中选择 index.html
步骤2：在AI助手输入：把导航栏背景改成渐变色，从蓝色到紫色
```

**AI处理流程**：
1. 识别意图：EDIT_FILE
2. 定位目标：`<nav>` 标签的CSS
3. 生成代码：
   ```css
   nav {
     background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
   }
   ```
4. 自动保存并刷新预览

### 场景3：导出为PDF文档

```
输入：把这个项目导出为PDF格式的用户手册
```

**AI处理流程**：
1. 识别意图：EXPORT_FILE
2. 调用文档引擎：
   - 读取项目所有Markdown文件
   - 应用用户手册模板
   - 生成PDF文件
3. 保存到：`项目目录/exports/manual.pdf`

### 场景4：数据分析报告

```
输入：分析这个CSV文件的销售数据，生成可视化图表和报告
```

**AI处理流程**：
1. 识别意图：ANALYZE_DATA
2. 调用数据引擎：
   - 读取CSV文件
   - 计算统计指标（平均值、总和、趋势）
   - 生成图表（柱状图、折线图、饼图）
3. 生成HTML报告页面

---

## 🔧 高级功能

### 1. 自定义工具注册

**开发者可以注册自定义工具**：

```javascript
// 在 index.js 中
this.aiEngineManager.registerTool(
  'custom_tool_name',
  async (params, context) => {
    // 工具逻辑
    return { success: true, result: '...' };
  },
  {
    description: '工具描述',
    parameters: {
      param1: { type: 'string', required: true },
      param2: { type: 'number', required: false }
    }
  }
);
```

### 2. 项目模板管理

**查看可用模板**：
```javascript
const templates = await window.electronAPI.webEngine.getTemplates();
// 返回: [{ id, name, projectType, description, previewImage }]
```

**使用模板创建项目**：
```javascript
const result = await window.electronAPI.webEngine.generate({
  templateId: 'blog-template',
  projectName: 'My Blog',
  customParams: { theme: 'dark' }
});
```

### 3. 项目自动化规则

**创建自动化规则**（数据库表已支持）：
- **触发类型**: 文件变更、Git提交、定时任务、手动触发
- **动作类型**: 运行测试、构建、部署、通知、自定义脚本

**示例**：
```sql
INSERT INTO project_automation_rules (
  project_id,
  rule_name,
  trigger_type,
  trigger_config,
  action_type,
  action_config,
  enabled
) VALUES (
  'project_123',
  '自动测试',
  'file_change',
  '{"pattern": "**/*.js"}',
  'run_tests',
  '{"command": "npm test"}',
  1
);
```

---

## 🐛 故障排除

### 问题1：AI步骤一直显示"运行中"

**可能原因**：
- 后端服务未正常响应
- 网络连接问题（云端LLM）

**解决方案**：
1. 检查控制台日志：`Ctrl+Shift+I` → Console
2. 查看后端日志：`main进程日志`
3. 重启应用

### 问题2：预览页面空白

**可能原因**：
- HTML文件路径错误
- 端口被占用（3000）

**解决方案**：
1. 检查文件路径是否正确
2. 查看网络面板（DevTools → Network）
3. 尝试更换预览端口（在配置中修改）

### 问题3：Git自动提交不工作

**可能原因**：
- 自动提交已禁用
- 项目未初始化Git仓库

**解决方案**：
1. 启用自动提交：
   ```javascript
   await window.electronAPI.gitAutoCommit.setEnabled(true);
   ```
2. 手动初始化Git：
   ```bash
   cd 项目目录
   git init
   ```

### 问题4：文件树不显示

**可能原因**：
- 项目路径无效
- 文件权限问题

**解决方案**：
1. 检查项目根路径是否存在
2. 尝试刷新文件树（点击刷新按钮）
3. 查看控制台错误信息

---

## 📚 相关文档

- 📖 **实施方案**: `项目管理页面重构实施方案.md`
- ✅ **验收报告**: `项目管理页面重构完成验收报告.md`
- 🏗️ **系统设计**: `系统设计_个人移动AI管理系统.md`
- 🚀 **快速开始**: `QUICK_START.md`
- 🔧 **开发指南**: `CONTRIBUTING.md`

---

## 💡 最佳实践

### 1. 对话输入技巧

**明确需求**：
```
❌ 不好: 做个网页
✅ 好: 创建一个智能手表产品介绍页面，包含轮播图、规格参数表、购买按钮，使用蓝紫渐变配色
```

**分步操作**：
```
❌ 不好: 把页面改得更好看一点
✅ 好: 第一步：把导航栏改成渐变背景
     第二步：添加动画效果
     第三步：优化移动端布局
```

**使用@提及**：
```
✅ @index.html 在这个文件的第50行添加一个按钮
✅ @产品介绍知识库 参考这里的内容生成产品描述
```

### 2. 文件组织

**推荐结构**：
```
my-project/
├── src/           # 源代码
├── assets/        # 资源文件（图片、字体）
├── dist/          # 构建输出
├── docs/          # 文档
├── tests/         # 测试文件
└── README.md      # 项目说明
```

### 3. Git提交信息

**遵循规范**（已在自动提交中实现）：
```
feat: 添加轮播图功能
fix: 修复导航栏在移动端的显示问题
docs: 更新API文档
style: 统一代码格式
refactor: 重构首页组件
test: 添加单元测试
chore: 更新依赖版本
```

---

## 🆘 获取帮助

### 方式1：查看文档
- 项目文档目录：`desktop-app-vue/docs/`
- 在线文档：（待添加）

### 方式2：查看示例
- 参考项目：`参考资料/` 目录中的截图
- 模板项目：内置的5种Web模板

### 方式3：提交Issue
- GitHub仓库：`https://github.com/your-repo/chainlesschain`
- Issue模板：Bug报告 / 功能请求 / 问题咨询

---

## 🎓 视频教程（计划中）

- [ ] 第1课：快速创建第一个项目
- [ ] 第2课：使用AI助手编辑文件
- [ ] 第3课：浏览器预览与调试
- [ ] 第4课：版本历史管理
- [ ] 第5课：Git集成与协作
- [ ] 第6课：高级功能：自定义工具

---

**更新日期**: 2025-12-23
**文档版本**: v1.0
**适用版本**: ChainlessChain v0.16.0+
