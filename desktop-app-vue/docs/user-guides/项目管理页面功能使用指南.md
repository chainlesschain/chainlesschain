# 项目管理页面功能使用指南

**更新时间**: 2025-12-23
**适用版本**: ChainlessChain v0.16.0+

---

## 📖 概述

本文档介绍ChainlessChain项目管理页面的新功能和使用方法，包括对话式AI工作流、文件处理引擎、版本管理等核心功能。

---

## 🎯 核心功能

### 1. 对话式项目创建

**使用场景**: 通过自然语言描述创建项目

**操作步骤**:

1. 在项目列表页的输入框中输入需求，例如：
   ```
   帮我创建一个智能手表的产品介绍页面
   ```

2. AI引擎会自动：
   - 🔍 识别意图（创建Web项目）
   - 📋 制定执行计划（HTML + CSS + JS）
   - ⚙️ 执行步骤（生成文件、创建结构、初始化Git）
   - 🎨 生成预览

3. 实时查看执行步骤：
   - 蓝色卡片 = 正在执行
   - 绿色卡片 = 已完成
   - 红色卡片 = 执行失败

**支持的项目类型**:
- 📄 Web开发（5种模板：博客、作品集、企业站、产品页、单页应用）
- 📝 文档项目（3种模板：商务报告、学术论文、用户手册）
- 📊 数据分析（CSV处理、数据可视化）

---

### 2. 项目分类管理

**功能**: 按类别快速筛选项目

**分类标签**:
- 🧭 探索 - 所有项目
- 👥 人命相关
- 📚 教育学习
- 💰 财经分析
- 🎉 生活娱乐
- 📈 市场营销
- ✈️ 旅游攻略

**快捷操作**:
- 点击标签切换分类
- 显示每个分类的项目数量（徽章）
- 支持项目收藏和置顶

---

### 3. 文件选择弹框

**触发方式**:
- 点击对话输入框的"📎 附件"按钮
- 点击"@项目文件"提及

**功能特性**:
- 📁 多标签分类（全部 / PPT / Word / Excel / 图片）
- ☑️ 支持多选和单选模式
- ⭐ 文件收藏功能
- 📥 快速下载

**文件类型图标**:
- PPT: 🟧 橙色 PowerPoint 图标
- Word: 🟦 蓝色 Word 图标
- Excel: 🟩 绿色 Excel 图标
- 图片: 🟢 绿色图片图标

---

### 4. 版本历史管理

**触发方式**: 点击项目详情页右上角的"📜 版本历史"按钮

**功能特性**:

1. **版本列表展示**:
   - 版本号（v1.0.0, v1.0.1...）
   - 提交时间（智能显示：刚刚、5分钟前、2小时前、3天前）
   - 变更摘要（标题和描述）
   - 变更统计（+添加行数、-删除行数、📝修改文件数）

2. **版本操作**:
   - 🔄 恢复到此版本
   - 🔍 对比版本差异
   - 📖 查看详细信息

3. **当前版本标记**:
   - 绿色"当前版本"标签
   - 选中版本高亮显示

4. **版本搜索**:
   - 搜索版本号、标题、描述

**颜色编码**:
- 🟢 添加（绿色）: +123 lines
- 🔴 删除（红色）: -45 lines
- 🔵 修改（蓝色）: 8 files

---

### 5. AI建议问题

**功能**: AI根据上下文推荐后续问题

**显示时机**:
- 完成一个任务后
- 等待用户输入时
- 对话停顿超过10秒

**交互方式**:
- 点击问题自动发送到输入框
- 默认显示3个问题
- 点击"查看更多"展开全部建议

**示例问题**:
```
💡 如何修改页面的主题色？
💡 能不能添加一个导航栏？
💡 如何让网站适配移动端？
```

---

### 6. 浏览器预览

**功能**: 实时预览Web项目

**特性**:
- 🌐 模拟浏览器工具栏（地址栏、前进、后退、刷新）
- 🔍 缩放控制（50% - 150%）
- 📱 响应式尺寸切换（桌面、平板、手机）
- 🔄 实时刷新（文件保存后自动更新）

**快捷键**:
- `Ctrl + +` 放大
- `Ctrl + -` 缩小
- `Ctrl + 0` 重置缩放
- `F5` 刷新预览

---

### 7. Git自动提交

**功能**: 自动检测文件更改并定期提交

**配置选项**:
- ⏱️ 检测间隔: 5分钟（默认）
- 🔒 自动提交: 启用/禁用
- 📝 提交信息格式: `Auto-commit: 2025-12-23 10:30:45`

**手动操作**:
- 查看Git状态
- 查看提交历史
- 手动提交更改
- 推送到远程仓库
- 拉取最新代码

**提交规则**:
- 仅提交有更改的文件
- 忽略 `node_modules`、`.DS_Store` 等文件
- 支持自定义 `.gitignore`

---

## 🛠️ 技术架构

### AI引擎工作流程

```
用户输入
    ↓
意图识别 (IntentClassifier)
    ↓
任务规划 (TaskPlanner)
    ↓
Function Calling (FunctionCaller)
    ↓
执行步骤 (Web/Document/Data Engine)
    ↓
返回结果
```

### 支持的意图类型

| 意图类型 | 触发关键词 | 示例 |
|---------|----------|------|
| `CREATE_FILE` | 创建、生成、新建 | "创建一个产品页" |
| `EDIT_FILE` | 修改、改成、更新 | "把标题改成蓝色" |
| `QUERY_INFO` | 查询、显示、列出 | "显示所有CSS文件" |
| `ANALYZE_DATA` | 分析、统计、汇总 | "分析销售数据" |
| `EXPORT_FILE` | 导出、下载、保存为 | "导出为PDF" |
| `DEPLOY_PROJECT` | 部署、发布、上线 | "部署到服务器" |

### 文件处理引擎

#### Web引擎 (web-engine.js)

**支持的模板**:

1. **博客模板** (`blog`)
   - 文章列表
   - 侧边栏（最新文章）
   - 评论区（可选）

2. **作品集模板** (`portfolio`)
   - 项目展示网格
   - 图片画廊
   - 联系表单

3. **企业站模板** (`corporate`)
   - 导航栏
   - Hero区域
   - 服务展示
   - 关于我们

4. **产品页模板** (`product`)
   - 产品Hero
   - 功能列表
   - 定价表
   - CTA按钮

5. **单页应用模板** (`spa`)
   - Vue/React风格
   - 组件化结构
   - 路由配置

**CSS框架**: 支持Tailwind CSS风格

#### 文档引擎 (document-engine.js)

**支持的模板**:

1. **商务报告** (`business_report`)
   - 摘要、背景、分析、结论、建议

2. **学术论文** (`academic_paper`)
   - 摘要、引言、文献综述、方法、结果、讨论、结论、参考文献

3. **用户手册** (`user_manual`)
   - 简介、快速开始、功能说明、常见问题、故障排除

**输出格式**: Markdown、HTML、PDF（需Puppeteer）

#### 数据引擎 (data-engine.js)

**功能**:
- CSV读写
- 数据清洗
- 数据统计（求和、平均值、中位数）
- 数据可视化（Chart.js）

**支持的图表类型**:
- 📈 折线图 (line)
- 📊 柱状图 (bar)
- 🥧 饼图 (pie)
- 📉 散点图 (scatter)
- 📊 面积图 (area)

---

## 🎨 UI组件使用

### ConversationInput 对话输入框

```vue
<ConversationInput
  placeholder="给我发消息或描述你的任务..."
  :max-length="5000"
  @submit="handleSubmit"
  @file-upload="handleFileUpload"
/>
```

**Props**:
- `placeholder`: 占位符文本
- `maxLength`: 最大字符数（默认5000）
- `disabled`: 禁用状态
- `showHint`: 显示提示文本

**Events**:
- `submit`: 提交消息 `{ text, attachments }`
- `change`: 文本变化
- `file-upload`: 文件上传

**特性**:
- ✅ @提及功能（知识库、文件、工具）
- ✅ 附件上传（拖拽、粘贴、点击）
- ✅ Ctrl+Enter快捷提交
- ✅ 自动调整高度（120px - 300px）

---

### StepDisplay 步骤展示

```vue
<StepDisplay
  :step="step"
  :collapsible="true"
  @collapse="handleCollapse"
/>
```

**Step对象结构**:
```javascript
{
  id: 'step_1',
  name: '生成HTML文件',
  status: 'running', // pending | running | completed | failed
  startTime: 1703300000000,
  endTime: 1703300005000,
  duration: 5000,
  result: { ... }
}
```

**状态颜色**:
- 🔵 运行中: 蓝色 + 加载动画
- 🟢 已完成: 绿色 + ✓ 图标
- 🔴 失败: 红色 + ✗ 图标
- ⚪ 待执行: 灰色

---

### ProjectSidebar 项目侧边栏

```vue
<ProjectSidebar
  :conversations="conversations"
  :active-conversation="activeId"
  :user-name="userName"
  @new-conversation="handleNew"
  @conversation-click="handleClick"
/>
```

**功能**:
- 📂 收藏夹
- 🤖 AI专家
- 📝 扣子编辑
- 📜 历史对话列表
- 👤 用户信息展示

---

### WelcomeHeader 欢迎头部

```vue
<WelcomeHeader
  title="又见面啦！有新的工作安排吗？"
  suggestion="Logo 设计怎么选取权威网站？"
  @suggestion-click="handleSuggestionClick"
/>
```

**样式**:
- 渐变背景（紫色 → 蓝色）
- 建议问题卡片（毛玻璃效果）
- 悬停动画

---

### CategoryTabs 分类标签

```vue
<CategoryTabs
  v-model="activeCategory"
  :categories="categories"
  :show-counts="true"
  @change="handleCategoryChange"
/>
```

---

### ProjectCardsGrid 项目卡片网格

```vue
<ProjectCardsGrid
  :projects="projects"
  :columns="4"
  :loading="loading"
  :show-pagination="true"
  @view="handleView"
  @edit="handleEdit"
/>
```

**Props**:
- `columns`: 列数（2/3/4/6）
- `gap`: 间距
- `loading`: 加载状态
- `showPagination`: 显示分页

---

## 🔧 开发者指南

### 注册自定义工具

```javascript
// 在 AI 引擎中注册新工具
aiEngine.registerTool('send_email', async (params) => {
  const { to, subject, body } = params;
  // 发送邮件逻辑
  return { success: true, messageId: '...' };
}, {
  name: 'send_email',
  description: '发送电子邮件',
  parameters: {
    to: { type: 'string', required: true },
    subject: { type: 'string', required: true },
    body: { type: 'string', required: true }
  }
});
```

### 添加新的项目模板

```javascript
// 在 web-engine.js 中添加新模板
generateBlogHTML(title, description, content) {
  return `<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <title>${title}</title>
  ...
</head>
<body>
  ...
</body>
</html>`;
}
```

### 监听AI执行步骤

```javascript
window.electronAPI.on('ai:stepUpdate', (step) => {
  console.log(`步骤 ${step.id}: ${step.status}`);
  // 更新UI显示步骤进度
});
```

---

## 🚀 性能优化

### 预览服务器

- **LRU缓存**: 最多同时运行3个预览服务器
- **端口动态分配**: 3000-3100范围自动选择
- **热更新**: 文件保存后自动刷新

### AI引擎

- **混合模式**: 简单任务用本地Ollama，复杂任务用云端API
- **上下文缓存**: 保留最近100条执行历史
- **并行执行**: 独立步骤并行处理

---

## 📝 常见问题

### Q1: 如何修改AI引擎的执行间隔？

**A**: 在 `git-auto-commit.js` 中修改 `interval` 参数（单位：毫秒）

```javascript
const gitAutoCommit = new GitAutoCommit({
  interval: 10 * 60 * 1000, // 改为10分钟
});
```

### Q2: 如何自定义项目模板？

**A**: 编辑 `project-structure.js`，添加新的结构定义

```javascript
this.structures.custom_template = {
  name: '自定义模板',
  directories: ['src', 'dist'],
  files: [
    { path: 'src/index.js', template: 'js_basic' }
  ]
};
```

### Q3: 如何禁用自动Git提交？

**A**: 在初始化时设置 `enabled: false`

```javascript
const gitAutoCommit = new GitAutoCommit({
  enabled: false,
});
```

---

## 🎯 下一步计划

根据实施方案，以下功能将在后续版本中实现：

- [ ] 语音输入功能
- [ ] 浏览器扩展（网页剪藏）
- [ ] 知识图谱可视化
- [ ] 插件系统
- [ ] 多语言UI
- [ ] 企业功能（团队协作）

---

## 📞 技术支持

如有问题，请参考：
- 📖 系统设计文档: `系统设计_个人移动AI管理系统.md`
- 🔧 实施方案: `项目管理页面重构实施方案.md`
- ✅ 完成报告: `项目管理页面重构最终报告.md`
- 🐛 问题反馈: GitHub Issues

---

**版本**: v1.0.0
**最后更新**: 2025-12-23
**作者**: ChainlessChain Team
