# ChainlessChain Web Clipper - 安装与测试指南

## 📦 快速安装

### 前置条件

1. **桌面应用必须运行**
   ```bash
   cd desktop-app-vue
   npm run dev
   ```
   确保应用在 `http://localhost:23456` 运行

2. **浏览器要求**
   - Chrome 120+ / Edge 120+
   - Firefox 115+

### 安装步骤

#### 1. 构建扩展

```bash
cd browser-extension

# 安装依赖（首次）
npm install

# 构建Chrome/Edge版本
npm run build:chrome

# 或构建Firefox版本
npm run build:firefox

# 或构建所有版本
npm run build:all
```

#### 2. 加载到浏览器

**Chrome / Edge:**

1. 打开扩展管理页面
   - Chrome: `chrome://extensions/`
   - Edge: `edge://extensions/`

2. 启用"开发者模式"（右上角开关）

3. 点击"加载已解压的扩展程序"

4. 选择 `browser-extension/build/chrome` 目录

5. 扩展图标应出现在工具栏

**Firefox:**

1. 打开 `about:debugging#/runtime/this-firefox`

2. 点击"临时载入附加组件"

3. 选择 `browser-extension/build/firefox/manifest.json`

4. 扩展图标应出现在工具栏

### 验证安装

1. 点击扩展图标
2. 应该看到弹出窗口
3. 状态应显示：
   - 🟢 "已连接" - 正常
   - 🔴 "连接失败" - 检查桌面应用是否运行

---

## 🧪 功能测试

### 测试 1: 基础剪藏

1. 打开任意网页（如：https://example.com）
2. 点击扩展图标
3. 查看自动提取的标题和内容
4. 点击"剪藏到知识库"
5. 应该看到成功提示

**预期结果:**
- ✅ 标题自动填充
- ✅ 内容已提取
- ✅ 剪藏成功
- ✅ 桌面应用中可以看到新笔记

### 测试 2: AI 标签生成

1. 打开一篇文章页面
2. 点击扩展图标
3. 点击"🤖 AI生成"按钮
4. 等待 2-3 秒

**预期结果:**
- ✅ 标签自动生成（3-5个）
- ✅ 标签相关且准确
- ✅ 如果LLM不可用，使用关键词提取

### 测试 3: AI 摘要生成

1. 打开一篇长文章
2. 点击扩展图标
3. 点击"📝 AI摘要"按钮
4. 等待 3-5 秒

**预期结果:**
- ✅ 生成100-200字摘要
- ✅ 摘要准确概括文章
- ✅ 如果LLM不可用，提取前200字

### 测试 4: 截图标注

1. 打开任意网页
2. 点击扩展图标
3. 点击"📸 截图标注"
4. 使用标注工具：
   - 画笔
   - 高亮
   - 文本
   - 箭头
   - 矩形
5. 点击"💾 保存"

**预期结果:**
- ✅ 截图成功捕获
- ✅ 标注工具正常工作
- ✅ 保存成功
- ✅ 桌面应用中可以看到标注图片

### 测试 5: 批量剪藏

1. 打开多个标签页（3-5个）
2. 点击扩展图标
3. 点击"📚 批量剪藏"
4. 选择要剪藏的标签页
5. 点击"开始剪藏"
6. 观察进度

**预期结果:**
- ✅ 显示所有标签页
- ✅ 可以选择/取消选择
- ✅ 并发处理（最多3个）
- ✅ 显示进度和结果
- ✅ 成功/失败统计正确

### 测试 6: 快捷键

1. 打开任意网页
2. 按 `Ctrl+Shift+C` (Windows/Linux) 或 `Cmd+Shift+C` (Mac)

**预期结果:**
- ✅ 扩展弹出窗口打开
- ✅ 快捷键响应快速

---

## 🔧 故障排查

### 问题 1: "连接失败"

**原因:** 桌面应用未运行

**解决:**
```bash
cd desktop-app-vue
npm run dev
```

### 问题 2: "AI功能不可用"

**原因:** LLM服务未启动

**解决:**
- 启动Ollama: `docker-compose up -d`
- 或使用云端LLM（配置API密钥）
- 或接受Fallback模式（关键词提取）

### 问题 3: 截图失败

**原因:** 权限不足

**解决:**
- 检查扩展权限
- 重新加载扩展
- 刷新页面

### 问题 4: 批量剪藏部分失败

**原因:** 某些页面无法访问或提取

**解决:**
- 查看失败原因
- 手动剪藏失败的页面
- 检查页面是否需要登录

---

## 📊 性能指标

### 正常性能范围

- **基础剪藏**: < 2秒
- **AI标签生成**: 2-5秒（取决于LLM）
- **AI摘要生成**: 3-8秒（取决于LLM）
- **截图捕获**: < 1秒
- **批量剪藏**: 每页 2-3秒

### 文件大小

- **总大小**: ~407 KB（未压缩）
- **popup.js**: 65.7 KB
- **background.js**: 59.4 KB
- **batch-clipper.js**: 68.9 KB
- **annotation-editor.js**: 56.6 KB

---

## 🎯 测试清单

使用此清单确保所有功能正常：

- [ ] 扩展成功加载
- [ ] 连接状态正确显示
- [ ] 基础剪藏功能
- [ ] AI标签生成
- [ ] AI摘要生成
- [ ] 截图功能
- [ ] 标注工具（7种）
- [ ] 批量剪藏
- [ ] 快捷键
- [ ] 错误处理
- [ ] 成功提示
- [ ] 跨页面工作

---

## 🚀 开发模式

### 监视模式（自动重新构建）

```bash
npm run watch:chrome
```

修改代码后：
1. 保存文件
2. Webpack自动重新构建
3. 在浏览器中点击"重新加载"扩展
4. 刷新测试页面

### 调试

**Chrome DevTools:**
1. 右键点击扩展图标 → "检查弹出内容"
2. 或访问 `chrome://extensions/` → 点击"背景页"

**Firefox DevTools:**
1. 访问 `about:debugging#/runtime/this-firefox`
2. 点击扩展的"检查"按钮

---

## 📝 测试报告

测试完成后，记录结果：

```
测试日期: ___________
测试者: ___________
浏览器: ___________ 版本: ___________

功能测试结果:
[ ] 基础剪藏 - 通过/失败
[ ] AI标签 - 通过/失败
[ ] AI摘要 - 通过/失败
[ ] 截图标注 - 通过/失败
[ ] 批量剪藏 - 通过/失败

问题记录:
1. ___________
2. ___________
3. ___________

总体评价: ___________
```

---

## 🆘 获取帮助

- **GitHub Issues**: [提交问题](https://github.com/your-repo/chainlesschain/issues)
- **文档**: [用户指南](USER_GUIDE.md) | [开发文档](DEVELOPER_GUIDE.md)
- **测试报告**: [查看测试结果](FINAL_TEST_REPORT.md)

---

**祝测试顺利！** 🎉
