# 视频分类显示修复说明

## 问题原因

您看不到视频分类是因为：
1. 旧的 `category-manager.js` 没有包含视频分类
2. 数据库是在添加视频分类之前创建的

## 已完成的修复

✅ 已在 `src/main/category-manager.js` 中添加：
- 🎬 视频（一级分类）
- 📱 短视频（子分类）
- 📺 长视频（子分类）
- 📡 直播（子分类）
- 📹 Vlog（子分类）
- 🎨 动画（子分类）
- 🎮 测评（子分类）

✅ 主进程已重新构建

## 解决方案（3选1）

### 方案1：推荐方式（适用于首次使用或测试）

**直接删除数据库，让系统重新创建：**

```cmd
# Windows
cd desktop-app-vue
# 如果data目录存在且有数据库文件
del ..\data\chainlesschain.db

# 启动应用
npm run dev
```

```bash
# Linux/Mac
cd desktop-app-vue
# 如果data目录存在且有数据库文件
rm ../data/chainlesschain.db

# 启动应用
npm run dev
```

首次启动会自动创建包含视频分类的完整数据库。

### 方案2：使用修复脚本（Windows）

**运行一键修复工具：**

```cmd
cd desktop-app-vue
fix-video-category.bat
```

按照提示选择：
- 选项1：首次启动
- 选项2：更新现有数据库
- 选项3：删除数据库重建

### 方案3：手动更新数据库（保留现有数据）

**如果您的数据库中有重要数据：**

```bash
cd desktop-app-vue

# 运行更新脚本
node update-video-category.js

# 启动应用
npm run dev
```

## 验证视频分类是否显示

启动应用后，检查以下位置：

### 1. 新建项目页面

点击"新建项目"或"创建项目"，应该能看到：

```
📁 项目分类
├─ ✍️  写作
├─ 📢 营销
├─ 📊 Excel
├─ 📄 简历
├─ 📽️  PPT
├─ 🔬 研究
├─ 🎓 教育
├─ 🏠 生活
├─ 🎙️  播客
├─ 🎬 视频 ← 新增！
│  ├─ 📱 短视频
│  ├─ 📺 长视频
│  ├─ 📡 直播
│  ├─ 📹 Vlog
│  ├─ 🎨 动画
│  └─ 🎮 测评
├─ 🎨 设计
└─ 🌐 网页
```

### 2. 模板管理页面

进入"模板管理"页面，分类筛选器中应该有"视频"选项。

选择"视频"分类后，应该显示 **29个视频模板**：
- 短视频制作（4个）
- 长视频内容（3个）
- 直播（2个）
- Vlog（3个）
- 教程视频（2个）
- 后期制作（3个）
- 商业视频（1个）
- 访谈节目（2个）
- 动画视频（2个）
- 音乐视频（2个）
- 测评视频（3个）
- 拍摄策划（2个）

### 3. 浏览器控制台

按 F12 打开开发者工具，在控制台（Console）中应该看到：

```
[CategoryStore] 分类列表获取成功: 12
[TemplateStore] 成功加载模板: 29
```

## 常见问题

### Q1: 运行脚本后还是看不到视频分类？

**解决步骤：**

1. **完全关闭应用**（不是最小化，是退出）
2. **重新构建主进程**：
   ```bash
   cd desktop-app-vue
   npm run build:main
   ```
3. **重新启动应用**：
   ```bash
   npm run dev
   ```

### Q2: 模板管理页面显示但项目页面不显示？

**可能原因：**
- 前端缓存问题

**解决方案：**
1. 在开发者工具（F12）中
2. 右键点击刷新按钮
3. 选择"清空缓存并硬性重新加载"

### Q3: 创建视频项目时报错？

**检查以下内容：**

1. **确认29个模板文件存在：**
   ```bash
   cd desktop-app-vue
   ls src/main/templates/video/*.json | wc -l
   # 应该输出 29
   ```

2. **运行测试脚本：**
   ```bash
   node test-video-project.js
   ```
   应该显示"✅ 全部通过"

3. **查看错误日志：**
   - 浏览器控制台（F12）
   - 终端窗口输出

### Q4: 数据库文件在哪里？

**默认路径：**
- Windows: `C:\code\chainlesschain\data\chainlesschain.db`
- Linux/Mac: `/code/chainlesschain/data/chainlesschain.db`

**检查命令：**
```bash
# Windows
dir ..\data\chainlesschain.db

# Linux/Mac
ls -l ../data/chainlesschain.db
```

## 快速验证清单

使用以下清单确认一切正常：

- [ ] 主进程已重新构建（`npm run build:main`）
- [ ] 数据库已更新或重新创建
- [ ] 应用成功启动（`npm run dev`）
- [ ] 项目页面显示视频分类（🎬）
- [ ] 视频分类下有6个子分类
- [ ] 模板管理显示29个视频模板
- [ ] 可以成功创建视频项目
- [ ] 控制台无错误信息

## 完整重置流程（推荐）

如果以上方法都不行，执行完整重置：

```bash
# 1. 停止应用（Ctrl+C）

# 2. 删除数据库
cd C:\code\chainlesschain
del data\chainlesschain.db

# 3. 删除node_modules和dist（可选，如果有问题）
cd desktop-app-vue
rmdir /s /q node_modules dist

# 4. 重新安装依赖
npm install

# 5. 构建主进程
npm run build:main

# 6. 启动应用
npm run dev
```

## 技术支持

如果问题仍然存在，请提供以下信息：

1. **系统环境：**
   - 操作系统：Windows/Linux/Mac
   - Node.js版本：`node --version`
   - npm版本：`npm --version`

2. **错误信息：**
   - 浏览器控制台截图（F12）
   - 终端窗口错误输出

3. **测试结果：**
   ```bash
   cd desktop-app-vue
   node test-video-project.js
   ```
   提供完整输出

4. **数据库状态：**
   - 数据库文件是否存在
   - 文件大小和修改时间

## 相关文档

- **VIDEO_CATEGORY_UPDATE.md** - 技术更新说明
- **README_VIDEO_PROJECT.md** - 视频项目完整指南
- **VIDEO_QUICK_START_GUIDE.md** - 快速入门教程
- **DEPLOYMENT_STATUS.md** - 系统部署状态

---

**更新时间：** 2025-12-30
**适用版本：** v0.17.0
**状态：** ✅ 已修复，等待验证
