# ChainlessChain P2优化 - 开发环境配置
# 版本: v0.18.0
# 更新: 2026-01-01
# 用途: 开发调试，性能阈值更严格，帮助及早发现问题

# ============================================
# 环境标识
# ============================================
NODE_ENV=development

# ============================================
# P2优化模块开关
# ============================================

# 意图融合（合并相似意图，减少LLM调用）
ENABLE_INTENT_FUSION=true

# 知识蒸馏（小模型处理简单任务）
ENABLE_KNOWLEDGE_DISTILLATION=true

# 流式响应（实时进度反馈）
ENABLE_STREAMING_RESPONSE=true

# ============================================
# P1优化模块（保持启用）
# ============================================

# 多意图识别
ENABLE_MULTI_INTENT=true

# 动态Few-shot学习
ENABLE_DYNAMIC_FEW_SHOT=true

# 分层任务规划
ENABLE_HIERARCHICAL_PLANNING=true

# 检查点校验
ENABLE_CHECKPOINT_VALIDATION=true

# 自我修正循环
ENABLE_SELF_CORRECTION=true

# ============================================
# P0优化模块（保持启用）
# ============================================

# 槽位填充
ENABLE_SLOT_FILLING=true

# 工具沙箱
ENABLE_TOOL_SANDBOX=true

# 性能监控
ENABLE_PERFORMANCE_MONITOR=true

# ============================================
# P2意图融合配置 - 开发环境
# ============================================

# 启用规则融合
FUSION_ENABLE_RULE=true

# 启用LLM融合
FUSION_ENABLE_LLM=true

# LLM融合置信度阈值
FUSION_LLM_CONFIDENCE_THRESHOLD=0.8

# 最大融合窗口
FUSION_MAX_WINDOW=5

# ============================================
# P2知识蒸馏配置 - 开发环境
# ============================================

# 小模型
DISTILL_STUDENT_MODEL=qwen2:1.5b
DISTILL_STUDENT_TEMPERATURE=0.5
DISTILL_STUDENT_MAX_TOKENS=1024

# 大模型
DISTILL_TEACHER_MODEL=qwen2:7b
DISTILL_TEACHER_TEMPERATURE=0.7
DISTILL_TEACHER_MAX_TOKENS=2048

# 路由配置
DISTILL_COMPLEXITY_THRESHOLD=0.5
DISTILL_STUDENT_ACCURACY_THRESHOLD=0.85
DISTILL_CONFIDENCE_THRESHOLD=0.7

# 训练配置
DISTILL_MIN_SAMPLES=1000
DISTILL_MIN_CONFIDENCE=0.9
DISTILL_RETRAIN_INTERVAL=604800000
DISTILL_MAX_TRAINING_SAMPLES=10000

# 质量检查
DISTILL_ENABLE_QUALITY_CHECK=true
DISTILL_FALLBACK_ON_LOW_CONFIDENCE=true
DISTILL_FALLBACK_THRESHOLD=0.7

# ============================================
# P2流式响应配置 - 开发环境
# ============================================

# 启用进度反馈
STREAMING_ENABLE_PROGRESS=true

# 启用取消功能
STREAMING_ENABLE_CANCEL=true

# 最小更新间隔（毫秒）
STREAMING_MIN_UPDATE_INTERVAL=100

# 启用部分结果流式返回
STREAMING_ENABLE_PARTIAL_RESULTS=true

# ============================================
# 工具沙箱配置 - 开发环境（快速失败）
# ============================================

SANDBOX_TIMEOUT=15000
SANDBOX_RETRIES=1
SANDBOX_RETRY_DELAY=1000
SANDBOX_ENABLE_VALIDATION=true
SANDBOX_ENABLE_SNAPSHOT=true

# ============================================
# 性能监控配置 - 开发环境（严格阈值）
# ============================================

PERF_RETENTION_DAYS=7
PERF_AUTO_CLEANUP=true

# 性能阈值（毫秒）- 开发环境更严格
PERF_INTENT_RECOGNITION_WARNING=1000
PERF_INTENT_RECOGNITION_CRITICAL=2000
PERF_TASK_PLANNING_WARNING=3000
PERF_TASK_PLANNING_CRITICAL=6000
PERF_TOOL_EXECUTION_WARNING=3000
PERF_TOOL_EXECUTION_CRITICAL=5000
PERF_RAG_RETRIEVAL_WARNING=1500
PERF_RAG_RETRIEVAL_CRITICAL=3000
PERF_LLM_CALLS_WARNING=2000
PERF_LLM_CALLS_CRITICAL=4000
PERF_TOTAL_PIPELINE_WARNING=8000
PERF_TOTAL_PIPELINE_CRITICAL=15000

# ============================================
# LLM配置
# ============================================

# Ollama配置
OLLAMA_HOST=http://localhost:11434
OLLAMA_MODEL=qwen2:7b

# ============================================
# 向量数据库配置
# ============================================

QDRANT_HOST=http://localhost:6333

# ============================================
# 数据保留策略
# ============================================

# P2优化数据保留（天）
P2_DATA_RETENTION_DAYS=7

# 性能数据保留（天）
PERFORMANCE_DATA_RETENTION_DAYS=7

# ============================================
# 日志级别
# ============================================

LOG_LEVEL=debug
LOG_TO_FILE=true

# ============================================
# 特性开关 - 开发环境
# ============================================

# 启用调试模式
DEBUG_MODE=true

# 启用详细日志
VERBOSE_LOGGING=true

# 启用性能分析
ENABLE_PROFILING=true

# 启用实验性功能
ENABLE_EXPERIMENTAL_FEATURES=true
