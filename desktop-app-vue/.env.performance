# 性能优化环境变量配置
# 复制此文件为 .env 并根据需要调整参数

# ==============================================
# 知识图谱性能配置
# ==============================================

# LOD渲染阈值
GRAPH_LOD_FULL=200                    # 全量渲染节点数阈值
GRAPH_LOD_SIMPLIFIED=500              # 简化渲染节点数阈值
GRAPH_CLUSTER_THRESHOLD=1000          # 节点聚合阈值
GRAPH_PROGRESSIVE_CHUNK=100           # 渐进渲染块大小

# 默认开关
GRAPH_CLUSTERING=false                # 是否默认启用聚合
GRAPH_PROGRESSIVE=true                # 是否默认启用渐进渲染

# 性能目标
GRAPH_TARGET_FPS=30                   # 目标帧率
GRAPH_MAX_RENDER_TIME=500             # 最大渲染时间(ms)

# 监控配置
GRAPH_SHOW_STATS=true                 # 显示性能统计
GRAPH_PERF_LOGGING=false              # 记录性能日志

# ==============================================
# 数据库性能配置
# ==============================================

# 查询限制
DB_DEFAULT_LIMIT=100                  # 默认查询限制
DB_MAX_LIMIT=1000                     # 最大查询限制

# 缓存配置
DB_ENABLE_CACHE=true                  # 启用查询缓存
DB_CACHE_EXPIRY=300000                # 缓存过期时间(ms) - 5分钟
DB_MAX_CACHE_SIZE=100                 # 最大缓存条目数

# 分页配置
DB_PAGE_SIZE=50                       # 默认每页数量
DB_MESSAGES_PAGE_SIZE=50              # 消息每页数量
DB_GRAPH_PAGE_SIZE=500                # 图谱每页数量

# 自动优化
DB_AUTO_OPTIMIZE=false                # 自动索引优化
DB_ANALYZE_INTERVAL=3600000           # ANALYZE间隔(ms) - 1小时
DB_VACUUM_INTERVAL=86400000           # VACUUM间隔(ms) - 24小时

# 慢查询监控
DB_SLOW_QUERY_LOG=true                # 启用慢查询日志
DB_SLOW_QUERY_THRESHOLD=100           # 慢查询阈值(ms)
DB_LOG_QUERY_PLAN=false               # 记录查询计划

# ==============================================
# P2P连接池配置
# ==============================================

# 连接池大小
P2P_MAX_CONNECTIONS=100               # 最大连接数
P2P_MIN_CONNECTIONS=10                # 最小保持连接数

# 超时配置
P2P_MAX_IDLE_TIME=300000              # 最大空闲时间(ms) - 5分钟
P2P_CONNECTION_TIMEOUT=30000          # 连接超时(ms) - 30秒
P2P_MAX_RETRIES=3                     # 最大重试次数

# 健康检查
P2P_HEALTH_CHECK_ENABLED=true         # 启用健康检查
P2P_HEALTH_CHECK_INTERVAL=60000       # 健康检查间隔(ms) - 1分钟
P2P_CLOSE_DELAY=5000                  # 关闭延迟(ms)

# 自动清理
P2P_CLEANUP_ENABLED=true              # 启用自动清理
P2P_CLEANUP_INTERVAL=60000            # 清理间隔(ms) - 1分钟
P2P_CLEANUP_STRATEGY=lru              # 清理策略: lru/lfu/fifo

# 统计监控
P2P_ENABLE_STATS=true                 # 启用统计
P2P_STATS_INTERVAL=300000             # 统计间隔(ms) - 5分钟
P2P_LOG_DETAILS=false                 # 记录连接详情

# ==============================================
# 聊天历史加载配置
# ==============================================

# 分页配置
CHAT_MESSAGES_PER_PAGE=50             # 每页消息数
CHAT_INITIAL_LOAD=30                  # 初始加载消息数
CHAT_PRELOAD_THRESHOLD=10             # 预加载阈值
CHAT_MAX_CACHED=500                   # 最大缓存消息数

# 加载策略
CHAT_VIRTUAL_SCROLL=true              # 启用虚拟滚动
CHAT_INFINITE_SCROLL=true             # 启用无限滚动
CHAT_LOADING_DELAY=300                # 加载动画延迟(ms)

# 性能优化
CHAT_MESSAGE_MERGE=true               # 启用消息合并
CHAT_MERGE_WINDOW=60000               # 合并时间窗口(ms) - 1分钟
CHAT_LAZY_IMAGES=true                 # 懒加载图片

# ==============================================
# 全局性能配置
# ==============================================

# 性能模式
PERFORMANCE_MODE=false                # 启用性能模式
PERFORMANCE_LEVEL=2                   # 性能等级 1-3

# 开发配置
ENABLE_DEV_TOOLS=false                # 启用开发者工具
LOG_LEVEL=info                        # 日志级别: debug/info/warn/error
ENABLE_TRACING=false                  # 启用性能追踪

# ==============================================
# 高级配置（谨慎修改）
# ==============================================

# 性能模式预设
# PERFORMANCE_LEVEL=1: 平衡模式（默认）
#   - 适合大多数场景
#   - 中等内存占用
#   - 良好的响应速度
#
# PERFORMANCE_LEVEL=2: 高性能模式
#   - 更激进的缓存策略
#   - 更大的连接池
#   - 更快的响应速度
#   - 稍高内存占用
#
# PERFORMANCE_LEVEL=3: 极限性能模式
#   - 最大缓存和连接池
#   - 预加载更多数据
#   - 最快响应速度
#   - 显著增加内存占用
