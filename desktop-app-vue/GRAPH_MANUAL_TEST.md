# 知识图谱手动测试清单

## ✅ 代码验证状态

- ✅ 主进程构建成功（无语法错误）
- ✅ ECharts 依赖已安装 (v6.0.0)
- ✅ 所有文件已创建并集成
- ✅ 应用正在运行中

## 🧪 手动测试步骤

### 前提条件
应用已启动（端口 5173 和 Electron 已运行）

---

### 测试步骤 1: 访问知识图谱页面

1. **打开应用**（如果未打开）
   - 应用应该已经在运行

2. **导航到知识图谱**
   - 点击左侧菜单 **"知识与AI"**
   - 查找并点击 **"知识图谱"** 菜单项（带有网络图标）
   - 或在浏览器中访问：`http://localhost:5173/#/knowledge/graph`

**预期结果：**
- ✅ 页面加载成功
- ✅ 左侧显示控制面板（可折叠）
- ✅ 右侧显示空状态或图谱画布
- ✅ 无控制台错误

---

### 测试步骤 2: 创建测试笔记

**返回到笔记列表页面创建以下笔记：**

#### 笔记 1：Vue.js 学习笔记
```markdown
# Vue.js 学习笔记

Vue.js 是一个渐进式框架，与 [[React]] 和 [[Angular]] 类似。

主要特点：
- 响应式数据绑定
- 组件化开发
- 虚拟 DOM

相关笔记：[[前端框架对比]]、[[JavaScript 基础]]
```

#### 笔记 2：React
```markdown
# React 学习笔记

React 是 Facebook 开发的 UI 库。

与 [[Vue.js 学习笔记]] 的对比：
- 都使用虚拟 DOM
- 都支持组件化

参考：[[前端框架对比]]
```

#### 笔记 3：前端框架对比
```markdown
# 前端框架对比

主流框架：
- [[Vue.js 学习笔记]]
- [[React]]
- [[Angular]]

推荐学习路径：先学 [[JavaScript 基础]]
```

#### 笔记 4：JavaScript 基础
```markdown
# JavaScript 基础

JavaScript 是前端开发的基础。

建议学习：
- ES6+ 语法
- 异步编程
- 模块化

进阶：[[Vue.js 学习笔记]]、@前端框架对比
```

**预期结果：**
- ✅ 4 个笔记创建成功
- ✅ 笔记中包含 `[[...]]` Wiki 链接语法

---

### 测试步骤 3: 构建知识图谱

1. **返回知识图谱页面**
   - 点击菜单：知识与AI > 知识图谱

2. **点击"重建图谱"按钮**
   - 位于左侧控制面板底部
   - 按钮文字：**"重建图谱"**，图标：闪电

3. **等待处理完成**
   - 应显示处理进度
   - 完成后显示成功消息

**预期结果：**
- ✅ 显示成功消息（例如："图谱重建完成！处理了 4 个笔记，创建了 X 个关系"）
- ✅ 图谱画布中出现节点和连线
- ✅ 左侧统计信息更新

---

### 测试步骤 4: 验证图谱展示

**检查节点：**
- ✅ 应显示 4 个节点（对应 4 个笔记）
- ✅ 节点标签显示笔记标题
- ✅ 节点大小反映关联数（连接多的节点更大）
- ✅ 节点颜色正确（笔记类型为蓝色）

**检查连线（边）：**
- ✅ 节点之间有连线表示关系
- ✅ 连线带箭头（表示方向）
- ✅ 连线粗细反映权重
- ✅ 应至少有 6-10 条连线

**预期图谱结构：**
```
Vue.js 学习笔记 ←→ React
      ↓              ↓
前端框架对比 ←→ JavaScript 基础
```

---

### 测试步骤 5: 测试交互功能

#### 5.1 缩放和平移
- ✅ 鼠标滚轮：缩放图谱
- ✅ 鼠标拖拽空白处：平移视图
- ✅ 拖拽节点：移动节点位置

#### 5.2 点击节点
- ✅ 点击任意节点
- ✅ 左侧显示节点详情面板
- ✅ 详情面板显示：标题、类型、关联数、创建时间
- ✅ 相关节点和边高亮显示

#### 5.3 悬停节点
- ✅ 鼠标悬停在节点上
- ✅ 显示 Tooltip（节点信息）
- ✅ 高亮显示相邻节点

#### 5.4 关闭详情面板
- ✅ 点击详情面板右上角的 X
- ✅ 详情面板关闭

---

### 测试步骤 6: 测试工具栏

**位于右上角的工具栏，测试以下按钮：**

#### 6.1 重新布局
- ✅ 点击"刷新"图标
- ✅ 图谱重新布局动画

#### 6.2 缩放适应
- ✅ 点击"压缩"图标
- ✅ 图谱调整到适合视图大小

#### 6.3 布局切换
- ✅ 点击"布局"下拉菜单
- ✅ 选择"力导向布局"：节点自动分散
- ✅ 选择"环形布局"：节点呈圆形排列
- ✅ 选择"层级布局"：节点按层级排列

---

### 测试步骤 7: 测试筛选功能

**在左侧控制面板中测试筛选选项：**

#### 7.1 关系类型筛选
- ✅ 取消勾选"时间关系"
- ✅ 图谱更新，时间关系的边消失
- ✅ 重新勾选，边重新出现

#### 7.2 节点类型筛选
- ✅ 取消勾选某些节点类型
- ✅ 对应类型的节点从图谱中移除

#### 7.3 最小权重滑块
- ✅ 拖动滑块到 0.5
- ✅ 权重低于 0.5 的边被过滤

#### 7.4 节点数量限制
- ✅ 修改限制为 10
- ✅ 图谱最多显示 10 个节点

---

### 测试步骤 8: 测试其他操作

#### 8.1 重建标签关系
- ✅ 点击"重建标签关系"按钮
- ✅ 显示成功消息
- ✅ 图谱更新

#### 8.2 重建时间关系
- ✅ 点击"重建时间关系"按钮
- ✅ 显示成功消息
- ✅ 图谱更新（7天内创建的笔记之间出现连线）

#### 8.3 刷新数据
- ✅ 点击"刷新数据"按钮
- ✅ 显示"数据已刷新"消息
- ✅ 图谱重新加载

---

### 测试步骤 9: 验证统计信息

**左侧控制面板顶部应显示：**

- ✅ **节点数**：4（绿色）
- ✅ **关系数**：X（蓝色，应该 >= 6）
- ✅ **链接关系**：显示数量
- ✅ **标签关系**：显示数量
- ✅ **语义关系**：0（需要LLM）
- ✅ **时间关系**：显示数量

---

### 测试步骤 10: 控制台检查

**打开浏览器开发者工具（F12）**

#### 检查控制台
- ✅ 无红色错误信息
- ✅ 可能有蓝色日志信息（正常）

#### 检查网络请求
- ✅ 无失败的 IPC 请求
- ✅ ECharts 资源加载成功

#### 检查Vue DevTools（如果安装）
- ✅ GraphStore 状态正确
- ✅ nodes 和 edges 数据存在

---

## 🐛 常见问题排查

### 问题 1: 图谱为空
**可能原因：**
- 笔记中没有使用 `[[...]]` 语法
- 笔记标题与链接文本不匹配

**解决方案：**
- 确保使用 `[[笔记标题]]` 格式
- 标题必须完全匹配（区分大小写）
- 重新点击"重建图谱"

### 问题 2: 节点无法点击
**检查：**
- 浏览器控制台是否有错误
- GraphCanvas 组件是否正确加载

### 问题 3: ECharts 报错
**检查：**
- `npm list echarts` 确认已安装
- 清除缓存重新构建：`npm run build:main`

### 问题 4: 菜单项不显示
**检查：**
- MainLayout.vue 中是否正确导入 `NodeIndexOutlined`
- 路由配置是否正确

---

## ✅ 测试通过标准

所有以下项目应该通过：

1. ✅ 页面加载无错误
2. ✅ 菜单项显示正确
3. ✅ 能够创建测试笔记
4. ✅ 能够重建图谱
5. ✅ 图谱正确显示节点和边
6. ✅ 交互功能正常（点击、拖拽、缩放）
7. ✅ 筛选功能生效
8. ✅ 布局切换正常
9. ✅ 统计信息正确
10. ✅ 无控制台错误

---

## 📸 截图建议

测试时建议截图以下内容：

1. 知识图谱主页面（显示完整界面）
2. 图谱展示效果（有节点和连线）
3. 节点详情面板
4. 统计信息面板
5. 筛选选项面板
6. 不同布局效果对比

---

## 📝 测试报告模板

```
测试日期：____年__月__日
测试人员：________
应用版本：v0.16.0

测试结果：
[ ] 通过  [ ] 部分通过  [ ] 失败

详细结果：
- 页面加载：[ ] 通过 [ ] 失败
- 笔记创建：[ ] 通过 [ ] 失败
- 图谱构建：[ ] 通过 [ ] 失败
- 图谱展示：[ ] 通过 [ ] 失败
- 交互功能：[ ] 通过 [ ] 失败
- 筛选功能：[ ] 通过 [ ] 失败
- 布局切换：[ ] 通过 [ ] 失败
- 统计信息：[ ] 通过 [ ] 失败

发现的问题：
1. ______________________
2. ______________________
3. ______________________

建议改进：
1. ______________________
2. ______________________
3. ______________________
```

---

**测试愉快！如有任何问题，请记录详细的错误信息和复现步骤。** 🚀
