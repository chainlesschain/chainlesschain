# ChainlessChain ç§»åŠ¨ç«¯ UI å®Œå–„å®æ–½è®¡åˆ’

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2025-12-31
**é¡¹ç›®è·¯å¾„**: `mobile-app-uniapp/`
**å½“å‰å®Œæˆåº¦**: 15-20%
**ç›®æ ‡å®Œæˆåº¦**: 60-70% (3-4å‘¨å†…)

---

## ğŸ“‹ ç›®å½•

1. [æ‰§è¡Œæ¦‚è¦](#æ‰§è¡Œæ¦‚è¦)
2. [å½“å‰çŠ¶æ€åˆ†æ](#å½“å‰çŠ¶æ€åˆ†æ)
3. [ç›®æ ‡å’ŒèŒƒå›´](#ç›®æ ‡å’ŒèŒƒå›´)
4. [å®æ–½é˜¶æ®µ](#å®æ–½é˜¶æ®µ)
5. [è¯¦ç»†ä»»åŠ¡æ¸…å•](#è¯¦ç»†ä»»åŠ¡æ¸…å•)
6. [æŠ€æœ¯å®ç°æ–¹æ¡ˆ](#æŠ€æœ¯å®ç°æ–¹æ¡ˆ)
7. [æ—¶é—´ä¼°ç®—å’Œé‡Œç¨‹ç¢‘](#æ—¶é—´ä¼°ç®—å’Œé‡Œç¨‹ç¢‘)
8. [èµ„æºéœ€æ±‚](#èµ„æºéœ€æ±‚)
9. [é£é™©è¯„ä¼°](#é£é™©è¯„ä¼°)
10. [éªŒæ”¶æ ‡å‡†](#éªŒæ”¶æ ‡å‡†)
11. [åç»­ä¼˜åŒ–å»ºè®®](#åç»­ä¼˜åŒ–å»ºè®®)

---

## ğŸ¯ æ‰§è¡Œæ¦‚è¦

### èƒŒæ™¯

ChainlessChain ç§»åŠ¨ç«¯ï¼ˆuni-appï¼‰æ˜¯ä¸€ä¸ªåŸºäº Vue 3 + uni-app çš„è·¨å¹³å°åº”ç”¨ï¼Œç›®æ ‡æ”¯æŒ iOSã€Android å’Œ H5ã€‚é¡¹ç›®å·²å®ŒæˆåŸºç¡€æ¶æ„å’Œéƒ¨åˆ†æ ¸å¿ƒåŠŸèƒ½ï¼Œä½†å¤§é‡ UI åŠŸèƒ½å°šæœªå®ç°æˆ–ä»…ä¸º placeholderã€‚

### æ ¸å¿ƒé—®é¢˜

1. **ç¤¾äº¤åŠŸèƒ½**ï¼šæ•°æ®å±‚å®Œæˆ 100%ï¼Œä½† UI é›†æˆä¸º 0%
2. **AI åŠŸèƒ½**ï¼šå½“å‰ä¸ºæ¨¡æ‹Ÿå®ç°ï¼ˆ30%ï¼‰ï¼Œéœ€æ¥å…¥çœŸå® LLM
3. **é¡¹ç›®ç®¡ç†**ï¼šä»…æœ‰ placeholderï¼ˆ5%ï¼‰
4. **P2P ç½‘ç»œ**ï¼šå®Œå…¨æœªå®ç°ï¼ˆ0%ï¼‰

### å®æ–½ç›®æ ‡

- **ä¸»è¦ç›®æ ‡**ï¼šåœ¨ 3-4 å‘¨å†…å°†ç§»åŠ¨ç«¯å®Œæˆåº¦ä» **15-20%** æå‡è‡³ **60-70%**
- **æ ¸å¿ƒç­–ç•¥**ï¼šä¼˜å…ˆå®Œæˆæ•°æ®å±‚å·²æœ‰çš„åŠŸèƒ½ UI é›†æˆï¼ˆé«˜æŠ•å…¥äº§å‡ºæ¯”ï¼‰
- **äº¤ä»˜æˆæœ**ï¼šå¯ç”¨çš„ç¤¾äº¤ã€çŸ¥è¯†åº“ã€AI å¯¹è¯åŠŸèƒ½ï¼Œæä¾›è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒ

---

## ğŸ“Š å½“å‰çŠ¶æ€åˆ†æ

### æ•´ä½“å®Œæˆåº¦çŸ©é˜µ

| æ¨¡å— | æ•°æ®å±‚ | ä¸šåŠ¡é€»è¾‘ | UI å±‚ | æ€»ä½“ | ä¼˜å…ˆçº§ |
|-----|--------|---------|-------|------|--------|
| **çŸ¥è¯†åº“** | 100% | 95% | 90% | **95%** | P1 |
| **DID èº«ä»½** | 100% | 100% | 100% | **100%** | âœ… |
| **è®¤è¯ç³»ç»Ÿ** | 100% | 90% | 85% | **90%** | P2 |
| **AI å¯¹è¯** | 80% | 40% | 60% | **60%** | P1 |
| **RAG æ£€ç´¢** | 30% | 20% | 10% | **20%** | P2 |
| **å¥½å‹ç®¡ç†** | 100% | 70% | 0% | **30%** | **P0** |
| **åŠ¨æ€å‘å¸ƒ** | 100% | 70% | 0% | **30%** | **P0** |
| **ç§å¯†æ¶ˆæ¯** | 90% | 60% | 20% | **40%** | **P0** |
| **äº¤æ˜“ç³»ç»Ÿ** | 90% | 10% | 5% | **10%** | P3 |
| **é¡¹ç›®ç®¡ç†** | 20% | 5% | 5% | **5%** | P3 |
| **å¤‡ä»½åŒæ­¥** | 100% | 80% | 70% | **80%** | P2 |
| **P2P ç½‘ç»œ** | 0% | 0% | 0% | **0%** | P3 |

### å…³é”®æ´å¯Ÿ

#### âœ… ä¼˜åŠ¿
1. **DID èº«ä»½ç³»ç»Ÿ**ï¼šå®Œæ•´å®ç° W3C æ ‡å‡†ï¼Œ100% å®Œæˆ
2. **çŸ¥è¯†åº“åŠŸèƒ½**ï¼š95% å®Œæˆï¼Œä»…ç¼ºæ–‡ä»¶å¤¹ UI
3. **æ•°æ®åº“æ¶æ„**ï¼šå®Œå–„çš„ 19 å¼ è¡¨è®¾è®¡ï¼Œæ”¯æŒåŒæ¨¡å¼ï¼ˆH5/Appï¼‰
4. **åŠ å¯†å®‰å…¨**ï¼štweetnacl + crypto-js å®ç°ç«¯åˆ°ç«¯åŠ å¯†
5. **ç¤¾äº¤æ•°æ®å±‚**ï¼šå¥½å‹ã€åŠ¨æ€ã€æ¶ˆæ¯æ•°æ®å±‚ 100% å®Œæˆ

#### âš ï¸ æŒ‘æˆ˜
1. **UI ä¸æ•°æ®å±‚è„±èŠ‚**ï¼šç¤¾äº¤åŠŸèƒ½æ•°æ®å±‚å®Œæˆä½† UI ä¸º 0%
2. **AI åŠŸèƒ½æ¨¡æ‹Ÿ**ï¼šå½“å‰ä¸º mock å®ç°ï¼Œéœ€æ¥å…¥çœŸå® LLM
3. **å¤§é‡ placeholder**ï¼šé¡¹ç›®ç®¡ç†ã€äº¤æ˜“ç³»ç»Ÿä»…æœ‰ç©ºå£³
4. **P2P æœªå®ç°**ï¼šç¼ºå°‘ libp2p ç½‘ç»œå±‚
5. **æ— çŠ¶æ€ç®¡ç†**ï¼šPinia å·²é›†æˆä½†æœªä½¿ç”¨

### æ–‡ä»¶ç»Ÿè®¡

- **é¡µé¢æ–‡ä»¶**: 44 ä¸ª .vue æ–‡ä»¶
- **æœåŠ¡å±‚**: 15 ä¸ª .js æœåŠ¡æ–‡ä»¶
- **è·¯ç”±é…ç½®**: 36 ä¸ªé¡µé¢è·¯ç”±
- **æ•°æ®åº“è¡¨**: 19 å¼ è¡¨ï¼ˆdatabase.js 108KBï¼‰

---

## ğŸ¯ ç›®æ ‡å’ŒèŒƒå›´

### æ€»ä½“ç›®æ ‡

**åœ¨ 3-4 å‘¨å†…å°†ç§»åŠ¨ç«¯å®Œæˆåº¦ä» 15-20% æå‡è‡³ 60-70%**

### é˜¶æ®µç›®æ ‡

#### Phase 1: ç¤¾äº¤åŠŸèƒ½ UI é›†æˆ (Week 1)
**ç›®æ ‡**: ç¤¾äº¤åŠŸèƒ½ä» 30% â†’ 80%
- å®Œæˆå¥½å‹åˆ—è¡¨ UI
- å®ŒæˆåŠ¨æ€å‘å¸ƒ UI
- å®Œæˆç§å¯†æ¶ˆæ¯ UI

#### Phase 2: çŸ¥è¯†åº“å’Œ AI ä¼˜åŒ– (Week 1-2)
**ç›®æ ‡**: çŸ¥è¯†åº“ 95% â†’ 100%, AI 60% â†’ 90%
- è¡¥å……çŸ¥è¯†åº“æ–‡ä»¶å¤¹ UI
- æ¥å…¥çœŸå® LLM API
- å®ç°çœŸå® RAG æ£€ç´¢

#### Phase 3: æ¶ˆæ¯ä¸­å¿ƒå®Œå–„ (Week 2)
**ç›®æ ‡**: æ¶ˆæ¯ä¸­å¿ƒ 40% â†’ 85%
- ç³»ç»Ÿé€šçŸ¥ UI
- æ¶ˆæ¯åˆ†ç±»ç­›é€‰
- æœªè¯»æ¶ˆæ¯æç¤º

#### Phase 4: è®¤è¯ä½“éªŒä¼˜åŒ– (Week 3)
**ç›®æ ‡**: è®¤è¯ç³»ç»Ÿ 90% â†’ 95%
- ç”Ÿç‰©è¯†åˆ«é›†æˆ
- PIN ç ä½“éªŒä¼˜åŒ–
- å®‰å…¨è®¾ç½®å®Œå–„

#### Phase 5: æ€§èƒ½å’Œ UI æ‰“ç£¨ (Week 3-4)
**ç›®æ ‡**: æ•´ä½“ç”¨æˆ·ä½“éªŒæå‡
- ä¸»é¢˜ç³»ç»Ÿä¼˜åŒ–
- åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ
- æ€§èƒ½ä¼˜åŒ–
- é”™è¯¯å¤„ç†å®Œå–„

### èŒƒå›´è¾¹ç•Œ

#### åŒ…å«åœ¨æœ¬è®¡åˆ’ä¸­ âœ…
- ç¤¾äº¤åŠŸèƒ½ UI é›†æˆï¼ˆå¥½å‹ã€åŠ¨æ€ã€æ¶ˆæ¯ï¼‰
- çŸ¥è¯†åº“ UI è¡¥å……ï¼ˆæ–‡ä»¶å¤¹ç®¡ç†ï¼‰
- AI åŠŸèƒ½çœŸå®åŒ–ï¼ˆæ¥å…¥çœŸå® LLMï¼‰
- æ¶ˆæ¯ä¸­å¿ƒå®Œå–„
- è®¤è¯ä½“éªŒä¼˜åŒ–
- UI ä¸»é¢˜å’Œæ€§èƒ½ä¼˜åŒ–

#### ä¸åŒ…å«åœ¨æœ¬è®¡åˆ’ä¸­ âŒ
- P2P ç½‘ç»œå®ç°ï¼ˆéœ€è¦å•ç‹¬é¡¹ç›®ï¼‰
- é¡¹ç›®ç®¡ç†æ¨¡å—ï¼ˆä»… 5%ï¼Œä¼˜å…ˆçº§ä½ï¼‰
- äº¤æ˜“ç³»ç»Ÿä¸šåŠ¡é€»è¾‘ï¼ˆ10%ï¼Œä¼˜å…ˆçº§ä½ï¼‰
- æ™ºèƒ½åˆçº¦é›†æˆï¼ˆ0%ï¼Œéœ€è¦åŒºå—é“¾ä¸“é¡¹ï¼‰
- IPFS å­˜å‚¨ï¼ˆ0%ï¼Œéœ€è¦åˆ†å¸ƒå¼å­˜å‚¨ä¸“é¡¹ï¼‰
- Git ä»“åº“åŒæ­¥ï¼ˆ0%ï¼Œéœ€è¦å•ç‹¬å®ç°ï¼‰

---

## ğŸš€ å®æ–½é˜¶æ®µ

### Phase 1: ç¤¾äº¤åŠŸèƒ½ UI é›†æˆ (Week 1, 5-6 å¤©)

**ä¼˜å…ˆçº§**: P0 - æœ€é«˜ä¼˜å…ˆçº§
**æŠ•å…¥äº§å‡ºæ¯”**: â­â­â­â­â­ (æ•°æ®å±‚å·²å®Œæˆ 100%)
**é¢„è®¡å·¥æ—¶**: 40-50 å°æ—¶
**å…³é”®æˆæœ**: ç¤¾äº¤åŠŸèƒ½ä» 30% â†’ 80%

#### ä»»åŠ¡ 1.1: å¥½å‹åˆ—è¡¨ UI é›†æˆ (8-10 å°æ—¶)

**å½“å‰çŠ¶æ€**: æ•°æ®å±‚ 100%, UI 0%

**é¡µé¢æ¸…å•**:
- `pages/social/friends/friends.vue` - å¥½å‹åˆ—è¡¨ä¸»é¡µ
- `pages/social/friends/list.vue` - å¥½å‹ç®¡ç†åˆ—è¡¨
- `pages/social/friends/add.vue` - æ·»åŠ å¥½å‹
- `pages/social/friends/profile.vue` - å¥½å‹èµ„æ–™

**æŠ€æœ¯æ–¹æ¡ˆ**:
```javascript
// 1. åœ¨ friends.vue ä¸­é›†æˆ friends.js æœåŠ¡
import friendsService from '@/services/friends.js';

export default {
  data() {
    return {
      friends: [],
      requests: [],
      loading: false
    };
  },
  async onLoad() {
    await this.loadFriends();
    await this.loadRequests();
  },
  methods: {
    async loadFriends() {
      this.loading = true;
      this.friends = await friendsService.getFriendsList();
      this.loading = false;
    },
    async loadRequests() {
      this.requests = await friendsService.getFriendRequests();
    },
    async handleAcceptRequest(requestId) {
      await friendsService.acceptFriendRequest(requestId);
      await this.loadFriends();
      await this.loadRequests();
    }
  }
};
```

**UI è®¾è®¡è¦ç‚¹**:
- å¥½å‹åˆ—è¡¨ï¼šå¤´åƒ + æ˜µç§° + DIDï¼ˆæˆªæ–­ï¼‰+ åœ¨çº¿çŠ¶æ€
- å¥½å‹è¯·æ±‚ï¼šæ˜¾ç¤ºå¾…å¤„ç†æ•°é‡çº¢ç‚¹
- æœç´¢æ¡†ï¼šæ”¯æŒæŒ‰ DID æˆ–æ˜µç§°æœç´¢
- åˆ†ç»„æ ‡ç­¾ï¼šæ”¯æŒå¥½å‹åˆ†ç»„æ˜¾ç¤º

**æ•°æ®æº**: `services/friends.js` å·²å®Œæˆçš„æ–¹æ³•
- `getFriendsList()` - è·å–å¥½å‹åˆ—è¡¨
- `getFriendRequests()` - è·å–å¥½å‹è¯·æ±‚
- `acceptFriendRequest(requestId)` - æ¥å—å¥½å‹è¯·æ±‚
- `rejectFriendRequest(requestId)` - æ‹’ç»å¥½å‹è¯·æ±‚
- `removeFriend(friendDid)` - åˆ é™¤å¥½å‹

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ˜¾ç¤ºå½“å‰ç”¨æˆ·çš„æ‰€æœ‰å¥½å‹
- âœ… æ˜¾ç¤ºå¾…å¤„ç†çš„å¥½å‹è¯·æ±‚ï¼ˆå¸¦çº¢ç‚¹æç¤ºï¼‰
- âœ… æ”¯æŒæ¥å—/æ‹’ç»å¥½å‹è¯·æ±‚
- âœ… æ”¯æŒåˆ é™¤å¥½å‹
- âœ… ç‚¹å‡»å¥½å‹å¤´åƒè·³è½¬åˆ°å¥½å‹èµ„æ–™é¡µ

---

#### ä»»åŠ¡ 1.2: æ·»åŠ å¥½å‹åŠŸèƒ½ (6-8 å°æ—¶)

**å½“å‰çŠ¶æ€**: æ•°æ®å±‚ 100%, UI æœªå®ç°

**é¡µé¢**: `pages/social/friends/add.vue`

**æŠ€æœ¯æ–¹æ¡ˆ**:
```javascript
// 1. DID äºŒç»´ç æ‰«æ
import { scanCode } from '@dcloudio/uni-app';
import friendsService from '@/services/friends.js';
import didService from '@/services/did.js';

export default {
  data() {
    return {
      searchDid: '',
      scanResult: null,
      userInfo: null
    };
  },
  methods: {
    // æ‰«æ DID äºŒç»´ç 
    async scanDIDQRCode() {
      try {
        const res = await uni.scanCode({
          scanType: ['qrCode']
        });
        this.searchDid = res.result; // DID å­—ç¬¦ä¸²
        await this.searchUser();
      } catch (e) {
        uni.showToast({ title: 'æ‰«æå¤±è´¥', icon: 'none' });
      }
    },

    // æœç´¢ç”¨æˆ·
    async searchUser() {
      if (!this.searchDid) {
        return uni.showToast({ title: 'è¯·è¾“å…¥ DID', icon: 'none' });
      }

      // éªŒè¯ DID æ ¼å¼
      if (!this.searchDid.startsWith('did:key:')) {
        return uni.showToast({ title: 'DID æ ¼å¼é”™è¯¯', icon: 'none' });
      }

      // æ¨¡æ‹ŸæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼ˆå®é™…éœ€è¦ P2P ç½‘ç»œæŸ¥è¯¢ï¼‰
      this.userInfo = {
        did: this.searchDid,
        nickname: 'ç”¨æˆ·' + this.searchDid.slice(-6),
        avatar: '/static/default-avatar.png'
      };
    },

    // å‘é€å¥½å‹è¯·æ±‚
    async sendFriendRequest() {
      if (!this.userInfo) {
        return uni.showToast({ title: 'è¯·å…ˆæœç´¢ç”¨æˆ·', icon: 'none' });
      }

      await friendsService.sendFriendRequest(this.userInfo.did, 'ä½ å¥½ï¼Œæˆ‘æƒ³åŠ ä½ ä¸ºå¥½å‹');

      uni.showToast({ title: 'å¥½å‹è¯·æ±‚å·²å‘é€', icon: 'success' });

      setTimeout(() => {
        uni.navigateBack();
      }, 1500);
    }
  }
};
```

**UI ç»„ä»¶**:
1. **æœç´¢æ¡†**: è¾“å…¥ DID åœ°å€
2. **æ‰«ç æŒ‰é’®**: è°ƒç”¨ `uni.scanCode()`
3. **ç”¨æˆ·å¡ç‰‡**: æ˜¾ç¤ºæœç´¢ç»“æœï¼ˆå¤´åƒã€æ˜µç§°ã€DIDï¼‰
4. **æ·»åŠ æŒ‰é’®**: å‘é€å¥½å‹è¯·æ±‚

**æ•°æ®æº**:
- `services/friends.js`:
  - `sendFriendRequest(friendDid, message)` - å‘é€å¥½å‹è¯·æ±‚
- `services/did.js`:
  - `getMyDID()` - è·å–å½“å‰ç”¨æˆ· DIDï¼ˆç”ŸæˆäºŒç»´ç ï¼‰

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ”¯æŒæ‰‹åŠ¨è¾“å…¥ DID æœç´¢
- âœ… æ”¯æŒæ‰«æ DID äºŒç»´ç 
- âœ… æ˜¾ç¤ºç”¨æˆ·åŸºæœ¬ä¿¡æ¯
- âœ… å‘é€å¥½å‹è¯·æ±‚æˆåŠŸ
- âœ… æ˜¾ç¤º"å·²å‘é€"çŠ¶æ€

---

#### ä»»åŠ¡ 1.3: åŠ¨æ€å‘å¸ƒ UI é›†æˆ (10-12 å°æ—¶)

**å½“å‰çŠ¶æ€**: æ•°æ®å±‚ 100%, UI 0%

**é¡µé¢æ¸…å•**:
- `pages/social/posts/posts.vue` - åŠ¨æ€å¹¿åœº
- `pages/social/timeline/create.vue` - åˆ›å»ºåŠ¨æ€

**æŠ€æœ¯æ–¹æ¡ˆ**:
```javascript
// posts.vue - åŠ¨æ€å¹¿åœº
import postsService from '@/services/posts.js';

export default {
  data() {
    return {
      posts: [],
      loading: false,
      page: 1,
      pageSize: 20,
      hasMore: true
    };
  },
  async onLoad() {
    await this.loadPosts();
  },
  async onReachBottom() {
    if (this.hasMore && !this.loading) {
      this.page++;
      await this.loadPosts();
    }
  },
  methods: {
    async loadPosts() {
      this.loading = true;
      const newPosts = await postsService.getTimeline(this.page, this.pageSize);

      if (newPosts.length < this.pageSize) {
        this.hasMore = false;
      }

      this.posts.push(...newPosts);
      this.loading = false;
    },

    async handleLike(postId) {
      await postsService.likePost(postId);
      // æ›´æ–°æœ¬åœ° UI
      const post = this.posts.find(p => p.id === postId);
      if (post) {
        post.liked = true;
        post.likeCount++;
      }
    },

    async handleUnlike(postId) {
      await postsService.unlikePost(postId);
      const post = this.posts.find(p => p.id === postId);
      if (post) {
        post.liked = false;
        post.likeCount--;
      }
    },

    navigateToComments(postId) {
      uni.navigateTo({
        url: `/pages/social/posts/detail?id=${postId}`
      });
    }
  }
};
```

**åŠ¨æ€å¡ç‰‡ç»„ä»¶è®¾è®¡**:
```vue
<template>
  <view class="post-card">
    <!-- å¤´éƒ¨ï¼šç”¨æˆ·ä¿¡æ¯ -->
    <view class="post-header">
      <image :src="post.authorAvatar" class="avatar"></image>
      <view class="user-info">
        <text class="nickname">{{ post.authorName }}</text>
        <text class="time">{{ formatTime(post.createdAt) }}</text>
      </view>
    </view>

    <!-- å†…å®¹ -->
    <view class="post-content">
      <text>{{ post.content }}</text>
    </view>

    <!-- å›¾ç‰‡ï¼ˆå¦‚æœ‰ï¼‰ -->
    <view v-if="post.images && post.images.length" class="post-images">
      <image
        v-for="(img, index) in post.images"
        :key="index"
        :src="img"
        mode="aspectFill"
        @click="previewImage(index)"
      ></image>
    </view>

    <!-- åº•éƒ¨äº¤äº’ -->
    <view class="post-actions">
      <view class="action-btn" @click="handleLike">
        <text :class="['icon', post.liked ? 'liked' : '']">â¤ï¸</text>
        <text>{{ post.likeCount }}</text>
      </view>
      <view class="action-btn" @click="navigateToComments">
        <text class="icon">ğŸ’¬</text>
        <text>{{ post.commentCount }}</text>
      </view>
      <view class="action-btn">
        <text class="icon">ğŸ”—</text>
        <text>åˆ†äº«</text>
      </view>
    </view>
  </view>
</template>
```

**åˆ›å»ºåŠ¨æ€åŠŸèƒ½** (`create.vue`):
```javascript
export default {
  data() {
    return {
      content: '',
      images: [],
      visibility: 'public', // public, friends, private
      maxImages: 9
    };
  },
  methods: {
    async chooseImages() {
      const res = await uni.chooseImage({
        count: this.maxImages - this.images.length,
        sizeType: ['compressed'],
        sourceType: ['album', 'camera']
      });
      this.images.push(...res.tempFilePaths);
    },

    removeImage(index) {
      this.images.splice(index, 1);
    },

    async publish() {
      if (!this.content.trim() && this.images.length === 0) {
        return uni.showToast({ title: 'è¯·è¾“å…¥å†…å®¹æˆ–æ·»åŠ å›¾ç‰‡', icon: 'none' });
      }

      uni.showLoading({ title: 'å‘å¸ƒä¸­...' });

      try {
        await postsService.createPost({
          content: this.content,
          images: this.images,
          visibility: this.visibility
        });

        uni.hideLoading();
        uni.showToast({ title: 'å‘å¸ƒæˆåŠŸ', icon: 'success' });

        setTimeout(() => {
          uni.navigateBack();
        }, 1500);
      } catch (e) {
        uni.hideLoading();
        uni.showToast({ title: 'å‘å¸ƒå¤±è´¥', icon: 'none' });
      }
    }
  }
};
```

**æ•°æ®æº**: `services/posts.js`
- `getTimeline(page, pageSize)` - è·å–åŠ¨æ€åˆ—è¡¨
- `createPost({ content, images, visibility })` - åˆ›å»ºåŠ¨æ€
- `likePost(postId)` - ç‚¹èµ
- `unlikePost(postId)` - å–æ¶ˆç‚¹èµ
- `addComment(postId, content)` - æ·»åŠ è¯„è®º
- `getComments(postId)` - è·å–è¯„è®ºåˆ—è¡¨

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ˜¾ç¤ºåŠ¨æ€åˆ—è¡¨ï¼ˆç€‘å¸ƒæµ/å¡ç‰‡å¼ï¼‰
- âœ… æ”¯æŒä¸Šæ‹‰åŠ è½½æ›´å¤š
- âœ… æ”¯æŒç‚¹èµ/å–æ¶ˆç‚¹èµï¼ˆå¸¦åŠ¨ç”»ï¼‰
- âœ… æ˜¾ç¤ºè¯„è®ºæ•°é‡ï¼Œç‚¹å‡»è·³è½¬è¯„è®ºè¯¦æƒ…
- âœ… æ”¯æŒå‘å¸ƒæ–‡æœ¬åŠ¨æ€
- âœ… æ”¯æŒå‘å¸ƒå›¾ç‰‡åŠ¨æ€ï¼ˆæœ€å¤š 9 å¼ ï¼‰
- âœ… æ”¯æŒé€‰æ‹©å¯è§æ€§ï¼ˆå…¬å¼€/ä»…å¥½å‹/ç§å¯†ï¼‰
- âœ… å›¾ç‰‡é¢„è§ˆåŠŸèƒ½

---

#### ä»»åŠ¡ 1.4: ç§å¯†æ¶ˆæ¯ UI å®Œå–„ (12-15 å°æ—¶)

**å½“å‰çŠ¶æ€**: æ•°æ®å±‚ 90%, UI 20%, åŠ å¯†å±‚å®Œæˆ

**é¡µé¢æ¸…å•**:
- `pages/social/messages/messages.vue` - æ¶ˆæ¯åˆ—è¡¨
- `pages/social/friend-chat/friend-chat.vue` - èŠå¤©ç•Œé¢

**æŠ€æœ¯æ–¹æ¡ˆ**:
```javascript
// messages.vue - æ¶ˆæ¯åˆ—è¡¨
import messagingService from '@/services/messaging.js';
import didService from '@/services/did.js';

export default {
  data() {
    return {
      conversations: [],
      loading: false
    };
  },
  async onLoad() {
    await this.loadConversations();
  },
  async onShow() {
    // æ¯æ¬¡æ˜¾ç¤ºæ—¶åˆ·æ–°
    await this.loadConversations();
  },
  methods: {
    async loadConversations() {
      this.loading = true;
      this.conversations = await messagingService.getConversations();
      this.loading = false;
    },

    navigateToChat(friendDid) {
      uni.navigateTo({
        url: `/pages/social/friend-chat/friend-chat?friendDid=${friendDid}`
      });
    },

    formatLastMessage(msg) {
      if (msg.type === 'text') {
        return msg.content;
      } else if (msg.type === 'image') {
        return '[å›¾ç‰‡]';
      }
      return '';
    },

    formatTime(timestamp) {
      const now = Date.now();
      const diff = now - timestamp;

      if (diff < 60000) return 'åˆšåˆš';
      if (diff < 3600000) return `${Math.floor(diff / 60000)}åˆ†é’Ÿå‰`;
      if (diff < 86400000) return `${Math.floor(diff / 3600000)}å°æ—¶å‰`;
      return new Date(timestamp).toLocaleDateString();
    }
  }
};
```

**èŠå¤©ç•Œé¢å®ç°** (`friend-chat.vue`):
```javascript
import messagingService from '@/services/messaging.js';
import encryptionManager from '@/services/encryption-manager.js';

export default {
  data() {
    return {
      friendDid: '',
      messages: [],
      inputText: '',
      loading: false,
      page: 1,
      pageSize: 50
    };
  },
  async onLoad(options) {
    this.friendDid = options.friendDid;
    await this.loadMessages();
    this.scrollToBottom();
  },
  methods: {
    async loadMessages() {
      this.loading = true;
      const msgs = await messagingService.getMessages(this.friendDid, this.page, this.pageSize);

      // è§£å¯†æ¶ˆæ¯
      for (const msg of msgs) {
        if (msg.encrypted) {
          msg.content = await encryptionManager.decryptMessage(
            msg.content,
            this.friendDid
          );
        }
      }

      this.messages = msgs.reverse(); // æœ€æ–°çš„åœ¨ä¸‹é¢
      this.loading = false;
    },

    async sendMessage() {
      if (!this.inputText.trim()) {
        return;
      }

      const content = this.inputText.trim();
      this.inputText = '';

      // åŠ å¯†æ¶ˆæ¯
      const encryptedContent = await encryptionManager.encryptMessage(
        content,
        this.friendDid
      );

      // å‘é€
      const message = await messagingService.sendMessage({
        recipientDid: this.friendDid,
        content: encryptedContent,
        type: 'text',
        encrypted: true
      });

      // æ·»åŠ åˆ°æœ¬åœ°æ˜¾ç¤º
      this.messages.push({
        ...message,
        content: content, // æ˜¾ç¤ºè§£å¯†åçš„å†…å®¹
        isSelf: true
      });

      this.scrollToBottom();
    },

    async sendImage() {
      const res = await uni.chooseImage({
        count: 1,
        sizeType: ['compressed']
      });

      const imagePath = res.tempFilePaths[0];

      // TODO: ä¸Šä¼ å›¾ç‰‡åˆ°äº‘å­˜å‚¨ï¼Œè·å– URL
      // è¿™é‡Œç®€åŒ–å¤„ç†
      const message = await messagingService.sendMessage({
        recipientDid: this.friendDid,
        content: imagePath,
        type: 'image',
        encrypted: false
      });

      this.messages.push({
        ...message,
        isSelf: true
      });

      this.scrollToBottom();
    },

    scrollToBottom() {
      this.$nextTick(() => {
        uni.pageScrollTo({
          scrollTop: 999999,
          duration: 300
        });
      });
    },

    previewImage(url) {
      uni.previewImage({
        urls: [url],
        current: url
      });
    }
  }
};
```

**èŠå¤©æ°”æ³¡ç»„ä»¶è®¾è®¡**:
```vue
<template>
  <view class="chat-container">
    <!-- æ¶ˆæ¯åˆ—è¡¨ -->
    <scroll-view
      scroll-y
      class="message-list"
      :scroll-into-view="'msg-' + messages.length"
    >
      <view
        v-for="(msg, index) in messages"
        :key="index"
        :id="'msg-' + index"
        :class="['message-item', msg.isSelf ? 'self' : 'other']"
      >
        <!-- å¤´åƒ -->
        <image :src="msg.avatar" class="avatar"></image>

        <!-- æ¶ˆæ¯å†…å®¹ -->
        <view class="message-bubble">
          <!-- æ–‡æœ¬æ¶ˆæ¯ -->
          <text v-if="msg.type === 'text'" class="message-text">
            {{ msg.content }}
          </text>

          <!-- å›¾ç‰‡æ¶ˆæ¯ -->
          <image
            v-if="msg.type === 'image'"
            :src="msg.content"
            mode="aspectFill"
            class="message-image"
            @click="previewImage(msg.content)"
          ></image>

          <!-- æ—¶é—´æˆ³ -->
          <text class="message-time">{{ formatTime(msg.timestamp) }}</text>
        </view>
      </view>
    </scroll-view>

    <!-- è¾“å…¥æ¡† -->
    <view class="input-bar">
      <image
        src="/static/icons/image.png"
        class="tool-btn"
        @click="sendImage"
      ></image>

      <input
        v-model="inputText"
        class="message-input"
        placeholder="è¾“å…¥æ¶ˆæ¯..."
        confirm-type="send"
        @confirm="sendMessage"
      />

      <button
        class="send-btn"
        :disabled="!inputText.trim()"
        @click="sendMessage"
      >
        å‘é€
      </button>
    </view>
  </view>
</template>

<style lang="scss" scoped>
.chat-container {
  height: 100vh;
  display: flex;
  flex-direction: column;
  background: #f5f5f5;
}

.message-list {
  flex: 1;
  padding: 20rpx;
}

.message-item {
  display: flex;
  margin-bottom: 30rpx;

  &.self {
    flex-direction: row-reverse;

    .message-bubble {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
  }

  &.other {
    .message-bubble {
      background: white;
      color: #333;
    }
  }
}

.avatar {
  width: 80rpx;
  height: 80rpx;
  border-radius: 50%;
  margin: 0 20rpx;
}

.message-bubble {
  max-width: 500rpx;
  padding: 20rpx;
  border-radius: 16rpx;
  position: relative;
}

.message-text {
  font-size: 28rpx;
  line-height: 1.5;
  word-wrap: break-word;
}

.message-image {
  max-width: 400rpx;
  max-height: 400rpx;
  border-radius: 8rpx;
}

.message-time {
  font-size: 20rpx;
  opacity: 0.6;
  margin-top: 10rpx;
  display: block;
}

.input-bar {
  display: flex;
  align-items: center;
  padding: 20rpx;
  background: white;
  border-top: 1rpx solid #eee;
}

.tool-btn {
  width: 60rpx;
  height: 60rpx;
  margin-right: 20rpx;
}

.message-input {
  flex: 1;
  height: 70rpx;
  padding: 0 20rpx;
  background: #f5f5f5;
  border-radius: 35rpx;
  font-size: 28rpx;
}

.send-btn {
  margin-left: 20rpx;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 8rpx;
  padding: 0 30rpx;
  height: 70rpx;
  line-height: 70rpx;

  &:disabled {
    opacity: 0.5;
  }
}
</style>
```

**ç«¯åˆ°ç«¯åŠ å¯†å®ç°**:
```javascript
// services/encryption-manager.js å·²å®ç°
// ä½¿ç”¨ tweetnacl çš„ X25519 å¯†é’¥åå•† + NaCl SecretBox åŠ å¯†

export default {
  // åŠ å¯†æ¶ˆæ¯
  async encryptMessage(plaintext, recipientDid) {
    // 1. è·å–æ¥æ”¶è€…çš„å…¬é’¥
    const recipientPublicKey = await this.getPublicKey(recipientDid);

    // 2. ä½¿ç”¨è‡ªå·±çš„ç§é’¥å’Œå¯¹æ–¹çš„å…¬é’¥è¿›è¡Œ ECDH å¯†é’¥åå•†
    const sharedSecret = this.computeSharedSecret(recipientPublicKey);

    // 3. ä½¿ç”¨å…±äº«å¯†é’¥åŠ å¯†æ¶ˆæ¯
    const encrypted = nacl.secretbox(
      nacl.util.decodeUTF8(plaintext),
      this.generateNonce(),
      sharedSecret
    );

    return nacl.util.encodeBase64(encrypted);
  },

  // è§£å¯†æ¶ˆæ¯
  async decryptMessage(ciphertext, senderDid) {
    const senderPublicKey = await this.getPublicKey(senderDid);
    const sharedSecret = this.computeSharedSecret(senderPublicKey);

    const decrypted = nacl.secretbox.open(
      nacl.util.decodeBase64(ciphertext),
      this.extractNonce(ciphertext),
      sharedSecret
    );

    return nacl.util.encodeUTF8(decrypted);
  }
};
```

**æ•°æ®æº**: `services/messaging.js`
- `getConversations()` - è·å–ä¼šè¯åˆ—è¡¨
- `getMessages(friendDid, page, pageSize)` - è·å–æ¶ˆæ¯è®°å½•
- `sendMessage({ recipientDid, content, type })` - å‘é€æ¶ˆæ¯
- `markAsRead(friendDid)` - æ ‡è®°å·²è¯»

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ˜¾ç¤ºä¼šè¯åˆ—è¡¨ï¼ˆæœ€åä¸€æ¡æ¶ˆæ¯é¢„è§ˆï¼‰
- âœ… æ˜¾ç¤ºæœªè¯»æ¶ˆæ¯æ•°é‡ï¼ˆçº¢ç‚¹ï¼‰
- âœ… æ”¯æŒå‘é€æ–‡æœ¬æ¶ˆæ¯
- âœ… æ”¯æŒå‘é€å›¾ç‰‡æ¶ˆæ¯
- âœ… æ¶ˆæ¯ç«¯åˆ°ç«¯åŠ å¯†
- âœ… è‡ªå·±çš„æ¶ˆæ¯é å³ï¼Œå¯¹æ–¹çš„æ¶ˆæ¯é å·¦
- âœ… è‡ªåŠ¨æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯
- âœ… æ”¯æŒå›¾ç‰‡é¢„è§ˆ
- âœ… æ˜¾ç¤ºæ¶ˆæ¯æ—¶é—´æˆ³
- âœ… æ¶ˆæ¯å‘é€å¤±è´¥æç¤º

---

### Phase 2: çŸ¥è¯†åº“å’Œ AI ä¼˜åŒ– (Week 1-2, 4-5 å¤©)

**ä¼˜å…ˆçº§**: P1 - é«˜ä¼˜å…ˆçº§
**æŠ•å…¥äº§å‡ºæ¯”**: â­â­â­â­
**é¢„è®¡å·¥æ—¶**: 30-40 å°æ—¶
**å…³é”®æˆæœ**: çŸ¥è¯†åº“ 95% â†’ 100%, AI 60% â†’ 90%

#### ä»»åŠ¡ 2.1: çŸ¥è¯†åº“æ–‡ä»¶å¤¹ UI (8-10 å°æ—¶)

**å½“å‰çŠ¶æ€**: æ•°æ®å±‚ 100%, UI ç¼ºå¤±

**é¡µé¢**: `pages/knowledge/folders/folders.vue`

**æŠ€æœ¯æ–¹æ¡ˆ**:
```javascript
import { db } from '@/services/database.js';

export default {
  data() {
    return {
      folders: [],
      selectedFolder: null,
      knowledgeItems: [],
      showCreateDialog: false,
      newFolderName: ''
    };
  },
  async onLoad() {
    await this.loadFolders();
  },
  methods: {
    async loadFolders() {
      this.folders = await db.getFolders();
    },

    async loadKnowledgeItems(folderId) {
      this.selectedFolder = folderId;
      this.knowledgeItems = await db.getKnowledgeByFolder(folderId);
    },

    async createFolder() {
      if (!this.newFolderName.trim()) {
        return uni.showToast({ title: 'è¯·è¾“å…¥æ–‡ä»¶å¤¹åç§°', icon: 'none' });
      }

      await db.createFolder({
        name: this.newFolderName,
        color: this.getRandomColor(),
        icon: 'ğŸ“'
      });

      this.showCreateDialog = false;
      this.newFolderName = '';
      await this.loadFolders();
    },

    async moveToFolder(knowledgeId, folderId) {
      await db.moveKnowledgeToFolder(knowledgeId, folderId);
      await this.loadKnowledgeItems(this.selectedFolder);
    },

    getRandomColor() {
      const colors = ['#667eea', '#f093fb', '#4facfe', '#43e97b', '#fa709a'];
      return colors[Math.floor(Math.random() * colors.length)];
    }
  }
};
```

**UI è®¾è®¡**:
- å·¦ä¾§ï¼šæ–‡ä»¶å¤¹åˆ—è¡¨ï¼ˆå¸¦å›¾æ ‡å’Œé¢œè‰²ï¼‰
- å³ä¾§ï¼šæ–‡ä»¶å¤¹å†…çš„çŸ¥è¯†æ¡ç›®
- æ”¯æŒæ‹–æ‹½ç§»åŠ¨ï¼ˆé•¿æŒ‰é€‰æ‹©ï¼‰
- æ”¯æŒæ–°å»º/é‡å‘½å/åˆ é™¤æ–‡ä»¶å¤¹

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶å¤¹
- âœ… ç‚¹å‡»æ–‡ä»¶å¤¹æ˜¾ç¤ºå†…éƒ¨çŸ¥è¯†æ¡ç›®
- âœ… æ”¯æŒåˆ›å»ºæ–°æ–‡ä»¶å¤¹
- âœ… æ”¯æŒé‡å‘½åæ–‡ä»¶å¤¹
- âœ… æ”¯æŒåˆ é™¤æ–‡ä»¶å¤¹ï¼ˆæç¤ºæ˜¯å¦ç§»åŠ¨å†…å®¹ï¼‰
- âœ… æ”¯æŒç§»åŠ¨çŸ¥è¯†æ¡ç›®åˆ°æ–‡ä»¶å¤¹
- âœ… æ˜¾ç¤ºæ–‡ä»¶å¤¹å†…æ¡ç›®æ•°é‡

---

#### ä»»åŠ¡ 2.2: æ¥å…¥çœŸå® LLM API (8-10 å°æ—¶)

**å½“å‰çŠ¶æ€**: llm.js 100% å®Œæˆï¼Œai.js ä¸ºæ¨¡æ‹Ÿå®ç°

**ç›®æ ‡**: å°† `services/ai.js` ä¸­çš„æ¨¡æ‹Ÿå‡½æ•°æ›¿æ¢ä¸ºçœŸå® LLM è°ƒç”¨

**æŠ€æœ¯æ–¹æ¡ˆ**:
```javascript
// services/ai.js
import llmService from './llm.js';

export default {
  // ä¹‹å‰æ˜¯æ¨¡æ‹Ÿå®ç°ï¼Œç°åœ¨æ”¹ä¸ºçœŸå®è°ƒç”¨
  async generateSummary(text) {
    if (!text || text.length < 50) {
      return text;
    }

    const prompt = `è¯·ä¸ºä»¥ä¸‹å†…å®¹ç”Ÿæˆä¸€ä¸ªç®€æ´çš„æ‘˜è¦ï¼ˆä¸è¶…è¿‡100å­—ï¼‰ï¼š\n\n${text}`;

    const response = await llmService.chat({
      model: llmService.getCurrentModel(),
      messages: [
        { role: 'system', content: 'ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å†…å®¹æ‘˜è¦åŠ©æ‰‹ã€‚' },
        { role: 'user', content: prompt }
      ],
      temperature: 0.3,
      max_tokens: 200
    });

    return response.content.trim();
  },

  async suggestTags(text) {
    const prompt = `è¯·ä¸ºä»¥ä¸‹å†…å®¹æ¨è3-5ä¸ªæ ‡ç­¾ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰ï¼š\n\n${text}`;

    const response = await llmService.chat({
      model: llmService.getCurrentModel(),
      messages: [
        { role: 'system', content: 'ä½ æ˜¯ä¸€ä¸ªå†…å®¹æ ‡ç­¾æ¨èåŠ©æ‰‹ã€‚åªè¿”å›æ ‡ç­¾ï¼Œç”¨é€—å·åˆ†éš”ã€‚' },
        { role: 'user', content: prompt }
      ],
      temperature: 0.5,
      max_tokens: 50
    });

    return response.content.split(',').map(tag => tag.trim());
  },

  async expandContent(text) {
    const prompt = `è¯·æ‰©å±•ä»¥ä¸‹å†…å®¹ï¼Œä½¿å…¶æ›´åŠ è¯¦ç»†å’Œä¸°å¯Œï¼š\n\n${text}`;

    const response = await llmService.chat({
      model: llmService.getCurrentModel(),
      messages: [
        { role: 'system', content: 'ä½ æ˜¯ä¸€ä¸ªå†…å®¹æ‰©å±•åŠ©æ‰‹ï¼Œå¸®åŠ©ç”¨æˆ·ä¸°å¯Œå†…å®¹ç»†èŠ‚ã€‚' },
        { role: 'user', content: prompt }
      ],
      temperature: 0.7,
      max_tokens: 1000
    });

    return response.content.trim();
  },

  async polishContent(text) {
    const prompt = `è¯·æ¶¦è‰²ä»¥ä¸‹å†…å®¹ï¼Œä½¿å…¶æ›´åŠ æµç•…å’Œä¸“ä¸šï¼š\n\n${text}`;

    const response = await llmService.chat({
      model: llmService.getCurrentModel(),
      messages: [
        { role: 'system', content: 'ä½ æ˜¯ä¸€ä¸ªå†…å®¹æ¶¦è‰²åŠ©æ‰‹ã€‚' },
        { role: 'user', content: prompt }
      ],
      temperature: 0.5,
      max_tokens: 1500
    });

    return response.content.trim();
  }
};
```

**é…ç½®ç®¡ç†** (`llm.js` å·²å®ç°):
```javascript
// ç”¨æˆ·å¯ä»¥åœ¨è®¾ç½®ä¸­é…ç½® LLM æä¾›å•†
export default {
  providers: {
    openai: { name: 'OpenAI', baseURL: 'https://api.openai.com/v1' },
    deepseek: { name: 'DeepSeek', baseURL: 'https://api.deepseek.com/v1' },
    qwen: { name: 'é€šä¹‰åƒé—®', baseURL: 'https://dashscope.aliyuncs.com/compatible-mode/v1' },
    // ... 10+ æä¾›å•†
  },

  async chat({ model, messages, temperature, max_tokens }) {
    const config = this.getConfig();

    const response = await uni.request({
      url: `${config.baseURL}/chat/completions`,
      method: 'POST',
      header: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${config.apiKey}`
      },
      data: {
        model: model || config.defaultModel,
        messages: messages,
        temperature: temperature || 0.7,
        max_tokens: max_tokens || 1000
      }
    });

    return {
      content: response.data.choices[0].message.content,
      usage: response.data.usage
    };
  }
};
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ™ºèƒ½æ‘˜è¦è¿”å›çœŸå®ç»“æœ
- âœ… æ ‡ç­¾å»ºè®®è¿”å›çœŸå®æ ‡ç­¾
- âœ… å†…å®¹æ‰©å±•è¿”å›çœŸå®æ‰©å±•å†…å®¹
- âœ… å†…å®¹æ¶¦è‰²è¿”å›çœŸå®æ¶¦è‰²ç»“æœ
- âœ… æ”¯æŒç”¨æˆ·é…ç½® LLM æä¾›å•†å’Œ API Key
- âœ… æ˜¾ç¤º Token ä½¿ç”¨æƒ…å†µ

---

#### ä»»åŠ¡ 2.3: å®ç°çœŸå® RAG æ£€ç´¢ (12-15 å°æ—¶)

**å½“å‰çŠ¶æ€**: knowledge-rag.js ä¸ºæ¨¡æ‹Ÿå®ç°ï¼ˆ20%ï¼‰

**ç›®æ ‡**: é›†æˆ transformers.js å®ç°çœŸå®çš„å‘é‡åŒ–å’Œè¯­ä¹‰æœç´¢

**æŠ€æœ¯æŒ‘æˆ˜**: uni-app ç¯å¢ƒé™åˆ¶ï¼Œtransformers.js å¯èƒ½æ— æ³•ç›´æ¥è¿è¡Œ

**æ–¹æ¡ˆé€‰æ‹©**:

**æ–¹æ¡ˆ A**: äº‘ç«¯ RAG æœåŠ¡ï¼ˆæ¨èï¼‰
```javascript
// è°ƒç”¨åç«¯ ai-service çš„ RAG API
export default {
  async semanticSearch(query, topK = 5) {
    const response = await uni.request({
      url: 'http://localhost:8001/api/rag/search',
      method: 'POST',
      data: {
        query: query,
        top_k: topK,
        filters: {}
      }
    });

    return response.data.results;
  }
};
```

**æ–¹æ¡ˆ B**: æœ¬åœ° Embeddingï¼ˆä»… H5 æ”¯æŒï¼‰
```javascript
// ä½¿ç”¨ transformers.jsï¼ˆä»…æµè§ˆå™¨ç¯å¢ƒï¼‰
import { pipeline } from '@xenova/transformers';

let embedder = null;

async function initEmbedder() {
  if (!embedder) {
    embedder = await pipeline('feature-extraction', 'Xenova/all-MiniLM-L6-v2');
  }
  return embedder;
}

export default {
  async generateEmbedding(text) {
    // #ifdef H5
    const model = await initEmbedder();
    const output = await model(text, { pooling: 'mean', normalize: true });
    return Array.from(output.data);
    // #endif

    // #ifdef APP-PLUS
    // App ç¯å¢ƒè°ƒç”¨äº‘ç«¯ API
    return await this.generateEmbeddingRemote(text);
    // #endif
  },

  async semanticSearch(query, topK = 5) {
    const queryEmbedding = await this.generateEmbedding(query);

    // ä»æ•°æ®åº“è·å–æ‰€æœ‰çŸ¥è¯†æ¡ç›®çš„ embedding
    const allItems = await db.getAllKnowledge();

    // è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦
    const results = allItems.map(item => ({
      ...item,
      similarity: this.cosineSimilarity(queryEmbedding, item.embedding)
    }));

    // æ’åºå¹¶è¿”å› topK
    return results
      .sort((a, b) => b.similarity - a.similarity)
      .slice(0, topK);
  },

  cosineSimilarity(vecA, vecB) {
    const dotProduct = vecA.reduce((sum, a, i) => sum + a * vecB[i], 0);
    const magnitudeA = Math.sqrt(vecA.reduce((sum, a) => sum + a * a, 0));
    const magnitudeB = Math.sqrt(vecB.reduce((sum, b) => sum + b * b, 0));
    return dotProduct / (magnitudeA * magnitudeB);
  }
};
```

**æ•°æ®åº“æ‰©å±•**:
```javascript
// åœ¨ database.js ä¸­æ·»åŠ  embedding å­—æ®µ
await db.executeSql(`
  ALTER TABLE knowledge_items
  ADD COLUMN embedding TEXT
`);

// ä¿å­˜çŸ¥è¯†æ—¶åŒæ—¶ä¿å­˜ embedding
async saveKnowledge(data) {
  const embedding = await ragService.generateEmbedding(data.content);

  await db.executeSql(`
    INSERT INTO knowledge_items (title, content, embedding, created_at)
    VALUES (?, ?, ?, ?)
  `, [data.title, data.content, JSON.stringify(embedding), Date.now()]);
}
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… è¾“å…¥æŸ¥è¯¢å…³é”®è¯ï¼Œè¿”å›è¯­ä¹‰ç›¸å…³çš„çŸ¥è¯†æ¡ç›®
- âœ… ç›¸ä¼¼åº¦æ’åºæ­£ç¡®
- âœ… æ”¯æŒä¸­æ–‡è¯­ä¹‰æœç´¢
- âœ… å“åº”æ—¶é—´ < 2 ç§’
- âœ… å‡†ç¡®ç‡ > 70%ï¼ˆæ‰‹åŠ¨æµ‹è¯•ï¼‰

---

### Phase 3: æ¶ˆæ¯ä¸­å¿ƒå®Œå–„ (Week 2, 2-3 å¤©)

**ä¼˜å…ˆçº§**: P2
**é¢„è®¡å·¥æ—¶**: 15-20 å°æ—¶
**å…³é”®æˆæœ**: æ¶ˆæ¯ä¸­å¿ƒ 40% â†’ 85%

#### ä»»åŠ¡ 3.1: ç³»ç»Ÿé€šçŸ¥ UI (8-10 å°æ—¶)

**é¡µé¢**: `pages/messages/index.vue`

**é€šçŸ¥ç±»å‹**:
1. å¥½å‹è¯·æ±‚é€šçŸ¥
2. è¯„è®ºé€šçŸ¥
3. ç‚¹èµé€šçŸ¥
4. ç³»ç»Ÿå…¬å‘Š
5. å®‰å…¨æé†’

**æŠ€æœ¯æ–¹æ¡ˆ**:
```javascript
export default {
  data() {
    return {
      notifications: [],
      filter: 'all', // all, friend, comment, like, system
      unreadCount: 0
    };
  },
  async onLoad() {
    await this.loadNotifications();
  },
  methods: {
    async loadNotifications() {
      const allNotifications = await db.getNotifications();

      // æŒ‰ç±»å‹åˆ†ç±»
      this.notifications = allNotifications.map(n => ({
        ...n,
        icon: this.getNotificationIcon(n.type),
        color: this.getNotificationColor(n.type)
      }));

      this.unreadCount = this.notifications.filter(n => !n.read).length;
    },

    getNotificationIcon(type) {
      const icons = {
        friend_request: 'ğŸ‘‹',
        comment: 'ğŸ’¬',
        like: 'â¤ï¸',
        system: 'ğŸ””',
        security: 'ğŸ”’'
      };
      return icons[type] || 'ğŸ“¢';
    },

    async markAsRead(notificationId) {
      await db.markNotificationAsRead(notificationId);
      await this.loadNotifications();
    },

    async handleNotificationClick(notification) {
      // æ ‡è®°ä¸ºå·²è¯»
      await this.markAsRead(notification.id);

      // è·³è½¬åˆ°ç›¸åº”é¡µé¢
      switch (notification.type) {
        case 'friend_request':
          uni.navigateTo({ url: '/pages/social/friends/list' });
          break;
        case 'comment':
        case 'like':
          uni.navigateTo({ url: `/pages/social/posts/detail?id=${notification.relatedId}` });
          break;
        case 'system':
          // æ˜¾ç¤ºè¯¦æƒ…å¼¹çª—
          this.showNotificationDetail(notification);
          break;
      }
    }
  }
};
```

**UI è®¾è®¡**:
```vue
<template>
  <view class="notifications-page">
    <!-- é¡¶éƒ¨ç­›é€‰ -->
    <view class="filter-tabs">
      <view
        v-for="tab in filterTabs"
        :key="tab.value"
        :class="['tab', filter === tab.value ? 'active' : '']"
        @click="filter = tab.value"
      >
        {{ tab.label }}
        <view v-if="tab.count > 0" class="badge">{{ tab.count }}</view>
      </view>
    </view>

    <!-- é€šçŸ¥åˆ—è¡¨ -->
    <scroll-view scroll-y class="notification-list">
      <view
        v-for="item in filteredNotifications"
        :key="item.id"
        :class="['notification-item', !item.read ? 'unread' : '']"
        @click="handleNotificationClick(item)"
      >
        <view class="icon-box" :style="{ background: item.color }">
          <text class="icon">{{ item.icon }}</text>
        </view>

        <view class="content">
          <text class="title">{{ item.title }}</text>
          <text class="message">{{ item.message }}</text>
          <text class="time">{{ formatTime(item.timestamp) }}</text>
        </view>

        <view v-if="!item.read" class="unread-dot"></view>
      </view>
    </scroll-view>
  </view>
</template>
```

**æ•°æ®åº“æ‰©å±•**:
```javascript
// åœ¨ database.js ä¸­æ·»åŠ é€šçŸ¥è¡¨
await db.executeSql(`
  CREATE TABLE IF NOT EXISTS notifications (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    type TEXT NOT NULL,
    title TEXT NOT NULL,
    message TEXT NOT NULL,
    related_id TEXT,
    read INTEGER DEFAULT 0,
    timestamp INTEGER NOT NULL
  )
`);
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ˜¾ç¤ºæ‰€æœ‰ç±»å‹çš„é€šçŸ¥
- âœ… æ”¯æŒæŒ‰ç±»å‹ç­›é€‰
- âœ… æ˜¾ç¤ºæœªè¯»æ•°é‡çº¢ç‚¹
- âœ… ç‚¹å‡»é€šçŸ¥è·³è½¬åˆ°ç›¸åº”é¡µé¢
- âœ… æ”¯æŒæ ‡è®°ä¸ºå·²è¯»
- âœ… æ”¯æŒä¸€é”®å…¨éƒ¨å·²è¯»
- âœ… æ˜¾ç¤ºæ—¶é—´ï¼ˆåˆšåˆš/å‡ åˆ†é’Ÿå‰/å‡ å°æ—¶å‰ï¼‰

---

#### ä»»åŠ¡ 3.2: æ¶ˆæ¯åˆ†ç±»å’Œç­›é€‰ (4-5 å°æ—¶)

**åŠŸèƒ½**:
- æœªè¯»æ¶ˆæ¯ä¼˜å…ˆæ˜¾ç¤º
- æŒ‰å¥½å‹/ç¾¤ç»„åˆ†ç±»
- æœç´¢æ¶ˆæ¯å†…å®¹
- æ¶ˆæ¯ç½®é¡¶

**æŠ€æœ¯æ–¹æ¡ˆ**:
```javascript
export default {
  data() {
    return {
      searchKeyword: '',
      sortBy: 'time', // time, unread
      pinnedConversations: []
    };
  },
  computed: {
    sortedConversations() {
      let list = [...this.conversations];

      // æœç´¢è¿‡æ»¤
      if (this.searchKeyword) {
        list = list.filter(c =>
          c.friendName.includes(this.searchKeyword) ||
          c.lastMessage.content.includes(this.searchKeyword)
        );
      }

      // ç½®é¡¶ä¼˜å…ˆ
      list.sort((a, b) => {
        if (a.pinned && !b.pinned) return -1;
        if (!a.pinned && b.pinned) return 1;

        // æŒ‰æœªè¯»æˆ–æ—¶é—´æ’åº
        if (this.sortBy === 'unread') {
          return b.unreadCount - a.unreadCount;
        } else {
          return b.lastMessage.timestamp - a.lastMessage.timestamp;
        }
      });

      return list;
    }
  },
  methods: {
    async togglePin(conversationId) {
      await db.toggleConversationPin(conversationId);
      await this.loadConversations();
    }
  }
};
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ”¯æŒæœç´¢æ¶ˆæ¯å†…å®¹
- âœ… æ”¯æŒæŒ‰æ—¶é—´/æœªè¯»æ•°æ’åº
- âœ… æ”¯æŒæ¶ˆæ¯ç½®é¡¶
- âœ… ç½®é¡¶æ¶ˆæ¯æ˜¾ç¤ºåœ¨æœ€ä¸Šæ–¹

---

#### ä»»åŠ¡ 3.3: æœªè¯»æ¶ˆæ¯æç¤º (3-4 å°æ—¶)

**åŠŸèƒ½**:
- TabBar æ˜¾ç¤ºæœªè¯»çº¢ç‚¹
- æ¶ˆæ¯åˆ—è¡¨æ˜¾ç¤ºæœªè¯»æ•°é‡
- èŠå¤©ç•Œé¢æ˜¾ç¤ºæœªè¯»ä½ç½®

**æŠ€æœ¯æ–¹æ¡ˆ**:
```javascript
// åœ¨ App.vue ä¸­å…¨å±€ç›‘å¬æœªè¯»æ¶ˆæ¯
export default {
  async onShow() {
    await this.updateUnreadCount();
  },
  methods: {
    async updateUnreadCount() {
      const count = await db.getUnreadMessageCount();

      if (count > 0) {
        uni.setTabBarBadge({
          index: 2, // æ¶ˆæ¯ Tab
          text: count > 99 ? '99+' : String(count)
        });
      } else {
        uni.removeTabBarBadge({ index: 2 });
      }
    }
  }
};
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… TabBar æ˜¾ç¤ºæœªè¯»æ¶ˆæ¯æ•°é‡
- âœ… æ¶ˆæ¯åˆ—è¡¨æ¯ä¸ªä¼šè¯æ˜¾ç¤ºæœªè¯»æ•°é‡
- âœ… è¿›å…¥èŠå¤©åè‡ªåŠ¨æ ‡è®°ä¸ºå·²è¯»
- âœ… æœªè¯»æ¶ˆæ¯æ•°é‡å®æ—¶æ›´æ–°

---

### Phase 4: è®¤è¯ä½“éªŒä¼˜åŒ– (Week 3, 2-3 å¤©)

**ä¼˜å…ˆçº§**: P2
**é¢„è®¡å·¥æ—¶**: 15-20 å°æ—¶
**å…³é”®æˆæœ**: è®¤è¯ç³»ç»Ÿ 90% â†’ 95%

#### ä»»åŠ¡ 4.1: ç”Ÿç‰©è¯†åˆ«é›†æˆ (8-10 å°æ—¶)

**é¡µé¢**: `pages/auth/biometric-setup.vue`

**æŠ€æœ¯æ–¹æ¡ˆ**:
```javascript
export default {
  data() {
    return {
      biometricType: '', // fingerprint, face
      available: false,
      enrolled: false
    };
  },
  async onLoad() {
    await this.checkBiometric();
  },
  methods: {
    async checkBiometric() {
      // uni-app ç”Ÿç‰©è¯†åˆ« API
      uni.checkIsSupportSoterAuthentication({
        success: (res) => {
          this.available = res.supportMode.length > 0;

          if (res.supportMode.includes('fingerprint')) {
            this.biometricType = 'fingerprint';
          } else if (res.supportMode.includes('facial')) {
            this.biometricType = 'face';
          }
        }
      });

      // æ£€æŸ¥æ˜¯å¦å·²å½•å…¥
      uni.checkIsSoterEnrolledInDevice({
        checkAuthMode: this.biometricType,
        success: (res) => {
          this.enrolled = res.isEnrolled;
        }
      });
    },

    async enableBiometric() {
      if (!this.enrolled) {
        return uni.showModal({
          title: 'æç¤º',
          content: 'è¯·å…ˆåœ¨ç³»ç»Ÿè®¾ç½®ä¸­å½•å…¥ç”Ÿç‰©è¯†åˆ«ä¿¡æ¯',
          showCancel: false
        });
      }

      // é¦–æ¬¡å¯ç”¨éœ€è¦éªŒè¯ PIN ç 
      uni.navigateTo({
        url: '/pages/auth/verify-pin?action=enable_biometric'
      });
    },

    async authenticate() {
      return new Promise((resolve, reject) => {
        uni.startSoterAuthentication({
          requestAuthModes: [this.biometricType],
          challenge: this.generateChallenge(),
          authContent: 'éªŒè¯ä»¥è®¿é—® ChainlessChain',
          success: (res) => {
            resolve(res);
          },
          fail: (err) => {
            reject(err);
          }
        });
      });
    },

    generateChallenge() {
      return String(Date.now() + Math.random());
    }
  }
};
```

**ç™»å½•æµç¨‹ä¼˜åŒ–**:
```javascript
// pages/login/login.vue
export default {
  async onLoad() {
    const biometricEnabled = await db.getBiometricSetting();

    if (biometricEnabled) {
      // æ˜¾ç¤ºç”Ÿç‰©è¯†åˆ«ç™»å½•é€‰é¡¹
      this.showBiometricLogin = true;
    }
  },
  async loginWithBiometric() {
    try {
      await this.authenticate();

      // éªŒè¯æˆåŠŸï¼Œç›´æ¥è¿›å…¥åº”ç”¨
      uni.reLaunch({ url: '/pages/index/index' });
    } catch (e) {
      uni.showToast({ title: 'éªŒè¯å¤±è´¥', icon: 'none' });
    }
  }
};
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ£€æµ‹è®¾å¤‡æ˜¯å¦æ”¯æŒç”Ÿç‰©è¯†åˆ«
- âœ… æ”¯æŒæŒ‡çº¹è¯†åˆ«
- âœ… æ”¯æŒé¢éƒ¨è¯†åˆ«
- âœ… å¯ç”¨ç”Ÿç‰©è¯†åˆ«éœ€è¦å…ˆéªŒè¯ PIN ç 
- âœ… ç™»å½•æ—¶ä¼˜å…ˆæ˜¾ç¤ºç”Ÿç‰©è¯†åˆ«
- âœ… ç”Ÿç‰©è¯†åˆ«å¤±è´¥æ—¶é™çº§åˆ° PIN ç 

---

#### ä»»åŠ¡ 4.2: PIN ç ä½“éªŒä¼˜åŒ– (4-5 å°æ—¶)

**ä¼˜åŒ–ç‚¹**:
1. PIN ç è¾“å…¥ç»„ä»¶ç¾åŒ–
2. é”™è¯¯æç¤ºåŠ¨ç”»
3. æ”¯æŒå¿˜è®° PIN ç ï¼ˆé€šè¿‡å¤‡ä»½æ¢å¤ï¼‰
4. æ”¯æŒ PIN ç å¼ºåº¦æ£€æµ‹

**æŠ€æœ¯æ–¹æ¡ˆ**:
```vue
<!-- PIN ç è¾“å…¥ç»„ä»¶ -->
<template>
  <view class="pin-input-container">
    <view class="pin-dots">
      <view
        v-for="i in 6"
        :key="i"
        :class="['dot', pin.length >= i ? 'filled' : '']"
      ></view>
    </view>

    <view class="keyboard">
      <view
        v-for="num in [1,2,3,4,5,6,7,8,9,'',0,'âŒ«']"
        :key="num"
        :class="['key', num === '' ? 'empty' : '']"
        @click="handleKeyPress(num)"
      >
        {{ num }}
      </view>
    </view>
  </view>
</template>

<script>
export default {
  data() {
    return {
      pin: '',
      maxLength: 6
    };
  },
  methods: {
    handleKeyPress(key) {
      if (key === '') return;

      if (key === 'âŒ«') {
        this.pin = this.pin.slice(0, -1);
      } else if (this.pin.length < this.maxLength) {
        this.pin += key;

        if (this.pin.length === this.maxLength) {
          this.$emit('complete', this.pin);
        }
      }
    },

    shake() {
      // é”™è¯¯æ—¶éœ‡åŠ¨åŠ¨ç”»
      this.$refs.dots.classList.add('shake');
      setTimeout(() => {
        this.$refs.dots.classList.remove('shake');
      }, 500);
    }
  }
};
</script>

<style lang="scss" scoped>
.pin-dots {
  display: flex;
  justify-content: center;
  gap: 20rpx;
  margin-bottom: 80rpx;

  &.shake {
    animation: shake 0.5s;
  }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-10rpx); }
  20%, 40%, 60%, 80% { transform: translateX(10rpx); }
}

.dot {
  width: 40rpx;
  height: 40rpx;
  border-radius: 50%;
  border: 2rpx solid #ccc;
  transition: all 0.3s;

  &.filled {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-color: #667eea;
  }
}

.keyboard {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20rpx;
  padding: 40rpx;
}

.key {
  height: 120rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f5f5f5;
  border-radius: 16rpx;
  font-size: 48rpx;
  font-weight: 500;
  transition: all 0.2s;

  &:active:not(.empty) {
    background: #e0e0e0;
    transform: scale(0.95);
  }

  &.empty {
    background: transparent;
  }
}
</style>
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… ä½¿ç”¨è‡ªå®šä¹‰æ•°å­—é”®ç›˜
- âœ… è¾“å…¥æ—¶æ˜¾ç¤ºåœ†ç‚¹å¡«å……åŠ¨ç”»
- âœ… é”™è¯¯æ—¶éœ‡åŠ¨åé¦ˆ
- âœ… æ”¯æŒåˆ é™¤é”®
- âœ… PIN ç å¼ºåº¦æç¤ºï¼ˆè®¾ç½®æ—¶ï¼‰
- âœ… å¿˜è®° PIN ç å¯é€šè¿‡å¤‡ä»½æ¢å¤

---

#### ä»»åŠ¡ 4.3: å®‰å…¨è®¾ç½®å®Œå–„ (3-4 å°æ—¶)

**é¡µé¢**: `pages/settings/security.vue`

**åŠŸèƒ½æ¸…å•**:
1. ä¿®æ”¹ PIN ç 
2. å¯ç”¨/ç¦ç”¨ç”Ÿç‰©è¯†åˆ«
3. è‡ªåŠ¨é”å®šè®¾ç½®ï¼ˆ5åˆ†é’Ÿ/10åˆ†é’Ÿ/30åˆ†é’Ÿï¼‰
4. æ˜¾ç¤ºç™»å½•å†å²
5. ç®¡ç†å·²ç™»å½•è®¾å¤‡

**æŠ€æœ¯æ–¹æ¡ˆ**:
```javascript
export default {
  data() {
    return {
      autoLockTime: 300000, // 5åˆ†é’Ÿ
      biometricEnabled: false,
      loginHistory: []
    };
  },
  async onLoad() {
    await this.loadSecuritySettings();
  },
  methods: {
    async loadSecuritySettings() {
      const settings = await db.getSecuritySettings();
      this.autoLockTime = settings.autoLockTime;
      this.biometricEnabled = settings.biometricEnabled;
      this.loginHistory = await db.getLoginHistory(10);
    },

    async changeAutoLockTime(time) {
      this.autoLockTime = time;
      await db.updateSecuritySettings({ autoLockTime: time });
    },

    async toggleBiometric() {
      if (this.biometricEnabled) {
        // ç¦ç”¨ç”Ÿç‰©è¯†åˆ«
        await db.updateSecuritySettings({ biometricEnabled: false });
        this.biometricEnabled = false;
      } else {
        // å¯ç”¨ç”Ÿç‰©è¯†åˆ«ï¼ˆéœ€è¦éªŒè¯ PINï¼‰
        uni.navigateTo({
          url: '/pages/auth/biometric-setup'
        });
      }
    },

    navigateToChangePIN() {
      uni.navigateTo({
        url: '/pages/auth/change-pin'
      });
    }
  }
};
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ˜¾ç¤ºå½“å‰å®‰å…¨è®¾ç½®
- âœ… æ”¯æŒä¿®æ”¹è‡ªåŠ¨é”å®šæ—¶é—´
- âœ… æ˜¾ç¤ºæœ€è¿‘ 10 æ¬¡ç™»å½•è®°å½•
- âœ… æ”¯æŒä¸€é”®é”å®šåº”ç”¨

---

### Phase 5: æ€§èƒ½å’Œ UI æ‰“ç£¨ (Week 3-4, 3-4 å¤©)

**ä¼˜å…ˆçº§**: P2
**é¢„è®¡å·¥æ—¶**: 20-25 å°æ—¶
**å…³é”®æˆæœ**: æå‡æ•´ä½“ç”¨æˆ·ä½“éªŒ

#### ä»»åŠ¡ 5.1: ä¸»é¢˜ç³»ç»Ÿä¼˜åŒ– (6-8 å°æ—¶)

**å½“å‰çŠ¶æ€**: å·²æœ‰æµ…è‰²/æ·±è‰²ä¸»é¢˜ï¼Œä½†éƒ¨åˆ†é¡µé¢æœªé€‚é…

**ç›®æ ‡**: ç¡®ä¿æ‰€æœ‰é¡µé¢æ”¯æŒä¸»é¢˜åˆ‡æ¢

**æŠ€æœ¯æ–¹æ¡ˆ**:
```scss
// styles/theme.scss
:root {
  // æµ…è‰²ä¸»é¢˜
  --bg-primary: #ffffff;
  --bg-secondary: #f5f5f5;
  --text-primary: #333333;
  --text-secondary: #666666;
  --border-color: #e0e0e0;
  --brand-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

[data-theme='dark'] {
  // æ·±è‰²ä¸»é¢˜
  --bg-primary: #1a1a1a;
  --bg-secondary: #2d2d2d;
  --text-primary: #ffffff;
  --text-secondary: #aaaaaa;
  --border-color: #404040;
  --brand-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

// ä½¿ç”¨ç¤ºä¾‹
.page {
  background-color: var(--bg-primary);
  color: var(--text-primary);
}
```

**ä¸»é¢˜åˆ‡æ¢é€»è¾‘**:
```javascript
// App.vue
export default {
  onLaunch() {
    this.applyTheme();
  },
  methods: {
    applyTheme() {
      const theme = uni.getStorageSync('theme') || 'auto';

      if (theme === 'auto') {
        // è·Ÿéšç³»ç»Ÿ
        const systemTheme = uni.getSystemInfoSync().theme || 'light';
        this.setTheme(systemTheme);
      } else {
        this.setTheme(theme);
      }
    },

    setTheme(theme) {
      const root = document.documentElement;
      root.setAttribute('data-theme', theme);
      uni.setStorageSync('current-theme', theme);
    }
  }
};
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ‰€æœ‰é¡µé¢æ”¯æŒæµ…è‰²/æ·±è‰²ä¸»é¢˜
- âœ… ä¸»é¢˜åˆ‡æ¢æ— é—ªçƒ
- âœ… å“ç‰Œè‰²åœ¨ä¸¤ç§ä¸»é¢˜ä¸‹éƒ½æ¸…æ™°å¯è§
- âœ… æ”¯æŒè·Ÿéšç³»ç»Ÿä¸»é¢˜

---

#### ä»»åŠ¡ 5.2: åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ (6-8 å°æ—¶)

**ä¼˜åŒ–ç‚¹**:
1. é¡µé¢åˆ‡æ¢è¿‡æ¸¡åŠ¨ç”»
2. åˆ—è¡¨é¡¹åŠ è½½åŠ¨ç”»
3. æŒ‰é’®ç‚¹å‡»åé¦ˆ
4. ä¸‹æ‹‰åˆ·æ–°åŠ¨ç”»
5. åŠ è½½éª¨æ¶å±

**æŠ€æœ¯æ–¹æ¡ˆ**:
```vue
<!-- éª¨æ¶å±ç»„ä»¶ -->
<template>
  <view class="skeleton">
    <view class="skeleton-avatar"></view>
    <view class="skeleton-content">
      <view class="skeleton-line"></view>
      <view class="skeleton-line short"></view>
    </view>
  </view>
</template>

<style lang="scss" scoped>
.skeleton {
  display: flex;
  padding: 30rpx;

  &-avatar {
    width: 80rpx;
    height: 80rpx;
    border-radius: 50%;
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }

  &-content {
    flex: 1;
    margin-left: 20rpx;
  }

  &-line {
    height: 32rpx;
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: 4rpx;
    margin-bottom: 20rpx;

    &.short {
      width: 60%;
    }
  }
}

@keyframes shimmer {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}
</style>
```

**é¡µé¢åˆ‡æ¢åŠ¨ç”»**:
```javascript
// pages.json
{
  "globalStyle": {
    "navigationStyle": "custom",
    "animationType": "pop-in",
    "animationDuration": 300
  }
}
```

**åˆ—è¡¨åŠ è½½åŠ¨ç”»**:
```vue
<template>
  <view
    v-for="(item, index) in items"
    :key="item.id"
    class="list-item"
    :style="{ animationDelay: `${index * 50}ms` }"
  >
    {{ item.title }}
  </view>
</template>

<style lang="scss" scoped>
.list-item {
  animation: fadeInUp 0.3s ease-out forwards;
  opacity: 0;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20rpx);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
</style>
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… é¡µé¢åˆ‡æ¢æµç•…ï¼ˆ60fpsï¼‰
- âœ… åˆ—è¡¨é¡¹ä¾æ¬¡å‡ºç°åŠ¨ç”»
- âœ… æŒ‰é’®ç‚¹å‡»æœ‰ç¼©æ”¾åé¦ˆ
- âœ… åŠ è½½æ—¶æ˜¾ç¤ºéª¨æ¶å±
- âœ… ä¸‹æ‹‰åˆ·æ–°æœ‰æµç•…åŠ¨ç”»

---

#### ä»»åŠ¡ 5.3: æ€§èƒ½ä¼˜åŒ– (4-5 å°æ—¶)

**ä¼˜åŒ–ç‚¹**:
1. å›¾ç‰‡æ‡’åŠ è½½
2. è™šæ‹Ÿåˆ—è¡¨ï¼ˆé•¿åˆ—è¡¨ä¼˜åŒ–ï¼‰
3. é˜²æŠ–å’ŒèŠ‚æµ
4. æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
5. å†…å­˜æ³„æ¼æ£€æµ‹

**æŠ€æœ¯æ–¹æ¡ˆ**:
```javascript
// utils/lazyLoad.js
export function lazyLoadImages() {
  const images = document.querySelectorAll('image[lazy]');

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const img = entry.target;
        img.src = img.dataset.src;
        observer.unobserve(img);
      }
    });
  });

  images.forEach(img => observer.observe(img));
}

// utils/debounce.js
export function debounce(fn, delay = 300) {
  let timer = null;
  return function(...args) {
    clearTimeout(timer);
    timer = setTimeout(() => {
      fn.apply(this, args);
    }, delay);
  };
}

// utils/throttle.js
export function throttle(fn, delay = 300) {
  let lastTime = 0;
  return function(...args) {
    const now = Date.now();
    if (now - lastTime >= delay) {
      fn.apply(this, args);
      lastTime = now;
    }
  };
}
```

**æœç´¢é˜²æŠ–ç¤ºä¾‹**:
```javascript
import { debounce } from '@/utils/debounce.js';

export default {
  data() {
    return {
      searchKeyword: ''
    };
  },
  watch: {
    searchKeyword: debounce(async function(newVal) {
      await this.performSearch(newVal);
    }, 500)
  }
};
```

**æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–**:
```javascript
// ä½¿ç”¨ç´¢å¼•
await db.executeSql(`
  CREATE INDEX IF NOT EXISTS idx_created_at
  ON knowledge_items(created_at DESC)
`);

// åˆ†é¡µæŸ¥è¯¢
async getKnowledgeList(page = 1, pageSize = 20) {
  const offset = (page - 1) * pageSize;
  return await db.executeSql(`
    SELECT * FROM knowledge_items
    ORDER BY created_at DESC
    LIMIT ? OFFSET ?
  `, [pageSize, offset]);
}
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… å›¾ç‰‡æ‡’åŠ è½½ç”Ÿæ•ˆ
- âœ… é•¿åˆ—è¡¨æ»šåŠ¨æµç•…ï¼ˆè™šæ‹Ÿåˆ—è¡¨ï¼‰
- âœ… æœç´¢è¾“å…¥æœ‰é˜²æŠ–
- âœ… æ»šåŠ¨äº‹ä»¶æœ‰èŠ‚æµ
- âœ… æ•°æ®åº“æŸ¥è¯¢æœ‰ç´¢å¼•
- âœ… åº”ç”¨å¯åŠ¨æ—¶é—´ < 2 ç§’
- âœ… å†…å­˜å ç”¨ç¨³å®šï¼ˆæ— æ³„æ¼ï¼‰

---

#### ä»»åŠ¡ 5.4: é”™è¯¯å¤„ç†å®Œå–„ (4-5 å°æ—¶)

**ä¼˜åŒ–ç‚¹**:
1. å…¨å±€é”™è¯¯æ‹¦æˆª
2. å‹å¥½çš„é”™è¯¯æç¤º
3. ç¦»çº¿çŠ¶æ€æç¤º
4. æ•°æ®åŠ è½½å¤±è´¥é‡è¯•
5. å´©æºƒæ—¥å¿—æ”¶é›†

**æŠ€æœ¯æ–¹æ¡ˆ**:
```javascript
// utils/errorHandler.js
export default {
  install(app) {
    // Vue é”™è¯¯å¤„ç†
    app.config.errorHandler = (err, vm, info) => {
      console.error('[Vue Error]', err, info);
      this.reportError(err, 'vue');
    };

    // Promise é”™è¯¯å¤„ç†
    window.addEventListener('unhandledrejection', (event) => {
      console.error('[Promise Error]', event.reason);
      this.reportError(event.reason, 'promise');
    });
  },

  reportError(error, type) {
    // æ”¶é›†é”™è¯¯ä¿¡æ¯
    const errorLog = {
      message: error.message || String(error),
      stack: error.stack,
      type: type,
      timestamp: Date.now(),
      userAgent: navigator.userAgent
    };

    // ä¿å­˜åˆ°æœ¬åœ°
    uni.setStorageSync('error-logs', [
      ...(uni.getStorageSync('error-logs') || []).slice(-50),
      errorLog
    ]);

    // æ˜¾ç¤ºå‹å¥½æç¤º
    uni.showToast({
      title: 'æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•',
      icon: 'none'
    });
  }
};
```

**ç½‘ç»œé”™è¯¯æ‹¦æˆª**:
```javascript
// utils/request.js
export function request(options) {
  return new Promise((resolve, reject) => {
    uni.request({
      ...options,
      success: (res) => {
        if (res.statusCode === 200) {
          resolve(res.data);
        } else {
          this.handleError(res.statusCode);
          reject(res);
        }
      },
      fail: (err) => {
        this.handleNetworkError(err);
        reject(err);
      }
    });
  });
}

function handleError(statusCode) {
  const messages = {
    400: 'è¯·æ±‚å‚æ•°é”™è¯¯',
    401: 'æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½•',
    403: 'æ‹’ç»è®¿é—®',
    404: 'è¯·æ±‚èµ„æºä¸å­˜åœ¨',
    500: 'æœåŠ¡å™¨é”™è¯¯',
    502: 'ç½‘å…³é”™è¯¯',
    503: 'æœåŠ¡ä¸å¯ç”¨'
  };

  uni.showToast({
    title: messages[statusCode] || 'è¯·æ±‚å¤±è´¥',
    icon: 'none'
  });
}

function handleNetworkError(err) {
  if (err.errMsg.includes('timeout')) {
    uni.showToast({ title: 'è¯·æ±‚è¶…æ—¶', icon: 'none' });
  } else {
    uni.showToast({ title: 'ç½‘ç»œè¿æ¥å¤±è´¥', icon: 'none' });
  }
}
```

**ç¦»çº¿çŠ¶æ€æ£€æµ‹**:
```javascript
// App.vue
export default {
  onLaunch() {
    this.checkNetworkStatus();

    // ç›‘å¬ç½‘ç»œçŠ¶æ€å˜åŒ–
    uni.onNetworkStatusChange((res) => {
      if (!res.isConnected) {
        this.showOfflineMessage();
      }
    });
  },
  methods: {
    checkNetworkStatus() {
      uni.getNetworkType({
        success: (res) => {
          if (res.networkType === 'none') {
            this.showOfflineMessage();
          }
        }
      });
    },

    showOfflineMessage() {
      uni.showToast({
        title: 'å½“å‰å¤„äºç¦»çº¿çŠ¶æ€',
        icon: 'none',
        duration: 3000
      });
    }
  }
};
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ•è·æ‰€æœ‰æœªå¤„ç†çš„é”™è¯¯
- âœ… æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯æç¤º
- âœ… ç½‘ç»œé”™è¯¯è‡ªåŠ¨é‡è¯•ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰
- âœ… ç¦»çº¿çŠ¶æ€æ˜¾ç¤ºæç¤º
- âœ… é”™è¯¯æ—¥å¿—ä¿å­˜åˆ°æœ¬åœ°
- âœ… å´©æºƒåè‡ªåŠ¨æ¢å¤

---

## â±ï¸ æ—¶é—´ä¼°ç®—å’Œé‡Œç¨‹ç¢‘

### æ€»ä½“æ—¶é—´è§„åˆ’

| é˜¶æ®µ | æ—¶é•¿ | å·¥ä½œæ—¥ | å®Œæˆæ—¥æœŸ |
|-----|------|--------|---------|
| Phase 1: ç¤¾äº¤åŠŸèƒ½ UI | 40-50h | 5-6å¤© | Week 1 ç»“æŸ |
| Phase 2: çŸ¥è¯†åº“ & AI | 30-40h | 4-5å¤© | Week 2 ä¸­æœŸ |
| Phase 3: æ¶ˆæ¯ä¸­å¿ƒ | 15-20h | 2-3å¤© | Week 2 ç»“æŸ |
| Phase 4: è®¤è¯ä¼˜åŒ– | 15-20h | 2-3å¤© | Week 3 ä¸­æœŸ |
| Phase 5: æ€§èƒ½æ‰“ç£¨ | 20-25h | 3-4å¤© | Week 4 ç»“æŸ |
| **æ€»è®¡** | **120-155h** | **16-21å¤©** | **3-4å‘¨** |

### å…³é”®é‡Œç¨‹ç¢‘

#### Milestone 1: Week 1 ç»“æŸ
**æ—¥æœŸ**: Day 7
**æˆæœ**:
- âœ… ç¤¾äº¤åŠŸèƒ½ UI é›†æˆå®Œæˆ
- âœ… å¥½å‹åˆ—è¡¨å¯ç”¨
- âœ… åŠ¨æ€å‘å¸ƒå¯ç”¨
- âœ… ç§å¯†æ¶ˆæ¯å¯ç”¨
- **ç§»åŠ¨ç«¯å®Œæˆåº¦**: 15% â†’ 40%

#### Milestone 2: Week 2 ç»“æŸ
**æ—¥æœŸ**: Day 14
**æˆæœ**:
- âœ… çŸ¥è¯†åº“ 100% å®Œæˆ
- âœ… AI åŠŸèƒ½çœŸå®åŒ–
- âœ… æ¶ˆæ¯ä¸­å¿ƒå®Œå–„
- **ç§»åŠ¨ç«¯å®Œæˆåº¦**: 40% â†’ 55%

#### Milestone 3: Week 3 ç»“æŸ
**æ—¥æœŸ**: Day 21
**æˆæœ**:
- âœ… è®¤è¯ä½“éªŒä¼˜åŒ–å®Œæˆ
- âœ… æ€§èƒ½ä¼˜åŒ–å®Œæˆ
- âœ… UI æ‰“ç£¨å®Œæˆ
- **ç§»åŠ¨ç«¯å®Œæˆåº¦**: 55% â†’ 65%

#### Milestone 4: Week 4 ç»“æŸï¼ˆæœ€ç»ˆäº¤ä»˜ï¼‰
**æ—¥æœŸ**: Day 28
**æˆæœ**:
- âœ… æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡
- âœ… æ–‡æ¡£å®Œå–„
- âœ… éƒ¨ç½²å°±ç»ª
- **ç§»åŠ¨ç«¯å®Œæˆåº¦**: 65% â†’ 70%

---

## ğŸ’° èµ„æºéœ€æ±‚

### äººåŠ›èµ„æº

**å¼€å‘äººå‘˜**: 1-2 åå…¨æ ˆå¼€å‘è€…
- Vue 3 / uni-app ç»éªŒ
- ç§»åŠ¨ç«¯ UI/UX ç»éªŒ
- åŠ å¯†å’Œå®‰å…¨çŸ¥è¯†

**æµ‹è¯•äººå‘˜**: 1 åï¼ˆå…¼èŒï¼‰
- è´Ÿè´£åŠŸèƒ½æµ‹è¯•
- è´Ÿè´£å…¼å®¹æ€§æµ‹è¯•ï¼ˆiOS/Android/H5ï¼‰

### æŠ€æœ¯èµ„æº

**å¿…éœ€**:
- âœ… uni-app å¼€å‘ç¯å¢ƒ
- âœ… HBuilderX IDE
- âœ… iOS/Android çœŸæœºæµ‹è¯•è®¾å¤‡
- âœ… LLM API å¯†é’¥ï¼ˆOpenAI / DeepSeek / é€šä¹‰åƒé—®ç­‰ï¼‰

**å¯é€‰**:
- äº‘ç«¯ RAG æœåŠ¡ï¼ˆæˆ–ä½¿ç”¨æœ¬åœ° transformers.jsï¼‰
- äº‘å­˜å‚¨æœåŠ¡ï¼ˆé˜¿é‡Œäº‘ OSS / è…¾è®¯äº‘ COSï¼‰
- APNs æ¨é€è¯ä¹¦ï¼ˆiOS æ¨é€é€šçŸ¥ï¼‰

### é¢„ç®—ä¼°ç®—

| é¡¹ç›® | è´¹ç”¨ï¼ˆUSD/æœˆï¼‰ | è¯´æ˜ |
|-----|---------------|------|
| LLM API è°ƒç”¨ | $50-100 | DeepSeek è¾ƒä¾¿å®œ |
| äº‘å­˜å‚¨ | $10-20 | ç”¨äºå›¾ç‰‡/æ–‡ä»¶å­˜å‚¨ |
| æœåŠ¡å™¨ï¼ˆå¯é€‰ï¼‰ | $20-50 | RAG æœåŠ¡éƒ¨ç½² |
| æ¨é€æœåŠ¡ï¼ˆå¯é€‰ï¼‰ | $10-30 | æå…‰æ¨é€/ä¸ªæ¨ |
| **æ€»è®¡** | **$90-200/æœˆ** | å–å†³äºç”¨æˆ·é‡ |

---

## âš ï¸ é£é™©è¯„ä¼°

### é«˜é£é™© (P0)

#### é£é™© 1: transformers.js åœ¨ uni-app ç¯å¢ƒä¸­æ— æ³•è¿è¡Œ
**å½±å“**: RAG è¯­ä¹‰æœç´¢åŠŸèƒ½æ— æ³•å®ç°
**æ¦‚ç‡**: 70%
**åº”å¯¹æ–¹æ¡ˆ**:
- **Plan A**: è°ƒç”¨åç«¯ ai-service çš„ RAG APIï¼ˆæ¨èï¼‰
- **Plan B**: H5 ä½¿ç”¨ transformers.jsï¼ŒApp ä½¿ç”¨äº‘ç«¯ API
- **Plan C**: æš‚æ—¶ä½¿ç”¨å…³é”®è¯åŒ¹é…ï¼Œåç»­è¿ç§»

#### é£é™© 2: P2P ç½‘ç»œæœªå®ç°ï¼Œå¥½å‹åŠŸèƒ½å—é™
**å½±å“**: æ— æ³•å®ç°çœŸå®çš„å¥½å‹å‘ç°å’Œæ¶ˆæ¯ä¼ é€’
**æ¦‚ç‡**: 100%ï¼ˆå·²çŸ¥é—®é¢˜ï¼‰
**åº”å¯¹æ–¹æ¡ˆ**:
- **Phase 1**: ä»…å®ç°æœ¬åœ°æ•°æ®å±•ç¤ºå’Œ UI äº¤äº’
- **Phase 2**: ä½¿ç”¨ä¸­å¿ƒåŒ–æœåŠ¡å™¨ä¸­è½¬ï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰
- **Phase 3**: ç­‰å¾… P2P ç½‘ç»œå®ç°åé›†æˆ

### ä¸­é£é™© (P1)

#### é£é™© 3: ç”Ÿç‰©è¯†åˆ«åœ¨ä¸åŒè®¾å¤‡ä¸Šå…¼å®¹æ€§é—®é¢˜
**å½±å“**: éƒ¨åˆ†è®¾å¤‡æ— æ³•ä½¿ç”¨ç”Ÿç‰©è¯†åˆ«ç™»å½•
**æ¦‚ç‡**: 40%
**åº”å¯¹æ–¹æ¡ˆ**:
- å……åˆ†æµ‹è¯•ä¸»æµè®¾å¤‡ï¼ˆiPhone, åä¸º, å°ç±³, OPPO, vivoï¼‰
- æä¾›é™çº§æ–¹æ¡ˆï¼ˆPIN ç ç™»å½•ï¼‰
- æ˜¾ç¤ºå‹å¥½çš„ä¸æ”¯æŒæç¤º

#### é£é™© 4: LLM API è°ƒç”¨æˆæœ¬è¶…é¢„ç®—
**å½±å“**: è¿è¥æˆæœ¬å¢åŠ 
**æ¦‚ç‡**: 30%
**åº”å¯¹æ–¹æ¡ˆ**:
- ä¼˜å…ˆä½¿ç”¨ DeepSeekï¼ˆæˆæœ¬ä½ï¼‰
- å®æ–½è°ƒç”¨é¢‘ç‡é™åˆ¶
- ç¼“å­˜å¸¸è§æŸ¥è¯¢ç»“æœ
- æä¾›æœ¬åœ°æ¨¡å¼ï¼ˆä¸è°ƒç”¨ APIï¼‰

### ä½é£é™© (P2)

#### é£é™© 5: ä¸»é¢˜é€‚é…ä¸å®Œæ•´
**å½±å“**: éƒ¨åˆ†é¡µé¢åœ¨æ·±è‰²æ¨¡å¼ä¸‹æ˜¾ç¤ºå¼‚å¸¸
**æ¦‚ç‡**: 20%
**åº”å¯¹æ–¹æ¡ˆ**:
- å»ºç«‹ä¸»é¢˜æµ‹è¯•æ¸…å•
- é€é¡µé¢æ£€æŸ¥å’Œä¿®å¤

#### é£é™© 6: æ€§èƒ½ä¼˜åŒ–æ•ˆæœä¸æ˜æ˜¾
**å½±å“**: ç”¨æˆ·ä½“éªŒæå‡æœ‰é™
**æ¦‚ç‡**: 15%
**åº”å¯¹æ–¹æ¡ˆ**:
- ä½¿ç”¨æ€§èƒ½åˆ†æå·¥å…·å®šä½ç“¶é¢ˆ
- ä¼˜å…ˆä¼˜åŒ–å…³é”®è·¯å¾„
- é€æ­¥è¿­ä»£ä¼˜åŒ–

---

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶

#### 1. ç¤¾äº¤åŠŸèƒ½ (Phase 1)
- [ ] å¥½å‹åˆ—è¡¨æ­£å¸¸æ˜¾ç¤ºï¼ˆåŒ…å«å¤´åƒã€æ˜µç§°ã€DIDï¼‰
- [ ] æ”¯æŒæ·»åŠ å¥½å‹ï¼ˆæ‰«ç /æ‰‹åŠ¨è¾“å…¥ï¼‰
- [ ] æ”¯æŒæ¥å—/æ‹’ç»å¥½å‹è¯·æ±‚
- [ ] æ”¯æŒåˆ é™¤å¥½å‹
- [ ] åŠ¨æ€åˆ—è¡¨æ­£å¸¸æ˜¾ç¤º
- [ ] æ”¯æŒå‘å¸ƒæ–‡æœ¬å’Œå›¾ç‰‡åŠ¨æ€
- [ ] æ”¯æŒç‚¹èµ/å–æ¶ˆç‚¹èµ
- [ ] æ”¯æŒè¯„è®ºåŠ¨æ€
- [ ] æ¶ˆæ¯åˆ—è¡¨æ­£å¸¸æ˜¾ç¤º
- [ ] æ”¯æŒå‘é€/æ¥æ”¶æ–‡æœ¬æ¶ˆæ¯
- [ ] æ”¯æŒå‘é€/æ¥æ”¶å›¾ç‰‡æ¶ˆæ¯
- [ ] æ¶ˆæ¯ç«¯åˆ°ç«¯åŠ å¯†ç”Ÿæ•ˆ

#### 2. çŸ¥è¯†åº“åŠŸèƒ½ (Phase 2)
- [ ] æ–‡ä»¶å¤¹åˆ—è¡¨æ­£å¸¸æ˜¾ç¤º
- [ ] æ”¯æŒåˆ›å»º/é‡å‘½å/åˆ é™¤æ–‡ä»¶å¤¹
- [ ] æ”¯æŒç§»åŠ¨çŸ¥è¯†æ¡ç›®åˆ°æ–‡ä»¶å¤¹
- [ ] çŸ¥è¯†å…³è”å¯è§†åŒ–å±•ç¤º

#### 3. AI åŠŸèƒ½ (Phase 2)
- [ ] æ™ºèƒ½æ‘˜è¦è¿”å›çœŸå®ç»“æœ
- [ ] æ ‡ç­¾å»ºè®®å‡†ç¡®
- [ ] å†…å®¹æ‰©å±•è´¨é‡è‰¯å¥½
- [ ] å†…å®¹æ¶¦è‰²æ•ˆæœæ˜æ˜¾
- [ ] RAG è¯­ä¹‰æœç´¢å‡†ç¡®ç‡ > 70%

#### 4. æ¶ˆæ¯ä¸­å¿ƒ (Phase 3)
- [ ] é€šçŸ¥åˆ—è¡¨æ­£å¸¸æ˜¾ç¤º
- [ ] æ”¯æŒæŒ‰ç±»å‹ç­›é€‰é€šçŸ¥
- [ ] æœªè¯»æ¶ˆæ¯çº¢ç‚¹æ˜¾ç¤º
- [ ] TabBar æ˜¾ç¤ºæœªè¯»æ¶ˆæ¯æ•°é‡
- [ ] æ¶ˆæ¯æœç´¢åŠŸèƒ½æ­£å¸¸

#### 5. è®¤è¯ä½“éªŒ (Phase 4)
- [ ] ç”Ÿç‰©è¯†åˆ«ç™»å½•æ­£å¸¸ï¼ˆæ”¯æŒçš„è®¾å¤‡ï¼‰
- [ ] PIN ç è¾“å…¥ä½“éªŒæµç•…
- [ ] é”™è¯¯æ—¶æœ‰éœ‡åŠ¨åé¦ˆ
- [ ] å®‰å…¨è®¾ç½®é¡µé¢åŠŸèƒ½å®Œæ•´

#### 6. æ€§èƒ½å’Œ UI (Phase 5)
- [ ] æ‰€æœ‰é¡µé¢æ”¯æŒä¸»é¢˜åˆ‡æ¢
- [ ] é¡µé¢åˆ‡æ¢æµç•…æ— å¡é¡¿
- [ ] åˆ—è¡¨æ»šåŠ¨æµç•…ï¼ˆ60fpsï¼‰
- [ ] å›¾ç‰‡æ‡’åŠ è½½ç”Ÿæ•ˆ
- [ ] é”™è¯¯æç¤ºå‹å¥½
- [ ] ç¦»çº¿çŠ¶æ€æç¤ºæ­£å¸¸

### è´¨é‡éªŒæ”¶

#### æ€§èƒ½æŒ‡æ ‡
- [ ] åº”ç”¨å¯åŠ¨æ—¶é—´ < 2 ç§’
- [ ] é¡µé¢é¦–å±åŠ è½½ < 1 ç§’
- [ ] åˆ—è¡¨æ»šåŠ¨å¸§ç‡ â‰¥ 55fps
- [ ] å†…å­˜å ç”¨ç¨³å®šï¼ˆæ— æ³„æ¼ï¼‰
- [ ] åŒ…ä½“ç§¯ < 20MB

#### å…¼å®¹æ€§
- [ ] iOS 12+ æ­£å¸¸è¿è¡Œ
- [ ] Android 7.0+ æ­£å¸¸è¿è¡Œ
- [ ] H5 åœ¨ä¸»æµæµè§ˆå™¨æ­£å¸¸è¿è¡Œ
- [ ] å±å¹•é€‚é…æ­£å¸¸ï¼ˆiPhone SE åˆ° iPadï¼‰

#### å®‰å…¨æ€§
- [ ] ç«¯åˆ°ç«¯åŠ å¯†æµ‹è¯•é€šè¿‡
- [ ] PIN ç åŠ å¯†å­˜å‚¨
- [ ] æ•æ„Ÿæ•°æ®ä¸æ³„æ¼ï¼ˆæ—¥å¿—ä¸­ï¼‰
- [ ] HTTPS é€šä¿¡

#### ç”¨æˆ·ä½“éªŒ
- [ ] æ— æ˜æ˜¾ UI é”™ä½
- [ ] æŒ‰é’®ç‚¹å‡»æœ‰åé¦ˆ
- [ ] åŠ è½½çŠ¶æ€æ¸…æ™°
- [ ] é”™è¯¯æç¤ºå‹å¥½
- [ ] æ“ä½œæµç¨‹åˆç†ï¼ˆâ‰¤3æ­¥å®Œæˆæ ¸å¿ƒä»»åŠ¡ï¼‰

---

## ğŸ”® åç»­ä¼˜åŒ–å»ºè®®

### çŸ­æœŸä¼˜åŒ– (1-2 ä¸ªæœˆ)

#### 1. P2P ç½‘ç»œé›†æˆ
**ä¼˜å…ˆçº§**: P0
**å·¥æ—¶**: 40-60 å°æ—¶

**æ–¹æ¡ˆ**:
- é›†æˆ WebRTC æ•°æ®é€šé“
- ä½¿ç”¨ WebSocket ä¸­ç»§æœåŠ¡å™¨
- å®ç° DHT èŠ‚ç‚¹å‘ç°
- é›†æˆ Signal åè®®åŠ å¯†

**é¢„æœŸæˆæœ**:
- çœŸæ­£çš„ç‚¹å¯¹ç‚¹é€šä¿¡
- ç¦»çº¿æ¶ˆæ¯ä¸­ç»§
- å¥½å‹çŠ¶æ€å®æ—¶åŒæ­¥

#### 2. é¡¹ç›®ç®¡ç†æ¨¡å—å®ç°
**ä¼˜å…ˆçº§**: P1
**å·¥æ—¶**: 60-80 å°æ—¶

**åŠŸèƒ½æ¸…å•**:
- é¡¹ç›® CRUD
- æ–‡ä»¶ç®¡ç†
- é¡¹ç›® AI åŠ©æ‰‹
- ä»»åŠ¡ç®¡ç†
- åä½œåŠŸèƒ½

#### 3. çœŸå® RAG ç³»ç»Ÿ
**ä¼˜å…ˆçº§**: P1
**å·¥æ—¶**: 30-40 å°æ—¶

**æ–¹æ¡ˆ**:
- éƒ¨ç½² Qdrant å‘é‡æ•°æ®åº“
- é›†æˆ transformers.jsï¼ˆH5ï¼‰
- è°ƒç”¨åç«¯ embedding æœåŠ¡ï¼ˆAppï¼‰
- å®ç°æ··åˆæ£€ç´¢ï¼ˆå‘é‡+å…³é”®è¯ï¼‰

### ä¸­æœŸä¼˜åŒ– (2-4 ä¸ªæœˆ)

#### 4. æ™ºèƒ½åˆçº¦é›†æˆ
**ä¼˜å…ˆçº§**: P2
**å·¥æ—¶**: 80-100 å°æ—¶

**åŠŸèƒ½**:
- ä»¥å¤ªåŠé’±åŒ…é›†æˆ
- æ‰˜ç®¡åˆçº¦éƒ¨ç½²
- äº¤æ˜“ç­¾å
- NFT é“¸é€ 

#### 5. IPFS åˆ†å¸ƒå¼å­˜å‚¨
**ä¼˜å…ˆçº§**: P2
**å·¥æ—¶**: 40-50 å°æ—¶

**åŠŸèƒ½**:
- IPFS ä¸Šä¼ /ä¸‹è½½
- å†…å®¹å¯»å€
- Pin æœåŠ¡é›†æˆ

#### 6. Git ä»“åº“åŒæ­¥
**ä¼˜å…ˆçº§**: P2
**å·¥æ—¶**: 50-60 å°æ—¶

**åŠŸèƒ½**:
- Git Push/Pull
- å†²çªè§£å†³ UI
- ç‰ˆæœ¬å†å²æŸ¥çœ‹

### é•¿æœŸä¼˜åŒ– (4-6 ä¸ªæœˆ)

#### 7. å¾®ä¿¡å°ç¨‹åºç‰ˆæœ¬
**ä¼˜å…ˆçº§**: P3
**å·¥æ—¶**: 100-120 å°æ—¶

**é™åˆ¶**:
- æ— æ³•ä½¿ç”¨åŠ å¯†åº“ï¼ˆéœ€è¦äº‘ç«¯åŠ å¯†ï¼‰
- æ— æ³•ä½¿ç”¨ WebRTCï¼ˆéœ€è¦ä¸­è½¬ï¼‰
- åŒ…ä½“ç§¯é™åˆ¶ 2MBï¼ˆéœ€è¦åˆ†åŒ…ï¼‰

#### 8. å¤šè¯­è¨€æ”¯æŒ
**ä¼˜å…ˆçº§**: P3
**å·¥æ—¶**: 40-50 å°æ—¶

**è¯­è¨€**:
- è‹±è¯­
- æ—¥è¯­
- éŸ©è¯­

#### 9. æ’ä»¶ç³»ç»Ÿ
**ä¼˜å…ˆçº§**: P3
**å·¥æ—¶**: 60-80 å°æ—¶

**åŠŸèƒ½**:
- æ’ä»¶å¸‚åœº
- è‡ªå®šä¹‰ä¸»é¢˜
- ç¬¬ä¸‰æ–¹é›†æˆ

---

## ğŸ“š é™„å½•

### A. æŠ€æœ¯æ ˆæ¸…å•

| åˆ†ç±» | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|-----|------|------|------|
| **æ¡†æ¶** | uni-app | 3.0 | è·¨å¹³å°å¼€å‘ |
| | Vue | 3.4.21 | å‰ç«¯æ¡†æ¶ |
| | Vite | 5.2.8 | æ„å»ºå·¥å…· |
| **çŠ¶æ€ç®¡ç†** | Pinia | 2.1.7 | å…¨å±€çŠ¶æ€ |
| **æ•°æ®åº“** | SQLite | - | H5/App åŒæ¨¡å¼ |
| **åŠ å¯†** | tweetnacl | 1.0.3 | Ed25519 + X25519 |
| | crypto-js | 4.2.0 | AES åŠ å¯† |
| | bs58 | 5.0.0 | Base58 ç¼–ç  |
| **LLM** | è‡ªå®šä¹‰ | - | æ”¯æŒ 10+ æä¾›å•† |
| **æ ·å¼** | SCSS | - | CSS é¢„å¤„ç† |

### B. æ–‡ä»¶è·¯å¾„é€ŸæŸ¥

| åŠŸèƒ½æ¨¡å— | æ–‡ä»¶è·¯å¾„ |
|---------|---------|
| å¥½å‹ç®¡ç† | `pages/social/friends/*.vue` |
| åŠ¨æ€å‘å¸ƒ | `pages/social/posts/*.vue` |
| ç§å¯†æ¶ˆæ¯ | `pages/social/friend-chat/*.vue` |
| çŸ¥è¯†åº“ | `pages/knowledge/*.vue` |
| AI å¯¹è¯ | `pages/ai/*.vue` |
| è®¤è¯ | `pages/auth/*.vue` |
| è®¾ç½® | `pages/settings/*.vue` |
| æ•°æ®åº“æœåŠ¡ | `services/database.js` |
| DID æœåŠ¡ | `services/did.js` |
| å¥½å‹æœåŠ¡ | `services/friends.js` |
| åŠ¨æ€æœåŠ¡ | `services/posts.js` |
| æ¶ˆæ¯æœåŠ¡ | `services/messaging.js` |
| AI æœåŠ¡ | `services/ai.js` |
| LLM æœåŠ¡ | `services/llm.js` |
| RAG æœåŠ¡ | `services/knowledge-rag.js` |
| åŠ å¯†ç®¡ç† | `services/encryption-manager.js` |

### C. æ•°æ®åº“è¡¨ç»“æ„é€ŸæŸ¥

| è¡¨å | è¯´æ˜ | å…³é”®å­—æ®µ |
|-----|------|---------|
| `knowledge_items` | çŸ¥è¯†æ¡ç›® | id, title, content, folder_id |
| `tags` | æ ‡ç­¾ | id, name, color |
| `folders` | æ–‡ä»¶å¤¹ | id, name, parent_id |
| `identities` | DID èº«ä»½ | id, did, public_key, private_key |
| `friendships` | å¥½å‹å…³ç³» | id, user_did, friend_did, status |
| `posts` | åŠ¨æ€ | id, author_did, content, visibility |
| `post_comments` | è¯„è®º | id, post_id, author_did, content |
| `conversations` | ä¼šè¯ | id, participant_did, last_message |
| `messages` | æ¶ˆæ¯ | id, sender_did, recipient_did, content |
| `ai_conversations` | AI å¯¹è¯ | id, title, model, created_at |
| `notifications` | é€šçŸ¥ | id, type, title, message, read |

### D. API ç«¯ç‚¹æ¸…å•ï¼ˆäº‘ç«¯æœåŠ¡ï¼‰

| æœåŠ¡ | ç«¯ç‚¹ | è¯´æ˜ |
|-----|------|------|
| **AI Service** | `POST /api/rag/search` | RAG è¯­ä¹‰æœç´¢ |
| | `POST /api/rag/embed` | ç”Ÿæˆ Embedding |
| | `POST /api/chat/completions` | LLM å¯¹è¯ |
| **Project Service** | `GET /api/projects` | è·å–é¡¹ç›®åˆ—è¡¨ |
| | `POST /api/projects` | åˆ›å»ºé¡¹ç›® |
| **WebDAV** | `PUT /{path}` | ä¸Šä¼ æ–‡ä»¶ |
| | `GET /{path}` | ä¸‹è½½æ–‡ä»¶ |

### E. å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

```bash
# å¼€å‘
cd mobile-app-uniapp
npm install
npm run dev:h5              # H5 å¼€å‘
npm run dev:mp-weixin       # å¾®ä¿¡å°ç¨‹åº
npm run build:app-android   # æ‰“åŒ… Android
npm run build:app-ios       # æ‰“åŒ… iOS

# æµ‹è¯•
npm run test

# ä»£ç æ£€æŸ¥
npm run lint

# æ ¼å¼åŒ–
npm run format

# æ¸…ç†
npm run clean
```

---

## ğŸ“ å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®æ”¹äºº | å˜æ›´å†…å®¹ |
|-----|------|--------|---------|
| v1.0 | 2025-12-31 | Claude Sonnet 4.5 | åˆå§‹ç‰ˆæœ¬ |

---

**æ–‡æ¡£æ‰€æœ‰è€…**: ChainlessChain å¼€å‘å›¢é˜Ÿ
**å®¡æ ¸è€…**: å¾…å®š
**æ‰¹å‡†è€…**: å¾…å®š

**ä¸‹ä¸€æ­¥è¡ŒåŠ¨**: ç­‰å¾…å®¡æ ¸å’Œæ‰¹å‡†åå¼€å§‹å®æ–½ Phase 1

---

ğŸ¤– **Generated with [Claude Code](https://claude.com/claude-code)**

**Co-Authored-By**: Claude Sonnet 4.5 <noreply@anthropic.com>
