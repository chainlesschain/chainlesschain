# ChainlessChain 功能使用教程

**版本**: v0.24.0
**更新日期**: 2026-01-17

---

## 📖 目录

- [教程概述](#教程概述)
- [入门教程](#入门教程)
  - [教程1: 创建你的第一个笔记](#教程1-创建你的第一个笔记)
  - [教程2: 使用AI助手](#教程2-使用ai助手)
  - [教程3: 配置Git同步](#教程3-配置git同步)
- [知识库管理教程](#知识库管理教程)
  - [教程4: 构建个人知识库](#教程4-构建个人知识库)
  - [教程5: 高级搜索与RAG](#教程5-高级搜索与rag)
  - [教程6: 导入和整理文档](#教程6-导入和整理文档)
- [AI功能教程](#ai功能教程)
  - [教程7: 配置本地LLM](#教程7-配置本地llm)
  - [教程8: 使用提示词模板](#教程8-使用提示词模板)
  - [教程9: AI辅助写作](#教程9-ai辅助写作)
- [项目管理教程](#项目管理教程)
  - [教程10: 创建和管理项目](#教程10-创建和管理项目)
  - [教程11: 任务跟踪与看板](#教程11-任务跟踪与看板)
  - [教程12: 项目协作与分享](#教程12-项目协作与分享)
- [安全与隐私教程](#安全与隐私教程)
  - [教程13: 配置U-Key硬件加密](#教程13-配置u-key硬件加密)
  - [教程14: P2P加密通信](#教程14-p2p加密通信)
- [高级功能教程](#高级功能教程)
  - [教程15: 自定义技能和工具](#教程15-自定义技能和工具)
  - [教程16: 开发第一个插件](#教程16-开发第一个插件)
  - [教程17: 知识付费与交易](#教程17-知识付费与交易)
- [新功能教程 (v0.17.0 - v0.24.0)](#新功能教程-v0170---v0240)
  - [教程18: MCP 集成与外部工具](#教程18-mcp-集成与外部工具)
  - [教程19: LLM 性能监控与成本优化](#教程19-llm-性能监控与成本优化)
  - [教程20: 会话管理与上下文恢复](#教程20-会话管理与上下文恢复)
  - [教程21: Multi-Agent 系统使用](#教程21-multi-agent-系统使用)
  - [教程22: 错误诊断与自动修复](#教程22-错误诊断与自动修复)

---

## 教程概述

### 如何使用本教程

每个教程包含：
- **目标**：学习内容
- **前置条件**：需要的基础知识或配置
- **步骤**：详细的操作步骤
- **预期结果**：完成后的效果
- **故障排除**：常见问题解决

### 难度等级

- 🟢 **初级**：适合新手
- 🟡 **中级**：需要基础知识
- 🔴 **高级**：需要深入理解

---

## 入门教程

### 教程1: 创建你的第一个笔记

**难度**: 🟢 初级
**时间**: 5分钟
**目标**: 学会创建、编辑和保存笔记

#### 前置条件

- 已安装ChainlessChain并完成初始化
- 了解Markdown基础语法（可选）

#### 步骤

**1. 打开笔记创建界面**

方式A：点击按钮
- 在左侧边栏找到 "知识库" 区域
- 点击 "➕ 新建笔记" 按钮

方式B：使用快捷键
- 按下 `Ctrl+N`（Windows/Linux）或 `Cmd+N`（macOS）

**2. 输入笔记标题**

- 在顶部输入框输入标题，例如："我的第一个笔记"
- 按 `Enter` 进入内容编辑区

**3. 编写笔记内容**

输入以下示例内容：

```markdown
# 欢迎使用ChainlessChain

这是我的第一个笔记！

## 今天学到的内容

- [x] 创建笔记
- [ ] 使用Markdown
- [ ] 配置同步

## 代码示例

​```python
def hello_world():
    print("Hello, ChainlessChain!")
​```

## 备注

> 这是一个引用块
> 可以用来强调重要内容
```

**4. 添加标签**

- 在内容中输入 `#学习` `#入门`
- 或点击顶部标签按钮手动添加

**5. 保存笔记**

- 按 `Ctrl+S`（Windows/Linux）或 `Cmd+S`（macOS）
- 或点击右上角 "保存" 按钮
- 笔记自动保存到本地数据库

#### 预期结果

- 左侧笔记列表显示新笔记
- 标签栏显示 `#学习` `#入门` 标签
- 笔记内容使用Markdown渲染显示

#### 进阶操作

**切换编辑模式**：
- 分屏模式：左侧编辑，右侧预览（`Ctrl+\`）
- 仅编辑：专注写作
- 仅预览：专注阅读

**插入元素**：
- 图片：`Ctrl+Shift+I` 或拖拽图片文件
- 链接：`Ctrl+K`
- 表格：`Ctrl+Shift+T`
- 代码块：`Ctrl+Shift+K`

---

### 教程2: 使用AI助手

**难度**: 🟢 初级
**时间**: 10分钟
**目标**: 学会与AI对话并获取帮助

#### 前置条件

- 已配置LLM服务（本地Ollama或云端API）

#### 步骤

**1. 打开AI助手**

- 点击顶部工具栏 "🤖 AI助手" 图标
- 或按快捷键 `Ctrl+Shift+A`

**2. 创建新对话**

- 点击 "➕ 新对话" 按钮
- 系统创建一个新的对话窗口

**3. 发送第一个消息**

在输入框输入：
```
你好！请介绍一下ChainlessChain的核心功能。
```

按 `Enter` 发送（或点击发送按钮）

**4. 查看AI回复**

AI会基于系统知识和你的笔记库回答，例如：

```
你好！ChainlessChain是一个去中心化的个人AI管理系统，核心功能包括：

1. **知识库管理**：存储和组织你的笔记、文档
2. **AI智能助手**：基于你的知识库提供智能问答
3. **Git版本控制**：自动记录所有变更
4. **P2P社交**：去中心化的加密通信
5. **项目管理**：任务跟踪和团队协作

需要了解某个功能的详细使用方法吗？
```

**5. 多轮对话**

继续提问：
```
如何使用RAG增强搜索？
```

AI会基于上下文继续回答。

**6. 使用知识库增强（RAG）**

提问一个关于你笔记内容的问题：
```
我之前记录的关于Docker的笔记内容是什么？
```

AI会：
1. 搜索你的笔记库
2. 找到相关笔记
3. 基于笔记内容回答
4. 显示来源笔记链接

**7. 应用回答**

- 点击回答中的笔记链接跳转查看
- 复制有用的内容
- 或让AI继续展开说明

#### 预期结果

- 成功与AI进行多轮对话
- AI能够基于你的知识库回答问题
- 看到来源笔记的引用

#### 进阶技巧

**调整AI参数**：
```
设置 > AI配置
- Temperature: 0.7（创造性）vs 0.3（准确性）
- Max Tokens: 响应长度限制
- Top P: 采样策略
```

**使用提示词**：
```
作为一个技术专家，请详细解释...
```

**停止生成**：
- 如果回答偏离方向，点击 "停止" 按钮

---

### 教程3: 配置Git同步

**难度**: 🟡 中级
**时间**: 15分钟
**目标**: 配置Git远程仓库实现多设备同步

#### 前置条件

- 拥有GitHub/GitLab/Gitee账号
- 创建了一个空的远程仓库
- 了解Git基础概念

#### 步骤

**1. 创建远程仓库**

**GitHub示例**：
1. 登录 https://github.com
2. 点击 "New repository"
3. 仓库名：`chainlesschain-notes`
4. 可见性：Private（推荐，保护隐私）
5. 不要勾选 "Initialize with README"
6. 点击 "Create repository"
7. 复制仓库URL：`https://github.com/username/chainlesschain-notes.git`

**2. 配置Git用户信息**

在ChainlessChain中：
```
设置 > Git配置 > 用户信息
- 姓名: 张三
- 邮箱: zhangsan@example.com
```

**3. 添加远程仓库**

```
设置 > Git配置 > 远程仓库
- 点击 "添加远程仓库"
- 名称: origin
- URL: https://github.com/username/chainlesschain-notes.git
- 认证方式: HTTPS
```

**4. 配置认证**

**方式A：使用Personal Access Token（推荐）**

GitHub生成Token：
1. GitHub > Settings > Developer settings > Personal access tokens > Tokens (classic)
2. Generate new token
3. 勾选 `repo` 权限
4. 生成并复制token

ChainlessChain配置：
```
用户名: 你的GitHub用户名
密码: 粘贴生成的token
保存凭据: ✓（可选）
```

**方式B：使用SSH**

生成SSH密钥：
```bash
ssh-keygen -t ed25519 -C "your_email@example.com"
cat ~/.ssh/id_ed25519.pub
```

添加到GitHub：
- GitHub > Settings > SSH and GPG keys > New SSH key
- 粘贴公钥内容

ChainlessChain配置：
```
认证方式: SSH
SSH密钥路径: ~/.ssh/id_ed25519
```

**5. 初始推送**

```
设置 > Git配置 > 同步
- 点击 "推送到远程"
- 等待上传完成
- 查看GitHub仓库，应该看到所有笔记文件
```

**6. 配置自动同步**

```
设置 > Git配置 > 自动同步
- 启用自动同步: ✓
- 同步间隔: 30分钟
- 自动推送: ✓
- 自动拉取: ✓
```

**7. 测试同步**

1. 在电脑A上创建一个新笔记 "同步测试"
2. 等待自动同步或手动推送
3. 在电脑B上拉取
4. 验证笔记出现在电脑B

#### 预期结果

- GitHub/GitLab上看到所有笔记文件
- 多设备间笔记自动同步
- 查看Git历史可以看到所有提交

#### 故障排除

**问题1：推送失败 - 认证错误**

解决：
- 检查用户名和token是否正确
- Token权限是否包含 `repo`
- 尝试重新生成token

**问题2：冲突**

场景：两台设备同时修改了同一笔记

解决：
```
1. 系统检测到冲突
2. 弹出冲突解决界面
3. 三栏对比：本地 | 合并结果 | 远程
4. 选择保留内容
5. 确认解决
```

**问题3：推送被拒绝**

原因：远程有新提交

解决：
```
1. 先拉取远程更改
2. 解决冲突（如有）
3. 再推送
```

---

## 知识库管理教程

### 教程4: 构建个人知识库

**难度**: 🟡 中级
**时间**: 30分钟
**目标**: 学会组织和管理大量笔记

#### 前置条件

- 了解基础笔记操作
- 有一定数量的笔记或文档需要整理

#### 步骤

**1. 规划知识库结构**

设计文件夹层级（示例）：

```
📁 我的知识库/
├── 📁 工作/
│   ├── 📁 项目A/
│   ├── 📁 项目B/
│   └── 📁 会议记录/
├── 📁 学习/
│   ├── 📁 编程/
│   │   ├── 📁 Python/
│   │   ├── 📁 JavaScript/
│   │   └── 📁 算法/
│   ├── 📁 英语/
│   └── 📁 专业知识/
├── 📁 生活/
│   ├── 📁 健康/
│   ├── 📁 旅行/
│   └── 📁 美食/
└── 📁 归档/
```

**2. 创建文件夹结构**

```
知识库 > 右键 > 新建文件夹
- 输入文件夹名
- 支持多层级嵌套
- 拖拽调整顺序
```

**3. 设计标签体系**

标签原则：
- **分类标签**：`#工作` `#学习` `#生活`
- **状态标签**：`#待处理` `#进行中` `#已完成`
- **优先级标签**：`#重要` `#紧急`
- **内容类型**：`#教程` `#笔记` `#代码`
- **主题标签**：`#Python` `#Docker` `#AI`

创建标签：
```
设置 > 标签管理
- 创建标签组
- 设置颜色
- 添加描述
```

**4. 批量导入文档**

```
知识库 > 导入 > 批量导入
- 选择文件夹（包含多个文档）
- 选择目标文件夹
- 自动识别格式（MD/PDF/Word/TXT）
- 点击导入
- 等待处理完成
```

**5. 整理现有笔记**

**按主题归类**：
- 筛选相关笔记（使用搜索或标签）
- 批量选择（Ctrl+点击）
- 拖拽到对应文件夹

**添加标签**：
- 批量选择笔记
- 右键 > 添加标签
- 选择或输入标签
- 应用

**6. 建立笔记间关联**

使用双向链接：
```markdown
这个概念与 [[Docker容器化]] 相关。

参考：
- [[Kubernetes入门]]
- [[微服务架构]]
```

**7. 设置收藏和置顶**

重要笔记：
```
笔记 > 右键 > 收藏（⭐）
或
笔记 > 右键 > 置顶
```

**8. 配置视图**

```
知识库 > 视图设置
- 列表视图：详细信息
- 卡片视图：图文并茂
- 时间线视图：按时间排序
- 思维导图视图：关系可视化
```

#### 预期结果

- 结构清晰的文件夹层级
- 所有笔记都有合适的标签
- 笔记间建立了关联
- 能快速找到需要的内容

#### 最佳实践

**定期维护**：
- 每周回顾和整理
- 删除过时笔记
- 更新标签
- 优化结构

**遵循命名规范**：
- 笔记：`[日期] 主题 - 副标题`
- 文件夹：简洁明了
- 标签：统一大小写

**使用模板**：
```
创建笔记模板
- 会议记录模板
- 学习笔记模板
- 项目文档模板
```

---

### 教程5: 高级搜索与RAG

**难度**: 🟡 中级
**时间**: 20分钟
**目标**: 掌握全文搜索和AI语义搜索

#### 前置条件

- 有一定数量的笔记
- 了解基础搜索功能

#### 步骤

**1. 全文搜索基础**

打开搜索（`Ctrl+P` 或 `Ctrl+F`）：

**简单搜索**：
```
Docker
→ 返回所有包含"Docker"的笔记
```

**精确匹配**：
```
"Docker Compose"
→ 完全匹配这个短语
```

**排除关键词**：
```
Docker -Kubernetes
→ 包含Docker但不包含Kubernetes
```

**2. 高级搜索语法**

**使用运算符**：
```
Docker AND Kubernetes
Docker OR Podman
Docker NOT Swarm
```

**通配符**：
```
Dock*       # Docker, Dockerfile等
*container  # container, subcontainer等
```

**正则表达式**：
```
启用正则：设置 > 搜索 > 正则表达式
/docker-\d+/  # 匹配 docker-1, docker-2等
```

**3. 字段搜索**

```
标题:Docker          # 仅搜索标题
标签:#Python         # 搜索标签
内容:函数            # 仅搜索正文
作者:张三            # 按作者搜索
```

**4. 时间范围搜索**

```
创建时间:最近7天
修改时间:2025-01-01..2026-01-01
```

**5. 组合筛选**

```
高级搜索 > 筛选器
- 关键词: Docker
- 标签: #教程 #容器化
- 文件夹: /学习/编程/
- 日期: 最近30天
- 排序: 相关度降序
```

**6. RAG语义搜索**

切换到"智能搜索"模式：

**自然语言提问**：
```
如何在Docker中配置网络？
```

系统会：
1. 理解问题意图
2. 向量搜索相关笔记片段
3. 重排序获取最相关内容
4. 生成答案并引用来源

**查看搜索结果**：
```
结果1: Docker网络配置指南
相关度: 0.92
片段: "Docker支持多种网络模式：bridge、host、overlay..."
来源: /学习/Docker/网络配置.md

结果2: 容器间通信
相关度: 0.85
片段: "配置自定义网络：docker network create..."
来源: /学习/Docker/高级教程.md
```

**7. 调整RAG参数**

```
设置 > RAG配置
- 返回结果数: 5
- 相似度阈值: 0.7（0-1，越高越严格）
- 重排序: 启用
- 包含来源: 启用
```

**8. 保存搜索**

常用搜索可保存：
```
高级搜索 > 保存搜索
- 名称: "Python相关教程"
- 条件: 标签:#Python AND 类型:教程
- 固定到侧边栏
```

#### 预期结果

- 能精确找到需要的笔记
- 语义搜索返回高度相关结果
- 理解如何优化搜索效果

#### 搜索技巧

**提高搜索准确度**：
1. 使用具体关键词
2. 添加字段限定
3. 利用标签筛选
4. 调整相似度阈值

**语义搜索最佳实践**：
- 用完整问句而非关键词
- 描述具体场景
- 参考AI给出的来源笔记

---

### 教程6: 导入和整理文档

**难度**: 🟢 初级
**时间**: 20分钟
**目标**: 批量导入各类文档并整理

#### 步骤

**1. 准备文档**

支持的格式：
- Markdown (`.md`)
- PDF (`.pdf`)
- Word (`.docx`)
- 纯文本 (`.txt`)
- 图片 (`.png`, `.jpg`) - 自动OCR

**2. 单文件导入**

```
知识库 > 导入 > 导入文件
- 选择文件
- 选择目标文件夹
- 配置选项:
  ✓ 提取图片（PDF/Word）
  ✓ OCR识别（图片）
  ✓ 自动添加标签
- 点击导入
```

**3. 批量导入**

```
知识库 > 导入 > 批量导入
- 选择包含文档的文件夹
- 文件类型筛选（可选）
- 导入规则:
  □ 保持原文件夹结构
  ✓ 按文件类型分类
  □ 全部导入到指定文件夹
- 开始导入
- 查看进度和日志
```

**4. PDF文档处理**

**文本PDF**：
- 直接提取文本
- 保留格式
- 提取图片

**扫描PDF**（图片）：
- 启用OCR
- 识别文字
- 生成可搜索的文本

配置：
```
导入选项 > PDF设置
- OCR语言: 中文+英文
- 图片质量: 高
- 保留原文件: ✓
```

**5. Word文档处理**

自动转换为Markdown：
- 标题 → Markdown标题
- 加粗/斜体 → Markdown格式
- 表格 → Markdown表格
- 图片 → 保存到附件

**6. 图片OCR**

```
导入图片 > 启用OCR
- 自动识别文字
- 生成可编辑文本
- 保留原图附件

支持场景:
- 书籍扫描
- 名片识别
- 手写笔记
```

**7. 导入后整理**

**自动分类**：
```
工具 > AI助手 > 自动分类
- 选择笔记
- AI分析内容
- 建议标签和文件夹
- 批量应用
```

**批量编辑**：
```
选择多个笔记 > 右键 > 批量编辑
- 添加标签
- 移动文件夹
- 设置属性
```

#### 预期结果

- 所有文档成功导入
- PDF和Word转换为Markdown
- 图片文字被识别
- 笔记自动分类和打标签

---

## AI功能教程

### 教程7: 配置本地LLM

**难度**: 🟡 中级
**时间**: 30分钟
**目标**: 配置Ollama本地大语言模型

#### 前置条件

- 硬件：8GB+ RAM，最好有GPU
- Docker已安装（可选）

#### 步骤

**方式A：Docker部署（推荐）**

**1. 启动Docker服务**

```bash
cd /path/to/chainlesschain
docker-compose up -d ollama
```

**2. 拉取模型**

```bash
# 中文模型（推荐）
docker exec chainlesschain-ollama ollama pull qwen2:7b

# 或英文模型
docker exec chainlesschain-ollama ollama pull llama3:8b

# 小模型（适合低配置）
docker exec chainlesschain-ollama ollama pull qwen2:1.5b
```

**3. 测试模型**

```bash
docker exec -it chainlesschain-ollama ollama run qwen2:7b
>>> 你好！请介绍一下自己。
```

**方式B：本地安装**

**1. 下载Ollama**

Windows/macOS/Linux:
- 访问 https://ollama.com/download
- 下载对应平台安装包
- 安装

**2. 拉取模型**

```bash
ollama pull qwen2:7b
```

**3. 启动服务**

```bash
ollama serve
# 默认端口: 11434
```

**配置ChainlessChain**

```
设置 > LLM配置
- 服务类型: Ollama (本地)
- 地址: http://localhost:11434
- 模型: qwen2:7b
- 测试连接
```

**GPU加速配置**

**NVIDIA GPU**:
```bash
# 检查GPU
nvidia-smi

# Docker GPU支持
docker-compose -f docker-compose-gpu.yml up -d
```

**性能优化**

```
设置 > LLM配置 > 高级
- Context Length: 4096（上下文长度）
- Num GPU: 1（GPU数量）
- Num Thread: 8（CPU线程）
- 启用量化: ✓（加速推理）
```

#### 预期结果

- Ollama服务正常运行
- 模型拉取成功
- ChainlessChain能连接并调用模型
- AI对话流畅

#### 故障排除

**问题：模型下载慢**

解决：
```bash
# 使用国内镜像（配置环境变量）
export OLLAMA_HOST=https://ollama.example.com
```

**问题：GPU未被使用**

检查：
```bash
# 查看Ollama日志
docker logs chainlesschain-ollama

# 确认GPU驱动
nvidia-docker version
```

**问题：内存不足**

解决：
- 使用更小的模型（1.5b）
- 减少context length
- 启用量化

---

### 教程8: 使用提示词模板

**难度**: 🟢 初级
**时间**: 15分钟
**目标**: 掌握提示词模板提高AI效率

#### 步骤

**1. 浏览内置模板**

```
AI助手 > 提示词模板
- 分类：办公、学习、创作、编程
- 预览模板
```

**2. 使用模板**

**示例：会议纪要生成**

1. 选择模板："会议纪要生成器"
2. 填写变量：
   ```
   会议主题: 产品需求评审
   参与人员: 张三、李四、王五
   会议时间: 2026-01-03 14:00
   讨论内容: [粘贴会议记录或录音转文字]
   ```
3. 点击"应用"
4. AI生成格式化的会议纪要

**生成结果**：
```markdown
# 产品需求评审会议纪要

**时间**: 2026-01-03 14:00
**参与人**: 张三、李四、王五

## 会议议题
1. 新功能需求讨论
2. 技术方案评审
3. 排期安排

## 决议事项
- [ ] 张三负责前端开发（截止1月10日）
- [ ] 李四负责后端API（截止1月12日）
- [ ] 王五负责测试用例（截止1月15日）

## 下次会议
2026-01-10 14:00 - 进度Review
```

**3. 创建自定义模板**

```
提示词模板 > 创建模板
- 名称: 技术文章大纲生成
- 分类: 创作
- 描述: 生成技术文章大纲
```

**模板内容**：
```
你是一个专业的技术写作助手。

请根据以下主题生成一篇技术文章的大纲：

主题: {{主题}}
目标读者: {{读者水平}}
文章长度: {{字数}}字

要求:
1. 大纲包含3-5个主要章节
2. 每个章节包含2-3个子主题
3. 突出实践性和代码示例
4. 包含总结和延伸阅读

请以Markdown格式输出大纲。
```

**定义变量**：
```
变量1:
- 名称: 主题
- 类型: 文本
- 默认值: Docker容器化

变量2:
- 名称: 读者水平
- 类型: 选择
- 选项: 初级、中级、高级

变量3:
- 名称: 字数
- 类型: 数字
- 默认值: 3000
```

**4. 使用自定义模板**

```
AI助手 > 提示词模板 > 技术文章大纲生成
- 主题: Kubernetes入门
- 读者水平: 中级
- 字数: 5000
- 生成
```

**5. 分享模板**

```
模板 > 导出
- 生成分享链接
- 或导出为JSON文件
- 他人可导入使用
```

#### 预期结果

- 熟练使用内置模板
- 能创建自定义模板
- AI生成内容更精准

---

### 教程9: AI辅助写作

**难度**: 🟡 中级
**时间**: 25分钟
**目标**: 利用AI提升写作效率

#### 实战场景

**场景1：写作大纲生成**

**目标**：撰写一篇《Rust入门教程》

**步骤**：

1. 新建笔记："Rust入门教程"
2. 打开AI助手（侧边栏）
3. 输入提示词：
   ```
   请为《Rust入门教程》生成文章大纲，
   目标读者是有Python/Java基础的开发者，
   文章长度5000字左右。
   ```

4. AI生成大纲：
   ```markdown
   # Rust入门教程

   ## 1. 为什么选择Rust？
   - 内存安全
   - 高性能
   - 并发编程

   ## 2. 环境搭建
   - 安装Rust
   - Hello World
   - Cargo包管理

   ## 3. 核心概念
   - 所有权系统
   - 借用和引用
   - 生命周期

   ...
   ```

5. 复制大纲到笔记

**场景2：章节展开**

选中大纲中的某一章节，例如"所有权系统"：

```
AI助手 > 右键 > 展开章节
或直接提问: 请详细展开"所有权系统"这一章节
```

AI生成详细内容：
```markdown
## 3.1 所有权系统

Rust的所有权系统是其最独特的特性...

### 所有权规则
1. 每个值都有一个所有者
2. 同一时间只能有一个所有者
3. 所有者离开作用域，值被丢弃

### 代码示例
​```rust
fn main() {
    let s1 = String::from("hello");
    let s2 = s1; // s1所有权移动到s2
    // println!("{}", s1); // 错误！s1不再有效
}
​```

### 深入理解
...
```

**场景3：代码示例生成**

```
提问: 请提供一个Rust所有权转移的完整示例，包括注释说明
```

**场景4：内容改写**

选中一段文字，右键 > AI改写：
- 简化表达
- 扩展说明
- 调整语气（正式/口语化）
- 翻译（中英互译）

**场景5：语法检查**

```
工具 > AI > 语法检查
- 自动检测拼写错误
- 语法问题
- 表达建议
```

#### 写作流程

```
1. 确定主题和大纲（AI辅助）
   ↓
2. 逐章节展开（AI生成初稿）
   ↓
3. 人工审阅和修改
   ↓
4. 添加代码示例（AI辅助）
   ↓
5. 语法和表达优化（AI检查）
   ↓
6. 最终审阅和发布
```

#### 预期结果

- 写作效率提升50%+
- 内容结构更清晰
- 代码示例准确
- 表达更专业

---

## 项目管理教程

### 教程10: 创建和管理项目

**难度**: 🟡 中级
**时间**: 30分钟
**目标**: 创建项目并进行任务管理

#### 步骤

**1. 创建项目**

```
侧边栏 > 项目管理 > 新建项目
```

**填写项目信息**：
```
项目名称: ChainlessChain插件开发
描述: 为ChainlessChain开发一个Markdown增强插件
项目根目录: /path/to/markdown-plugin
开始日期: 2026-01-03
截止日期: 2026-02-01
标签: #开发 #插件
```

**2. 设置项目成员**

```
项目详情 > 成员管理
- 添加成员（DID或邮箱）
- 分配角色:
  * 管理员: 张三
  * 开发者: 李四
  * 测试: 王五
```

**3. 创建任务**

**任务1：需求分析**
```
新建任务
- 标题: 需求分析和功能设计
- 描述:
  1. 调研现有Markdown编辑器
  2. 确定核心功能列表
  3. 设计UI原型
- 优先级: 高
- 指派给: 张三
- 截止日期: 2026-01-05
- 标签: #需求 #设计
```

**任务2：开发**
```
标题: 实现核心功能
子任务:
  - [ ] Markdown语法高亮
  - [ ] 实时预览
  - [ ] 图片上传
  - [ ] 代码块增强
指派给: 李四
截止日期: 2026-01-20
依赖: "需求分析和功能设计"
```

**任务3：测试**
```
标题: 功能测试
子任务:
  - [ ] 单元测试
  - [ ] 集成测试
  - [ ] 用户测试
指派给: 王五
截止日期: 2026-01-25
依赖: "实现核心功能"
```

**4. 使用看板视图**

```
项目 > 看板视图
```

**看板列**：
```
待办 | 进行中 | 审核中 | 已完成
───────────────────────────────
任务1 | 任务2    | 任务3   |
     |          |         |
```

**拖拽任务**：
- 将任务从"待办"拖到"进行中"
- 状态自动更新
- 触发通知

**5. 任务详情管理**

点击任务卡片打开详情：

**添加评论**：
```
@李四 功能开发得怎么样了？需要帮助吗？
```

**上传附件**：
- 设计稿
- 需求文档
- 代码片段

**记录工时**：
```
工时记录:
- 2026-01-03: 3小时（需求调研）
- 2026-01-04: 5小时（原型设计）
总计: 8小时
```

**6. 项目统计**

```
项目 > 统计面板
```

**查看指标**：
- 任务完成率: 15/20 (75%)
- 进度: 80%
- 剩余工时: 40小时
- 燃尽图: [图表]

**7. 项目文档关联**

将相关笔记关联到项目：
```
笔记 > 右键 > 关联到项目 > ChainlessChain插件开发
```

项目中查看所有关联笔记。

#### 预期结果

- 项目创建成功
- 任务清晰分配
- 进度可视化
- 团队协作高效

---

### 教程11: 任务跟踪与看板

**难度**: 🟢 初级
**时间**: 15分钟
**目标**: 使用看板管理任务流程

#### 步骤

**1. 自定义看板列**

```
项目 > 看板设置 > 自定义列
```

**添加列**：
```
待办 → 设计中 → 开发中 → 测试中 → 已完成
```

**设置列规则**：
- **待办**: 所有新建任务默认进入
- **设计中**: 自动通知设计师
- **开发中**: 限制最多5个任务（WIP限制）
- **测试中**: 自动通知测试人员
- **已完成**: 自动归档

**2. 创建任务卡片**

快速创建任务：
```
看板 > 待办列 > + 新建任务
- 标题: 修复用户登录bug
- 快速指派: @李四
- Enter保存
```

**3. 移动任务**

**拖拽移动**：
- 鼠标拖动任务卡片到目标列
- 状态自动更新
- 触发自动化规则

**批量移动**：
- 选择多个任务（Ctrl+点击）
- 右键 > 批量移动到...
- 选择目标列

**4. 任务筛选**

```
看板 > 筛选器
- 指派给我: ✓
- 优先级: 高
- 标签: #bug
- 截止日期: 本周
```

**5. 设置自动化规则**

```
项目设置 > 自动化
```

**规则1：任务状态变更通知**
```
当任务移动到"测试中"
→ 通知测试团队
→ 添加标签 #待测试
→ 更新截止日期为3天后
```

**规则2：逾期提醒**
```
当任务超过截止日期
→ 发送邮件给负责人
→ 标记为红色
→ 自动升级优先级
```

**6. 泳道视图**

```
看板 > 泳道视图
```

**按成员分组**：
```
张三: [任务1] [任务2]
李四: [任务3] [任务4] [任务5]
王五: [任务6]
```

**按优先级分组**：
```
紧急: [任务1]
高:   [任务2] [任务3]
中:   [任务4] [任务5] [任务6]
低:   [任务7]
```

**7. 看板快捷操作**

- `E`: 快速编辑任务
- `D`: 设置截止日期
- `C`: 添加评论
- `Del`: 删除任务
- `Space`: 标记完成/未完成

#### 预期结果

- 看板配置完成
- 任务流转顺畅
- 自动化规则生效
- 团队协作可视化

---

### 教程12: 项目协作与分享

**难度**: 🟡 中级
**时间**: 20分钟
**目标**: 与他人协作并分享项目进度

#### 步骤

**1. 生成分享链接**

```
项目详情 > 分享按钮
```

**配置分享选项**：
```
访问权限:
  ○ 公开（任何人可见）
  ○ 加密访问（需要密码）
  ● 仅限受邀成员

权限级别:
  ○ 只读（查看）
  ● 评论（查看+评论）
  ○ 编辑（完整权限）

有效期:
  ○ 7天
  ○ 30天
  ● 永久

生成链接
```

**获得链接**：
```
https://share.chainlesschain.com/project/abc123xyz

或

分享码: ABC-123-XYZ
```

**2. 邀请成员**

```
项目 > 成员管理 > 邀请成员
```

**方式A：通过DID**
```
输入成员DID: did:chain:user123
选择角色: 开发者
发送邀请
```

**方式B：通过邮箱**
```
输入邮箱: user@example.com
系统发送邀请邮件
对方注册后自动加入项目
```

**3. 设置成员权限**

```
成员列表 > 点击成员 > 权限设置
```

**权限矩阵**：
```
          查看 创建 编辑 删除 管理
管理员     ✓    ✓    ✓    ✓    ✓
开发者     ✓    ✓    ✓    ✗    ✗
测试       ✓    ✓    ✗    ✗    ✗
访客       ✓    ✗    ✗    ✗    ✗
```

**4. 实时协作**

**同时编辑**：
- 多人可同时查看和编辑任务
- 实时显示其他人的光标位置
- 自动合并更改
- 冲突提示

**在线状态**：
```
成员列表显示:
● 张三（在线）
● 李四（在线）
○ 王五（离线）
```

**5. 评论与讨论**

**任务评论**：
```
任务详情 > 评论区
@李四 这个功能的UI设计稿在哪里？

李四回复:
已上传到附件，请查看 design-v2.png
```

**项目讨论区**：
```
项目 > 讨论
- 创建话题
- @提及成员
- 支持Markdown
- 可添加投票
```

**6. 版本发布**

完成阶段性工作后发布版本：
```
项目 > 版本管理 > 发布新版本
- 版本号: v1.0.0
- 更新说明:
  * 新增Markdown语法高亮
  * 实时预览功能
  * 修复了10个bug
- 标签: #release
- 发布
```

**7. 导出项目报告**

```
项目 > 导出报告
- 格式: PDF / Word / Markdown
- 内容:
  ✓ 项目概述
  ✓ 任务清单
  ✓ 进度统计
  ✓ 成员贡献
  ✓ 时间线
- 生成报告
```

#### 预期结果

- 团队成员成功加入
- 实时协作顺畅
- 讨论和反馈及时
- 项目进度透明

---

## 安全与隐私教程

### 教程13: 配置U-Key硬件加密

**难度**: 🔴 高级
**时间**: 40分钟
**目标**: 启用硬件级加密保护数据

#### 前置条件

- U-Key硬件设备（Windows完整支持，macOS/Linux仅模拟）
- 了解硬件加密基础概念

#### 步骤

**1. 插入U-Key设备**

Windows:
```
1. 插入USB接口
2. 系统自动检测
3. 安装驱动（如需要）
4. ChainlessChain检测到设备
```

**2. 初始化U-Key**

```
设置 > U-Key管理 > 初始化设备
```

**设置PIN码**：
```
输入PIN码: ******（6-16位）
确认PIN码: ******
提示: 设置一个安全但你能记住的PIN码
```

**生成密钥对**：
```
选择算法: RSA 2048（推荐）
或
选择算法: ECC 256（速度更快）

点击"生成密钥对"
等待生成完成（约10秒）
```

**3. 导出恢复密钥**

**非常重要**：
```
U-Key管理 > 导出恢复密钥
- 输入PIN码验证
- 生成24位恢复密钥
```

**恢复密钥示例**：
```
ABCD-1234-EFGH-5678-IJKL-9012
```

**妥善保管**：
- 写在纸上，存放在安全地方
- 或存入密码管理器（如1Password、Bitwarden）
- **切勿存在电脑上**

**4. 启用数据库加密**

```
设置 > 安全 > 数据库加密
- 加密方式: U-Key硬件加密
- 点击"启用加密"
- 输入PIN码
- 等待加密完成
```

**加密过程**：
```
正在加密数据库...
进度: ████████████ 100%
完成！数据库已加密。
```

**5. 配置自动锁定**

```
设置 > 安全 > 自动锁定
- 空闲时间: 15分钟
- 锁定后需要PIN码解锁
- 启用
```

**6. 设置DID身份**

使用U-Key签名创建DID：
```
社交 > 身份管理 > 创建DID
- 昵称: 张三
- 使用U-Key签名: ✓
- 输入PIN码
- 生成DID: did:chain:abc123...
```

**7. 测试加密**

**创建加密笔记**：
```
新建笔记
- 标题: 敏感信息
- 内容: 这是需要加密的内容
- 右键 > 加密笔记
- 使用U-Key加密
- 输入PIN码
```

**查看加密笔记**：
- 需要U-Key插入
- 需要输入PIN码
- 解密后显示内容

**8. 多设备使用**

**备份U-Key**：
```
推荐购买备用U-Key
U-Key管理 > 复制到备用设备
- 插入备用U-Key
- 输入原U-Key的PIN码
- 克隆密钥对
```

**在新设备使用**：
```
1. 安装ChainlessChain
2. 插入U-Key
3. 输入PIN码
4. 自动解密数据库
```

#### 预期结果

- U-Key初始化成功
- 数据库硬件加密
- DID身份绑定U-Key
- 恢复密钥已备份

#### 安全提示

**PIN码安全**：
- 不使用生日、手机号
- 连续输错3次锁定
- 定期更换PIN码

**设备安全**：
- 妥善保管U-Key
- 不要与他人共享
- 丢失后立即撤销

**恢复密钥**：
- 唯一的恢复手段
- 务必备份
- 多地点保存

---

### 教程14: P2P加密通信

**难度**: 🟡 中级
**时间**: 25分钟
**目标**: 与好友进行端到端加密通信

#### 步骤

**1. 创建/使用DID身份**

如果还没有DID：
```
社交 > 身份管理 > 创建DID
- 昵称: 张三
- 头像: [上传]
- 签名: 使用U-Key（如有）或软件签名
- 创建

获得DID: did:chain:zhang123
```

**2. 生成身份二维码**

```
身份管理 > 我的DID > 二维码
- 显示二维码
- 包含DID、昵称、公钥
```

**3. 添加好友**

**方式A：扫描二维码**（面对面）
```
社交 > 好友 > 添加好友 > 扫描二维码
- 扫描对方的DID二维码
- 发送好友请求
- 等待对方同意
```

**方式B：输入DID**（远程）
```
社交 > 好友 > 添加好友 > 输入DID
- DID: did:chain:li456
- 备注: 李四
- 发送请求
```

**4. 建立加密信道**

好友同意后：
```
系统自动:
1. 交换公钥
2. 建立Signal Protocol加密信道
3. 生成会话密钥
4. 准备就绪
```

**5. 发送加密消息**

```
好友列表 > 李四 > 发送消息
```

**文本消息**：
```
输入: 你好！这是加密消息。
发送 → 自动端到端加密
```

**图片消息**：
```
点击图片按钮
- 选择图片
- 自动压缩和加密
- 发送
```

**文件消息**：
```
点击文件按钮
- 选择文件（限制10MB）
- 自动加密
- 发送
```

**笔记分享**：
```
知识库 > 选择笔记 > 分享给好友
- 选择: 李四
- 权限: 只读/可编辑
- 有效期: 7天
- 发送
```

**6. 接收消息**

```
收到消息提示
点击查看
系统自动解密并显示
```

**7. 阅后即焚**

发送自毁消息：
```
输入消息
点击 "⏱" 按钮
- 设置倒计时: 10秒
- 发送
- 对方阅读后10秒自动删除
```

**8. 加密通话**（开发中）

```
好友详情 > 语音通话
- P2P建立连接
- 实时加密音频流
- 低延迟通话
```

#### 预期结果

- DID身份创建成功
- 添加好友并建立加密信道
- 消息端到端加密
- 无中间人可读取

#### 隐私说明

**加密算法**：
- Signal Protocol（双棘轮算法）
- 完美前向保密（Perfect Forward Secrecy）
- 即使私钥泄露，历史消息仍安全

**服务器角色**：
- 仅转发加密数据包
- 不存储明文内容
- 不知道消息内容

**离线消息**：
- 加密后存储在P2P网络
- 上线后自动接收
- 保留7天后删除

---

## 高级功能教程

### 教程15: 自定义技能和工具

**难度**: 🔴 高级
**时间**: 45分钟
**目标**: 创建自定义AI技能和工具

#### 步骤

**1. 创建自定义工具**

```
设置 > Skill-Tool系统 > 工具管理 > 创建工具
```

**示例：天气查询工具**

**基本信息**：
```
工具ID: weather_query
显示名称: 天气查询
描述: 查询指定城市的天气信息
工具类型: API
分类: 生活服务
风险等级: 1（低风险）
```

**参数定义**：
```json
{
  "type": "object",
  "properties": {
    "city": {
      "type": "string",
      "description": "城市名称，如'北京'、'上海'"
    },
    "date": {
      "type": "string",
      "description": "日期，格式：YYYY-MM-DD，默认今天",
      "default": "today"
    }
  },
  "required": ["city"]
}
```

**返回值定义**：
```json
{
  "type": "object",
  "properties": {
    "temperature": {
      "type": "number",
      "description": "温度（摄氏度）"
    },
    "weather": {
      "type": "string",
      "description": "天气状况"
    },
    "humidity": {
      "type": "number",
      "description": "湿度（%）"
    }
  }
}
```

**执行逻辑**（JavaScript）：
```javascript
async function execute(params) {
  const { city, date } = params;

  try {
    // 调用天气API（示例使用和风天气）
    const response = await fetch(
      `https://api.qweather.com/v7/weather/now?location=${city}&key=YOUR_API_KEY`
    );

    const data = await response.json();

    if (data.code === '200') {
      return {
        success: true,
        data: {
          temperature: parseFloat(data.now.temp),
          weather: data.now.text,
          humidity: parseFloat(data.now.humidity)
        }
      };
    } else {
      return {
        success: false,
        error: '查询失败: ' + data.code
      };
    }
  } catch (error) {
    return {
      success: false,
      error: error.message
    };
  }
}

module.exports = { execute };
```

**配置选项**：
```json
{
  "apiKey": {
    "type": "string",
    "description": "和风天气API密钥",
    "required": true
  },
  "timeout": {
    "type": "number",
    "description": "超时时间（毫秒）",
    "default": 5000
  }
}
```

**测试工具**：
```
点击"测试"按钮
输入参数:
{
  "city": "北京"
}

执行结果:
{
  "success": true,
  "data": {
    "temperature": 5,
    "weather": "晴",
    "humidity": 45
  }
}
```

**2. 创建自定义技能**

```
Skill-Tool系统 > 技能管理 > 创建技能
```

**示例：天气播报技能**

**基本信息**：
```
技能ID: weather_report
显示名称: 天气播报
分类: 生活服务
描述: 查询天气并生成播报文案
```

**关联工具**：
```
选择工具:
- weather_query（天气查询）
```

**提示词模板**：
```
你是一个专业的天气播报员。

请根据以下天气信息，生成一段友好、专业的天气播报：

城市: {{city}}
温度: {{temperature}}°C
天气: {{weather}}
湿度: {{humidity}}%
日期: {{date}}

要求:
1. 语言亲切自然
2. 提供穿衣建议
3. 如有特殊天气（高温、雨雪等）给出提醒
4. 100字以内

请生成播报文案。
```

**技能执行流程**：
```javascript
async function execute(input) {
  // 1. 调用天气查询工具
  const weatherData = await callTool('weather_query', {
    city: input.city,
    date: input.date
  });

  if (!weatherData.success) {
    return {
      success: false,
      error: '天气查询失败'
    };
  }

  // 2. 填充提示词模板
  const prompt = fillTemplate(this.promptTemplate, {
    city: input.city,
    temperature: weatherData.data.temperature,
    weather: weatherData.data.weather,
    humidity: weatherData.data.humidity,
    date: input.date || 'today'
  });

  // 3. 调用LLM生成播报
  const report = await callLLM({
    messages: [
      { role: 'user', content: prompt }
    ],
    temperature: 0.7
  });

  return {
    success: true,
    data: {
      report: report.content,
      weatherData: weatherData.data
    }
  };
}
```

**3. 测试技能**

```
技能列表 > 天气播报 > 测试
输入: { "city": "北京" }

执行...

输出:
{
  "report": "北京今天天气晴朗，气温5°C，湿度45%。天气较冷，建议穿着保暖外套。适合户外活动，但要注意防寒保暖哦！",
  "weatherData": {
    "temperature": 5,
    "weather": "晴",
    "humidity": 45
  }
}
```

**4. 在AI对话中使用**

```
AI助手 > 新对话
输入: 帮我查一下明天北京的天气

AI自动:
1. 识别意图：查询天气
2. 调用技能：weather_report
3. 返回播报文案
```

#### 预期结果

- 自定义工具创建成功
- 自定义技能正常工作
- AI对话中可以调用

---

### 教程16: 开发第一个插件

**难度**: 🔴 高级
**时间**: 60分钟
**目标**: 开发一个简单的插件

详见 [PLUGIN_DEVELOPMENT.md](./PLUGIN_DEVELOPMENT.md) 中的完整教程。

**快速开始**：

```bash
# 1. 安装CLI工具
npm install -g @chainlesschain/cli

# 2. 创建插件项目
chainless create-plugin word-count

# 3. 进入目录
cd word-count

# 4. 开发
npm run dev

# 5. 测试
# 在ChainlessChain中启用插件

# 6. 打包发布
npm run build
chainless publish
```

---

### 教程17: 知识付费与交易

**难度**: 🟡 中级
**时间**: 30分钟
**目标**: 发布付费内容并进行交易

#### 步骤

**1. 设置数字钱包**

```
交易 > 钱包
- 查看DID钱包地址
- 余额: 0 CHAIN
```

**充值（测试）**：
```
钱包 > 充值
- 选择测试网络
- 获取测试币（Faucet）
- 确认到账
```

**2. 发布付费笔记**

```
知识库 > 选择笔记 > 知识付费
```

**配置付费信息**：
```
笔记: 《Docker高级实战教程》
定价: 9.9 CHAIN
试读: 前3段（可选）
版权声明: 个人使用，不可转售
标签: #教程 #Docker #付费
```

**设置智能合约**：
```
合约类型: 知识付费标准合约
买方权限:
  - 永久查看
  - 不可下载
  - 不可转售
卖方收益: 95%（平台收取5%手续费）
```

**发布到市场**：
```
发布 → 上架到知识市场
分类: 技术 > 容器化
```

**3. 浏览知识市场**

```
交易 > 知识市场
- 浏览分类
- 搜索内容
- 查看评价
- 筛选价格
```

**4. 购买付费内容**

```
市场 > 《Kubernetes生产实践》
- 查看试读
- 价格: 19.9 CHAIN
- 评分: 4.8⭐ (120评价)
- 点击购买
```

**确认交易**：
```
购买确认:
- 内容: Kubernetes生产实践
- 价格: 19.9 CHAIN
- 卖家: did:chain:expert123
- 使用U-Key签名: ✓
- 输入PIN码
- 确认购买
```

**智能合约执行**：
```
1. 扣除19.9 CHAIN from 买方
2. 转账18.9 CHAIN to 卖方（95%）
3. 手续费1.0 CHAIN to 平台（5%）
4. 授予买方访问权限
5. 交易记录上链
```

**5. 查看购买的内容**

```
知识库 > 已购买
- 《Kubernetes生产实践》自动添加
- 标记"已购买"
- 永久访问
```

**6. 评价内容**

```
笔记详情 > 评价
- 评分: 5⭐
- 评论: 内容详实，实战性强，值得购买！
- 提交
```

**7. 查看交易记录**

```
钱包 > 交易记录
- 时间: 2026-01-03 15:30
- 类型: 购买
- 金额: -19.9 CHAIN
- 对方: did:chain:expert123
- 状态: 已确认
- 交易Hash: 0xabc123...
```

**8. 卖家查看收益**

```
钱包 > 我的收益
- 今日收益: 95.6 CHAIN
- 本月收益: 1,234.5 CHAIN
- 待结算: 0 CHAIN
```

**提现**：
```
钱包 > 提现
- 金额: 1000 CHAIN
- 提现到: 钱包地址或银行账户
- 手续费: 10 CHAIN
- 预计到账: 1-3个工作日
- 确认提现
```

#### 预期结果

- 成功发布付费内容
- 完成购买交易
- 智能合约自动执行
- 收益正常结算

#### 安全提示

**买家**：
- 查看卖家信用评分
- 先看试读再购买
- 保存交易凭证
- 及时评价

**卖家**：
- 提供高质量内容
- 设置合理价格
- 及时回复问题
- 维护信誉

---

## 新功能教程 (v0.17.0 - v0.24.0)

### 教程18: MCP 集成与外部工具

**难度**: 🔴 高级
**时间**: 35分钟
**目标**: 配置 MCP 服务器扩展 AI 能力
**版本**: v0.17.0+

#### 前置条件

- 了解 AI 助手基本使用
- 了解命令行操作（可选）

#### 什么是 MCP？

MCP（Model Context Protocol）是一个开放协议，允许 AI 助手安全地连接外部工具和服务。类似于"AI 的插件系统"，但更标准化、更安全。

支持的 MCP 服务器：
- **Filesystem**: 文件读写操作
- **PostgreSQL**: 数据库查询
- **SQLite**: 本地数据库访问
- **Git**: 仓库操作
- **Fetch**: HTTP 请求

#### 步骤

**1. 启用 MCP 系统**

```
设置 > MCP 服务器 > 启用 MCP 系统
- 开关切换到"启用"
- 系统初始化 MCP 客户端
```

**2. 配置 Filesystem 服务器**

```
MCP 服务器 > Filesystem > 配置
```

**服务器设置**：
```json
{
  "enabled": true,
  "command": "npx",
  "args": ["-y", "@modelcontextprotocol/server-filesystem", "D:\\data"],
  "autoConnect": true,
  "permissions": {
    "allowedPaths": ["notes/", "imports/", "exports/"],
    "forbiddenPaths": ["chainlesschain.db", "ukey/"],
    "readOnly": false
  }
}
```

**3. 连接服务器**

```
MCP 服务器 > Filesystem > 连接
- 状态变为"已连接"（绿色）
- 显示可用工具列表
```

**可用工具**：
- `read_file` - 读取文件内容
- `write_file` - 写入文件内容
- `list_directory` - 列出目录
- `create_directory` - 创建目录
- `delete_file` - 删除文件

**4. 在 AI 对话中使用**

```
AI 助手 > 新对话
输入: 请读取 notes/meeting.md 的内容并总结

AI 自动:
1. 识别需要文件操作
2. 调用 MCP read_file 工具
3. 读取文件内容
4. 生成总结
```

**5. 配置 Git 服务器**

```
MCP 服务器 > Git > 配置
```

**服务器设置**：
```json
{
  "enabled": true,
  "command": "npx",
  "args": ["-y", "@modelcontextprotocol/server-git"],
  "permissions": {
    "allowedRepos": ["D:\\projects\\my-project"],
    "allowPush": false
  }
}
```

**6. 使用 Git 工具**

```
AI 助手对话:
输入: 帮我查看最近的 5 次提交记录

AI 调用 git_log 工具，返回:
commit abc123 - 修复登录bug (2天前)
commit def456 - 添加用户管理 (3天前)
...
```

**7. 查看性能指标**

```
设置 > MCP 服务器 > 性能
- 连接时间: 245ms
- 平均调用延迟: 85ms
- 错误率: 0.5%
- 内存使用: 32MB
```

**8. 安全策略配置**

```
MCP 服务器 > 安全设置
- 审计日志: ✓ 启用
- 用户确认: ✓ 高风险操作需确认
- 信任注册表: ✓ 仅允许白名单服务器
```

#### 预期结果

- MCP 服务器连接成功
- AI 可以访问外部工具
- 文件操作正常工作
- 安全策略生效

#### 安全提示

**永久禁止访问的路径**：
- `/data/chainlesschain.db` - 加密数据库
- `/data/ukey/` - 硬件密钥数据
- `/data/did/private-keys/` - DID 私钥
- `/data/p2p/keys/` - P2P 加密密钥

**最佳实践**：
- 只启用需要的服务器
- 限制允许访问的路径
- 定期检查审计日志
- 敏感操作启用用户确认

---

### 教程19: LLM 性能监控与成本优化

**难度**: 🟡 中级
**时间**: 20分钟
**目标**: 监控 LLM 使用并优化成本
**版本**: v0.20.0+

#### 前置条件

- 已使用 AI 助手进行过对话
- 了解 Token 基础概念

#### 步骤

**1. 访问性能仪表板**

```
导航: 系统监控 > LLM 性能仪表板
或直接访问: #/llm/performance
```

**2. 查看统计概览**

仪表板顶部显示关键指标：

```
┌─────────────┬─────────────┬─────────────┬─────────────┐
│ 总调用次数   │ Token 消耗   │ 总成本(USD) │ 缓存命中率   │
│ 1,234       │ 2.5M        │ $12.50      │ 35%         │
└─────────────┴─────────────┴─────────────┴─────────────┘
```

**3. 查看 Token 使用趋势**

**时间范围选择**：
- 最近 24 小时
- 最近 7 天
- 最近 30 天
- 自定义范围

**趋势图显示**：
- 输入 Token（蓝色线）
- 输出 Token（绿色线）
- 缓存 Token（橙色线）

**4. 分析成本分布**

**按提供商（饼图）**：
```
Ollama (本地): 60% - $0.00
阿里云通义: 25% - $8.50
OpenAI: 15% - $4.00
```

**按模型（柱状图）**：
```
qwen2:7b      | ████████████ 1.5M tokens
gpt-4         | ████ 0.5M tokens
qwen-turbo    | ██ 0.3M tokens
```

**5. 查看详细统计表**

```
| 提供商 | 模型 | 调用次数 | 输入Token | 输出Token | 成本 |
|--------|------|----------|-----------|-----------|------|
| Ollama | qwen2:7b | 800 | 1.2M | 0.3M | $0.00 |
| 阿里云 | qwen-turbo | 300 | 0.5M | 0.2M | $8.50 |
| OpenAI | gpt-4 | 134 | 0.3M | 0.2M | $4.00 |
```

**6. 设置预算告警**

```
性能仪表板 > 预算设置
- 月度预算: $50.00
- 告警阈值: 80%
- 当消费达到 $40 时发送提醒
```

**7. 导出报告**

```
性能仪表板 > 导出
- 格式: Excel / CSV / JSON
- 时间范围: 本月
- 包含: 详细调用记录
- 下载
```

**8. 成本优化建议**

**查看优化建议**：
```
性能仪表板 > 优化建议

建议1: 启用响应缓存
- 当前缓存命中率: 35%
- 预期节省: $3.50/月
- 操作: 设置 > AI配置 > 启用缓存

建议2: 使用本地模型处理简单任务
- 检测到 40% 调用为简单问答
- 切换到 Ollama 可节省: $5.00/月
- 操作: 设置 > AI配置 > 智能路由

建议3: 减少上下文长度
- 平均上下文: 8000 tokens
- 建议压缩到: 4000 tokens
- 预期节省: $2.00/月
```

#### 预期结果

- 清晰了解 LLM 使用情况
- 识别成本优化机会
- 设置预算控制
- 生成使用报告

#### 成本优化技巧

**1. 优先使用本地模型**
- Ollama 完全免费
- 适合简单问答和总结任务
- 配置智能路由自动选择

**2. 启用响应缓存**
- 相同问题直接返回缓存结果
- 缓存有效期可配置
- 可提升响应速度

**3. 控制上下文长度**
- 启用智能压缩
- 移除冗余历史消息
- 使用摘要代替完整历史

**4. 选择合适的模型**
- 简单任务: qwen2:1.5b（本地）
- 一般任务: qwen-turbo（便宜）
- 复杂任务: gpt-4（高质量）

---

### 教程20: 会话管理与上下文恢复

**难度**: 🟡 中级
**时间**: 25分钟
**目标**: 管理 AI 会话并恢复上下文
**版本**: v0.21.0+

#### 前置条件

- 已使用 AI 助手进行过对话
- 了解基本的会话概念

#### 步骤

**1. 查看会话列表**

```
AI 助手 > 会话管理
- 显示所有历史会话
- 按时间排序
- 显示会话标题和摘要
```

**2. 搜索历史会话**

```
会话管理 > 搜索
输入: 数据库优化

搜索结果:
- "PostgreSQL 性能优化讨论" (2天前)
- "数据库索引设计" (1周前)
- "SQL 查询优化技巧" (2周前)
```

**搜索选项**：
- 搜索标题: ✓
- 搜索内容: ✓
- 时间范围: 最近30天

**3. 添加会话标签**

```
选择会话 > 右键 > 添加标签
输入: #技术讨论 #数据库
```

**按标签筛选**：
```
会话管理 > 标签筛选 > #技术讨论
- 显示所有带此标签的会话
```

**4. 恢复会话上下文**

```
会话列表 > 选择 "PostgreSQL 性能优化讨论"
点击 "继续对话"
```

**系统自动**：
1. 加载历史消息
2. 压缩长历史
3. 生成上下文摘要
4. 提示续接点

**续接提示**：
```
[系统] 上次我们讨论了 PostgreSQL 索引优化，
您提到想了解查询计划分析。请问需要继续这个话题吗？
```

**5. 生成会话摘要**

```
会话详情 > 生成摘要
```

**摘要结果**：
```
会话摘要:
- 主题: PostgreSQL 性能优化
- 关键点:
  1. 讨论了 B-tree 和 GiST 索引的区别
  2. 分析了慢查询的原因
  3. 提供了 EXPLAIN ANALYZE 使用方法
- 待解决: 查询计划分析实践
```

**6. 导出会话**

**导出为 Markdown**：
```
会话详情 > 导出 > Markdown

生成文件:
# PostgreSQL 性能优化讨论

**日期**: 2026-01-15
**标签**: #技术讨论 #数据库

## 对话内容

**用户**: 如何优化 PostgreSQL 查询？

**AI**: PostgreSQL 查询优化可以从以下几个方面入手...
...
```

**导出为 JSON**：
```
用于备份或迁移
包含完整元数据
```

**7. 使用会话模板**

**保存为模板**：
```
会话详情 > 保存为模板
模板名称: 技术问题讨论模板
描述: 用于技术问题的讨论流程
分类: 技术
```

**从模板创建**：
```
新建会话 > 从模板创建
选择: 技术问题讨论模板
自动填充系统提示词和初始设置
```

**8. 批量管理会话**

```
会话管理 > 批量选择
- 勾选多个会话
- 批量添加标签
- 批量导出
- 批量删除
```

**9. 查看全局统计**

```
会话管理 > 统计
- 总会话数: 156
- 总消息数: 2,340
- 节省 Tokens: 45,000
- 常用标签: #技术讨论 (45), #学习 (32)
```

#### 预期结果

- 会话历史清晰管理
- 快速搜索和筛选
- 上下文无缝恢复
- 节省 Token 消耗

#### 智能压缩说明

SessionManager 自动压缩长会话：

**压缩策略**：
1. 消息去重 - 移除相似消息
2. 历史截断 - 保留最近 N 条
3. 智能总结 - LLM 生成摘要

**压缩效果**：
- 平均压缩率: 60-70%
- Token 节省: 30-40%
- 上下文保持: 关键信息不丢失

---

### 教程21: Multi-Agent 系统使用

**难度**: 🔴 高级
**时间**: 40分钟
**目标**: 使用多 Agent 协作完成复杂任务
**版本**: v0.24.0+

#### 前置条件

- 了解 AI 助手基本使用
- 了解任务分解概念

#### 什么是 Multi-Agent？

Multi-Agent 系统允许多个专用 AI Agent 协作完成复杂任务。每个 Agent 专注于特定领域，通过协调器智能分发任务。

**可用 Agent**：
| Agent | 专长 | 适用场景 |
|-------|------|----------|
| CodeGenerationAgent | 代码生成 | 编写、重构、审查代码 |
| DataAnalysisAgent | 数据分析 | 数据处理、可视化、统计 |
| DocumentAgent | 文档处理 | 编写、翻译、摘要、格式转换 |

#### 步骤

**1. 访问 Multi-Agent 面板**

```
AI 助手 > Multi-Agent 模式
或设置 > AI配置 > 启用 Multi-Agent
```

**2. 单任务分发**

**示例：代码生成任务**

```
输入任务: 帮我写一个 React 用户登录组件，包含表单验证

系统自动:
1. 分析任务类型 → 代码生成
2. 选择 Agent → CodeGenerationAgent
3. 分发任务
4. 返回结果
```

**Agent 响应**：
```javascript
// LoginForm.jsx
import React, { useState } from 'react';

const LoginForm = () => {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [errors, setErrors] = useState({});

  const validate = () => {
    const newErrors = {};
    if (!email) newErrors.email = '请输入邮箱';
    if (!password) newErrors.password = '请输入密码';
    // ... 更多验证
    return Object.keys(newErrors).length === 0;
  };

  // ... 组件实现
};

export default LoginForm;
```

**3. 并行执行多任务**

```
Multi-Agent > 并行任务
```

**添加多个任务**：
```
任务1: 编写用户认证 API 文档
任务2: 分析 API 调用日志找出性能瓶颈
任务3: 生成 API 使用示例代码
```

**执行**：
```
点击 "并行执行"

任务进度:
[任务1 - DocumentAgent] ████████░░ 80%
[任务2 - DataAnalysisAgent] ██████████ 100% ✓
[任务3 - CodeGenerationAgent] ███████░░░ 70%

预计完成: 30秒
```

**4. 链式执行任务**

**场景**：数据分析 → 报告生成

```
Multi-Agent > 链式任务
```

**配置链**：
```
步骤1: DataAnalysisAgent
  - 输入: sales_data.csv
  - 任务: 分析销售趋势

步骤2: DocumentAgent
  - 输入: 步骤1的输出
  - 任务: 生成销售分析报告
```

**执行流程**：
```
[步骤1] 数据分析中...
  - 读取 CSV 数据
  - 计算月度趋势
  - 识别异常值
  - 输出: 分析结果 JSON

[步骤2] 报告生成中...
  - 接收分析结果
  - 生成图表描述
  - 编写报告正文
  - 输出: Markdown 报告
```

**5. Agent 间通信**

```
Multi-Agent > Agent 通信
```

**发送消息**：
```javascript
// 从 CodeGenerationAgent 发送到 DocumentAgent
await sendMessage({
  from: 'CodeGenerationAgent',
  to: 'DocumentAgent',
  message: '代码已生成，请生成对应的 API 文档',
  context: { code: generatedCode }
});
```

**6. 查看 Agent 能力**

```
Multi-Agent > Agent 列表
```

**CodeGenerationAgent 详情**：
```
名称: 代码生成 Agent
能力:
  - code_generation: 生成代码
  - code_refactor: 重构代码
  - code_review: 代码审查
  - bug_fix: Bug 修复

支持语言: JavaScript, Python, Java, Go, Rust
平均响应: 5-15秒
```

**7. 自定义任务配置**

```
Multi-Agent > 任务配置
```

**高级选项**：
```json
{
  "maxTokens": 4096,
  "temperature": 0.7,
  "timeout": 60000,
  "retryOnError": true,
  "maxRetries": 3
}
```

**8. 查看执行统计**

```
Multi-Agent > 统计
- 总任务数: 156
- 成功率: 94.2%
- 平均耗时: 12.3秒
- Agent 使用分布:
  * CodeGenerationAgent: 45%
  * DocumentAgent: 35%
  * DataAnalysisAgent: 20%
```

#### 预期结果

- 复杂任务自动分解
- 多 Agent 协作完成
- 提高任务处理效率
- 专业领域更精准

#### 使用技巧

**1. 任务描述要清晰**
```
❌ 帮我处理一下这个数据
✓ 分析 sales.csv 中的月度销售趋势，找出增长最快的产品类别
```

**2. 合理使用并行**
- 独立任务：使用并行执行
- 依赖任务：使用链式执行

**3. 选择合适的 Agent**
- 代码相关 → CodeGenerationAgent
- 数据分析 → DataAnalysisAgent
- 文档处理 → DocumentAgent

---

### 教程22: 错误诊断与自动修复

**难度**: 🟡 中级
**时间**: 20分钟
**目标**: 使用 AI 诊断和修复错误
**版本**: v0.22.0+

#### 前置条件

- 了解基本的错误概念
- 已安装本地 Ollama（可选，用于免费 AI 诊断）

#### 步骤

**1. 访问错误监控**

```
系统监控 > 错误诊断
或在错误弹窗中点击 "AI 诊断"
```

**2. 查看错误列表**

```
错误诊断 > 最近错误

┌─────────────┬──────────┬────────┬─────────┐
│ 时间        │ 错误类型  │ 严重度  │ 状态    │
├─────────────┼──────────┼────────┼─────────┤
│ 10:30:25    │ NETWORK  │ 高      │ 已修复  │
│ 10:28:12    │ DATABASE │ 中      │ 待处理  │
│ 10:15:03    │ VALIDATION │ 低    │ 已忽略  │
└─────────────┴──────────┴────────┴─────────┘
```

**3. AI 智能诊断**

**选择错误 > 点击 "AI 诊断"**

```
错误信息:
SQLITE_BUSY: database is locked

AI 诊断中...（使用本地 Ollama，完全免费）

诊断结果:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 错误分类: DATABASE
⚠️ 严重程度: 中

🔍 根本原因:
多个进程同时尝试写入 SQLite 数据库，导致锁定冲突。
这通常发生在并发写入操作时。

💡 修复方案:
1. 【推荐】启用 WAL 模式
   PRAGMA journal_mode=WAL;
   优点: 允许并发读写

2. 增加超时时间
   PRAGMA busy_timeout=30000;
   让等待时间更长

3. 实现重试逻辑
   捕获 SQLITE_BUSY 错误，等待后重试

📚 相关文档:
- SQLite 并发处理指南
- 数据库锁机制详解
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**4. 自动修复**

**如果支持自动修复**：
```
诊断结果 > 点击 "自动修复"

自动修复中...
✓ 应用修复策略: retry
✓ 等待 1000ms
✓ 重试操作
✓ 操作成功

修复完成！
```

**自动修复策略**：
- `retry` - 重试操作
- `timeout_increase` - 增加超时
- `fallback` - 使用降级方案
- `validation` - 验证并修正数据

**5. 查看错误统计**

```
错误诊断 > 统计面板
```

**统计内容**：
```
过去 7 天:
- 总错误数: 45
- 自动修复: 28 (62%)
- 手动处理: 12 (27%)
- 未解决: 5 (11%)

按分类:
- NETWORK: 40%
- DATABASE: 30%
- VALIDATION: 20%
- 其他: 10%

按严重度:
- 严重: 5
- 高: 12
- 中: 18
- 低: 10
```

**6. 查找相关问题**

```
错误详情 > 查找相关问题

相关历史错误:
1. "SQLITE_BUSY in chat module" (3天前, 已解决)
   解决方案: 启用 WAL 模式

2. "Database lock timeout" (1周前, 已解决)
   解决方案: 增加 busy_timeout
```

**7. 生成诊断报告**

```
错误详情 > 生成报告

生成 Markdown 报告:
# 错误诊断报告

## 错误信息
- 类型: SQLITE_BUSY
- 时间: 2026-01-17 10:28:12
- 模块: chat-service

## AI 诊断
[详细诊断内容]

## 修复记录
[修复步骤和结果]

## 建议
[预防措施]
```

**8. 配置诊断选项**

```
设置 > 错误诊断配置
- AI 诊断: ✓ 启用
- LLM 提供商: Ollama (免费)
- LLM 模型: qwen2:7b
- 自动修复: ✓ 启用
- 修复策略: retry, timeout_increase, fallback
```

#### 预期结果

- 错误自动分类
- AI 提供专业诊断
- 自动修复常见问题
- 历史记录可追溯

#### 错误分类说明

| 分类 | 描述 | 常见原因 |
|------|------|----------|
| DATABASE | 数据库错误 | 锁定、连接失败、SQL 错误 |
| NETWORK | 网络错误 | 超时、连接拒绝、DNS 失败 |
| FILESYSTEM | 文件系统错误 | 权限、文件不存在、磁盘满 |
| VALIDATION | 验证错误 | 数据格式、范围、必填字段 |
| AUTHENTICATION | 认证错误 | 密钥无效、token 过期 |
| RATE_LIMIT | 速率限制 | API 调用超限 |

#### 成本优势

使用本地 Ollama 进行 AI 诊断：
- ✅ **完全免费**: 无 API 调用成本
- ✅ **数据隐私**: 错误信息不发送到云端
- ✅ **快速响应**: 本地推理，无网络延迟
- ✅ **无限使用**: 不受 API 配额限制

---

## 📞 获取帮助

### 官方资源

- **用户手册**: [USER_MANUAL_COMPLETE.md](./USER_MANUAL_COMPLETE.md)
- **API文档**: [API_REFERENCE.md](./API_REFERENCE.md)
- **插件开发**: [PLUGIN_DEVELOPMENT.md](./PLUGIN_DEVELOPMENT.md)
- **GitHub**: https://github.com/chainlesschain/desktop-app
- **官网**: https://chainlesschain.com

### 社区支持

- **Discord**: https://discord.gg/chainlesschain
- **论坛**: https://community.chainlesschain.com
- **微信群**: 添加客服微信 chainless-bot

### 反馈建议

- **Bug报告**: https://github.com/chainlesschain/desktop-app/issues
- **功能建议**: 论坛 > 功能建议板块
- **邮件**: support@chainlesschain.com

---

## 🎓 下一步

完成教程后，你可以：

1. **深入学习**：
   - 阅读完整用户手册
   - 探索高级功能
   - 参与社区讨论

2. **参与贡献**：
   - 开发插件
   - 翻译文档
   - 分享教程

3. **保持更新**：
   - 关注更新日志
   - 试用新功能
   - 提供反馈

---

**文档版本**: v0.24.0
**最后更新**: 2026-01-17
**维护团队**: ChainlessChain Tutorial Team

祝学习愉快！🎉
