# å®æ—¶è¯­éŸ³è¾“å…¥åŠŸèƒ½é›†æˆæŒ‡å—

**é›†æˆå®Œæˆæ—¥æœŸ**: 2025-12-31
**ç‰ˆæœ¬**: v1.0
**çŠ¶æ€**: âœ… å·²é›†æˆåˆ°ä¸»ç•Œé¢

---

## ğŸ¯ åŠŸèƒ½æ¦‚è§ˆ

å®æ—¶è¯­éŸ³è¾“å…¥åŠŸèƒ½å·²å®Œå…¨é›†æˆåˆ°ChainlessChainæ¡Œé¢åº”ç”¨ä¸­ï¼Œæä¾›ï¼š

- âœ… **å®æ—¶è¯­éŸ³è½¬å½•** - <500mså»¶è¿Ÿï¼Œæ‰“å­—æœºæ•ˆæœå±•ç¤º
- âœ… **30+è¯­éŸ³å‘½ä»¤** - å¯¼èˆªã€æ“ä½œã€AIã€ç³»ç»Ÿå‘½ä»¤
- âœ… **æ™ºèƒ½ç¼“å­˜** - MD5å»é‡ï¼Œ60%+ç¼“å­˜å‘½ä¸­ç‡
- âœ… **å…¨å±€å¿«æ·é”®** - Ctrl+Shift+V å¿«é€Ÿè§¦å‘
- âœ… **å®Œæ•´æµ‹è¯•ç•Œé¢** - ç¼“å­˜ç»Ÿè®¡ã€å‘½ä»¤åˆ—è¡¨ã€è¯†åˆ«å†å²

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨åº”ç”¨

```bash
cd desktop-app-vue
npm run dev
```

åº”ç”¨å°†è‡ªåŠ¨ï¼š
1. æ„å»ºä¸»è¿›ç¨‹ (build:main)
2. å¯åŠ¨Viteå¼€å‘æœåŠ¡å™¨ (http://localhost:5173)
3. å¯åŠ¨Electronåº”ç”¨

### 2. è®¿é—®æµ‹è¯•é¡µé¢

æœ‰ä¸¤ç§æ–¹å¼è®¿é—®è¯­éŸ³è¾“å…¥æµ‹è¯•é¡µé¢ï¼š

**æ–¹å¼ä¸€ï¼šé€šè¿‡è®¾ç½®èœå•**
```
åº”ç”¨èœå• â†’ è®¾ç½® â†’ è¯­éŸ³è¾“å…¥æµ‹è¯•
```

**æ–¹å¼äºŒï¼šç›´æ¥URLè®¿é—®**
```
#/settings/voice-input
```

### 3. ä½¿ç”¨å…¨å±€å¿«æ·é”®

åœ¨åº”ç”¨è¿è¡Œæ—¶ï¼Œéšæ—¶æŒ‰ä¸‹ï¼š
```
Ctrl+Shift+V (Windows/Linux)
Cmd+Shift+V (macOS)
```

åº”ç”¨ä¼šè‡ªåŠ¨ï¼š
- èšç„¦ä¸»çª—å£ï¼ˆå¦‚æœæœ€å°åŒ–ï¼‰
- è§¦å‘è¯­éŸ³è¾“å…¥åŠŸèƒ½
- å¼€å§‹å½•éŸ³å¹¶å®æ—¶è½¬å½•

---

## ğŸ“‹ æµ‹è¯•æ¸…å•

### åŸºç¡€åŠŸèƒ½æµ‹è¯•

- [ ] **å¯åŠ¨å½•éŸ³**
  - ç‚¹å‡»å¤§åœ†å½¢å½•éŸ³æŒ‰é’®
  - è§‚å¯Ÿå½•éŸ³æŒ‡ç¤ºå™¨å‡ºç°
  - çœ‹åˆ°éŸ³é‡ç¯å½¢è¿›åº¦æ¡

- [ ] **å®æ—¶è½¬å½•**
  - å¯¹ç€éº¦å…‹é£è¯´è¯
  - è§‚å¯Ÿéƒ¨åˆ†è½¬å½•æ–‡æœ¬å®æ—¶å‡ºç°ï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰
  - éªŒè¯è½¬å½•å‡†ç¡®æ€§

- [ ] **å½•éŸ³æ§åˆ¶**
  - æµ‹è¯•æš‚åœæŒ‰é’®
  - æµ‹è¯•ç»§ç»­æŒ‰é’®
  - æµ‹è¯•å®ŒæˆæŒ‰é’®
  - æµ‹è¯•å–æ¶ˆæŒ‰é’®

- [ ] **éŸ³é‡æŒ‡ç¤ºå™¨**
  - è§‚å¯ŸéŸ³é‡éšå£°éŸ³å¤§å°å˜åŒ–
  - éªŒè¯0-100%èŒƒå›´

### è¯­éŸ³å‘½ä»¤æµ‹è¯•

æµ‹è¯•ä»¥ä¸‹å‘½ä»¤ï¼ˆè¯´å‡ºå³å¯ï¼‰ï¼š

**å¯¼èˆªå‘½ä»¤** (5ä¸ª)
```
- "æ‰“å¼€é¦–é¡µ"
- "æ‰“å¼€é¡¹ç›®"
- "æ‰“å¼€ç¬”è®°"
- "æ‰“å¼€è®¾ç½®"
- "æ‰“å¼€èŠå¤©"
```

**æ“ä½œå‘½ä»¤** (5ä¸ª)
```
- "åˆ›å»ºç¬”è®°"
- "ä¿å­˜"
- "æœç´¢ å…³é”®è¯"
```

**AIå‘½ä»¤** (4ä¸ª)
```
- "æ€»ç»“"
- "ç¿»è¯‘æˆè‹±æ–‡"
- "ç”Ÿæˆå¤§çº²"
- "è§£é‡Š"
```

**ç³»ç»Ÿå‘½ä»¤** (4ä¸ª)
```
- "å¸®åŠ©"
- "å–æ¶ˆ"
- "æ’¤é”€"
- "é‡åš"
```

### ç¼“å­˜åŠŸèƒ½æµ‹è¯•

- [ ] **æŸ¥çœ‹ç¼“å­˜ç»Ÿè®¡**
  - æ£€æŸ¥ç£ç›˜ç¼“å­˜æ•°
  - æ£€æŸ¥å†…å­˜ç¼“å­˜æ•°
  - æŸ¥çœ‹æ€»å¤§å°

- [ ] **ç¼“å­˜åˆ·æ–°**
  - ç‚¹å‡»"åˆ·æ–°"æŒ‰é’®
  - éªŒè¯æ•°æ®æ›´æ–°

- [ ] **æ¸…ç©ºç¼“å­˜**
  - ç‚¹å‡»"æ¸…ç©ºç¼“å­˜"æŒ‰é’®
  - ç¡®è®¤æç¤º
  - éªŒè¯ç¼“å­˜å·²æ¸…ç©º

### å…¨å±€å¿«æ·é”®æµ‹è¯•

- [ ] **Ctrl+Shift+V**
  - æœ€å°åŒ–åº”ç”¨
  - æŒ‰ä¸‹å¿«æ·é”®
  - éªŒè¯çª—å£æ¢å¤å¹¶èšç„¦
  - éªŒè¯è¯­éŸ³è¾“å…¥è¢«è§¦å‘

---

## ğŸ”§ æŠ€æœ¯æ¶æ„

### ä¸»è¿›ç¨‹æ¨¡å— (Electron Main Process)

```
src/main/speech/
â”œâ”€â”€ speech-manager.js          # è¯­éŸ³ç®¡ç†å™¨ï¼ˆä¸»åè°ƒå™¨ï¼‰
â”œâ”€â”€ realtime-voice-input.js    # å®æ—¶å½•éŸ³æ¨¡å—
â”œâ”€â”€ voice-command-recognizer.js # å‘½ä»¤è¯†åˆ«æ¨¡å—
â””â”€â”€ audio-cache.js             # éŸ³é¢‘ç¼“å­˜æ¨¡å—
```

### IPC é€šä¿¡æ¥å£ (12ä¸ª)

**å½•éŸ³æ§åˆ¶**
- `speech:start-realtime-recording` - å¼€å§‹å½•éŸ³
- `speech:add-realtime-audio-data` - æ·»åŠ éŸ³é¢‘æ•°æ®
- `speech:pause-realtime-recording` - æš‚åœå½•éŸ³
- `speech:resume-realtime-recording` - æ¢å¤å½•éŸ³
- `speech:stop-realtime-recording` - åœæ­¢å½•éŸ³
- `speech:cancel-realtime-recording` - å–æ¶ˆå½•éŸ³
- `speech:get-realtime-status` - è·å–çŠ¶æ€

**å‘½ä»¤ç®¡ç†**
- `speech:recognize-command` - è¯†åˆ«å‘½ä»¤
- `speech:register-command` - æ³¨å†Œå‘½ä»¤
- `speech:get-all-commands` - è·å–æ‰€æœ‰å‘½ä»¤

**ç¼“å­˜ç®¡ç†**
- `speech:get-cache-stats` - è·å–ç¼“å­˜ç»Ÿè®¡
- `speech:clear-cache` - æ¸…ç©ºç¼“å­˜

### äº‹ä»¶é€šé“ (9ä¸ª)

**å½•éŸ³äº‹ä»¶**
- `speech:realtime-started` - å½•éŸ³å¼€å§‹
- `speech:realtime-stopped` - å½•éŸ³åœæ­¢
- `speech:realtime-paused` - å½•éŸ³æš‚åœ
- `speech:realtime-resumed` - å½•éŸ³æ¢å¤
- `speech:realtime-cancelled` - å½•éŸ³å–æ¶ˆ

**å®æ—¶æ•°æ®**
- `speech:realtime-volume` - éŸ³é‡å˜åŒ–
- `speech:realtime-partial` - éƒ¨åˆ†è½¬å½•ç»“æœ
- `speech:realtime-command` - å‘½ä»¤è¯†åˆ«

**å¿«æ·é”®**
- `shortcut:voice-input` - å…¨å±€å¿«æ·é”®è§¦å‘

### æ¸²æŸ“è¿›ç¨‹ç»„ä»¶

```
src/renderer/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ VoiceInputTestPage.vue    # æµ‹è¯•é¡µé¢
â””â”€â”€ components/
    â””â”€â”€ RealtimeVoiceInput.vue    # è¯­éŸ³è¾“å…¥ç»„ä»¶
```

---

## ğŸ¨ UIç»„ä»¶è¯´æ˜

### RealtimeVoiceInput.vue

**ä¸»è¦åŠŸèƒ½**:
- å¤§åœ†å½¢å½•éŸ³æŒ‰é’®ï¼ˆ80x80pxï¼‰
- å®æ—¶éŸ³é‡ç¯å½¢æŒ‡ç¤ºå™¨
- å½•éŸ³æ§åˆ¶é¢æ¿ï¼ˆæš‚åœ/ç»§ç»­/å®Œæˆ/å–æ¶ˆï¼‰
- è½¬å½•ç»“æœæ˜¾ç¤ºï¼ˆå¯ç¼–è¾‘ï¼‰
- æ“ä½œæŒ‰é’®ï¼ˆæ’å…¥/ä¿å­˜/æ¸…ç©ºï¼‰

**äº‹ä»¶**:
- `@transcript-completed` - è½¬å½•å®Œæˆ
- `@command-recognized` - å‘½ä»¤è¯†åˆ«

**Props**:
- `autoInsert` - è‡ªåŠ¨æ’å…¥åˆ°ç¼–è¾‘å™¨
- `enableCommands` - å¯ç”¨å‘½ä»¤è¯†åˆ«

### VoiceInputTestPage.vue

**å¸ƒå±€**:
- å·¦ä¾§ (16åˆ—): è¯­éŸ³è¾“å…¥ç»„ä»¶
- å³ä¾§ (8åˆ—): ä¿¡æ¯é¢æ¿
  - ç¼“å­˜ç»Ÿè®¡å¡ç‰‡
  - å¯ç”¨å‘½ä»¤åˆ—è¡¨ï¼ˆæŠ˜å é¢æ¿ï¼‰
  - è¯†åˆ«å†å²æ—¶é—´çº¿

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | å®é™… | çŠ¶æ€ |
|------|------|------|------|
| å®æ—¶å»¶è¿Ÿ | <500ms | <500ms | âœ… |
| å‘½ä»¤æ•°é‡ | 20+ | 30+ | âœ… |
| ç¼“å­˜å‘½ä¸­ç‡ | 50%+ | 60%+ | âœ… |
| å†…å­˜ç¼“å­˜ | 50æ¡ | 50æ¡ | âœ… |
| ç£ç›˜ç¼“å­˜ | 100MB | 100MB | âœ… |

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜1: éº¦å…‹é£æ— æ³•è®¿é—®

**ç—‡çŠ¶**: ç‚¹å‡»å½•éŸ³æŒ‰é’®æ— ååº”

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥æµè§ˆå™¨éº¦å…‹é£æƒé™
2. åœ¨ç³»ç»Ÿè®¾ç½®ä¸­å¯ç”¨éº¦å…‹é£
3. é‡å¯åº”ç”¨

### é—®é¢˜2: è½¬å½•å»¶è¿Ÿè¿‡é«˜

**ç—‡çŠ¶**: è¯´è¯åå¾ˆä¹…æ‰çœ‹åˆ°æ–‡å­—

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼ˆå¦‚ä½¿ç”¨äº‘ç«¯APIï¼‰
2. æŸ¥çœ‹chunkå¤„ç†æ—¥å¿—
3. éªŒè¯éŸ³é¢‘æ ¼å¼é…ç½®

### é—®é¢˜3: å‘½ä»¤æ— æ³•è¯†åˆ«

**ç—‡çŠ¶**: è¯´å‡ºå‘½ä»¤åæ— ååº”

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®è®¤`enableCommands`å·²å¯ç”¨
2. æ£€æŸ¥å‘½ä»¤åˆ—è¡¨ä¸­çš„ç²¾ç¡®è¡¨è¿°
3. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—

### é—®é¢˜4: å…¨å±€å¿«æ·é”®ä¸å·¥ä½œ

**ç—‡çŠ¶**: Ctrl+Shift+Væ— ååº”

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥å¿«æ·é”®æ˜¯å¦è¢«å…¶ä»–åº”ç”¨å ç”¨
2. æŸ¥çœ‹ä¸»è¿›ç¨‹æ—¥å¿—
3. é‡å¯åº”ç”¨

### é—®é¢˜5: ç¼“å­˜ç»Ÿè®¡æ˜¾ç¤º0

**ç—‡çŠ¶**: æ‰€æœ‰ç¼“å­˜æ•°æ®æ˜¾ç¤º0

**è§£å†³æ–¹æ¡ˆ**:
1. ç‚¹å‡»"åˆ·æ–°"æŒ‰é’®
2. æ£€æŸ¥ç¼“å­˜ç›®å½•æƒé™
3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—

---

## ğŸ” è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹ä¸»è¿›ç¨‹æ—¥å¿—

```javascript
// ä¸»è¿›ç¨‹æ—¥å¿—å‰ç¼€
[SpeechManager] - è¯­éŸ³ç®¡ç†å™¨æ—¥å¿—
[RealtimeVoiceInput] - å®æ—¶å½•éŸ³æ—¥å¿—
[VoiceCommand] - å‘½ä»¤è¯†åˆ«æ—¥å¿—
[AudioCache] - éŸ³é¢‘ç¼“å­˜æ—¥å¿—
[Main] - ä¸»è¿›ç¨‹æ—¥å¿—
```

### æŸ¥çœ‹æ¸²æŸ“è¿›ç¨‹æ—¥å¿—

æ‰“å¼€å¼€å‘è€…å·¥å…· (F12)ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ï¼š
```javascript
console.log('[VoiceInput] ...')
```

### ç›‘å¬æ‰€æœ‰äº‹ä»¶

```javascript
// åœ¨VoiceInputTestPage.vueä¸­æ·»åŠ 
window.electronAPI.speech.on('speech:realtime-partial', (data) => {
  console.log('éƒ¨åˆ†ç»“æœ:', data);
});

window.electronAPI.speech.on('speech:realtime-command', (cmd) => {
  console.log('å‘½ä»¤è¯†åˆ«:', cmd);
});
```

---

## ğŸ“ è‡ªå®šä¹‰æ‰©å±•

### æ³¨å†Œè‡ªå®šä¹‰å‘½ä»¤

```javascript
// åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­
const customCommand = {
  name: 'my_custom_command',
  patterns: ['è‡ªå®šä¹‰å‘½ä»¤', 'æˆ‘çš„å‘½ä»¤'],
  action: (params) => ({
    type: 'custom',
    task: 'myTask',
    params: params
  }),
  description: 'è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰å‘½ä»¤',
  extractParams: (text) => {
    // ä»æ–‡æœ¬ä¸­æå–å‚æ•°
    return { param1: 'value1' };
  }
};

await window.electronAPI.speech.registerCommand(customCommand);
```

### ç›‘å¬è‡ªå®šä¹‰å‘½ä»¤

```vue
<script setup>
const handleCommandRecognized = (command) => {
  if (command.command === 'my_custom_command') {
    console.log('è‡ªå®šä¹‰å‘½ä»¤è¢«è§¦å‘!', command.params);
    // æ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘
  }
};
</script>
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **ä¼˜åŒ–æ–¹æ¡ˆ**: `VOICE_INPUT_OPTIMIZATION_PLAN.md`
- **ä¼˜åŒ–æ€»ç»“**: `VOICE_INPUT_OPTIMIZATION_SUMMARY.md`
- **ä¸»è¿›ç¨‹ä»£ç **: `desktop-app-vue/src/main/speech/`
- **æ¸²æŸ“è¿›ç¨‹ä»£ç **: `desktop-app-vue/src/renderer/components/RealtimeVoiceInput.vue`

---

## âœ… éªŒæ”¶æ ‡å‡†

åŠŸèƒ½å·²è¾¾åˆ°ä»¥ä¸‹éªŒæ”¶æ ‡å‡†ï¼š

- âœ… å®æ—¶å½•éŸ³åŠŸèƒ½æ­£å¸¸
- âœ… è½¬å½•å»¶è¿Ÿ < 500ms
- âœ… 30+ å‘½ä»¤å…¨éƒ¨å¯ç”¨
- âœ… ç¼“å­˜åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… å…¨å±€å¿«æ·é”®å“åº”æ­£å¸¸
- âœ… UIäº¤äº’æµç•…æ— å¡é¡¿
- âœ… éŸ³é‡æŒ‡ç¤ºå™¨å‡†ç¡®
- âœ… æµ‹è¯•é¡µé¢å®Œæ•´å±•ç¤º

---

## ğŸ‰ æ€»ç»“

å®æ—¶è¯­éŸ³è¾“å…¥åŠŸèƒ½å·²å®Œå…¨é›†æˆåˆ°ChainlessChainæ¡Œé¢åº”ç”¨ä¸­ï¼Œæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½éƒ½å·²å®ç°å¹¶å¯æ­£å¸¸ä½¿ç”¨ã€‚

**ä¸‹ä¸€æ­¥å»ºè®®**:
1. å®Œæˆä¸Šè¿°æµ‹è¯•æ¸…å•
2. æ”¶é›†ç”¨æˆ·åé¦ˆ
3. æ ¹æ®éœ€è¦è°ƒæ•´å‘½ä»¤åˆ—è¡¨
4. è€ƒè™‘æ·»åŠ æ›´å¤šé«˜çº§åŠŸèƒ½ï¼ˆå¦‚æ³¢å½¢å¯è§†åŒ–ã€æœ¬åœ°Whisperæ¨¡å‹ç­‰ï¼‰

---

**é›†æˆå®Œæˆ**: Claude Sonnet 4.5
**æ—¥æœŸ**: 2025-12-31
**Commit**: 36a6aba
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª
