# P2PåŒæ­¥å¼•æ“æµ‹è¯•æŒ‡å—

**æ—¥æœŸ**: 2025-12-30
**ç‰ˆæœ¬**: v1.0

---

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›P2Pæ•°æ®åŒæ­¥å¼•æ“çš„å®Œæ•´æµ‹è¯•æŒ‡å—ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’Œæ‰‹åŠ¨æµ‹è¯•åœºæ™¯ã€‚

---

## ğŸ”§ ç¯å¢ƒå‡†å¤‡

### 1. å®‰è£…æµ‹è¯•ä¾èµ–

```bash
cd desktop-app-vue
npm install --save-dev jest better-sqlite3
```

### 2. é…ç½®Jest

åœ¨ `desktop-app-vue/package.json` ä¸­æ·»åŠ æµ‹è¯•è„šæœ¬ï¼š

```json
{
  "scripts": {
    "test": "jest",
    "test:sync": "jest p2p-sync-engine",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage"
  },
  "jest": {
    "testEnvironment": "node",
    "testMatch": ["**/tests/**/*.test.js"],
    "coverageDirectory": "coverage",
    "collectCoverageFrom": [
      "src/main/sync/**/*.js"
    ]
  }
}
```

---

## âœ… å•å…ƒæµ‹è¯•

### è¿è¡Œå•å…ƒæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰åŒæ­¥å¼•æ“æµ‹è¯•
npm run test:sync

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# ç›‘è§†æ¨¡å¼ï¼ˆå¼€å‘æ—¶ä½¿ç”¨ï¼‰
npm run test:watch
```

### æµ‹è¯•ç”¨ä¾‹åˆ—è¡¨

#### 1. åˆå§‹åŒ–æµ‹è¯•
- âœ… æˆåŠŸåˆå§‹åŒ–åŒæ­¥å¼•æ“
- âœ… æ³¨å†ŒP2Pæ¶ˆæ¯å¤„ç†å™¨

#### 2. åŒæ­¥çŠ¶æ€ç®¡ç†æµ‹è¯•
- âœ… è·å–ä¸å­˜åœ¨çš„åŒæ­¥çŠ¶æ€
- âœ… åˆ›å»ºæ–°çš„åŒæ­¥çŠ¶æ€
- âœ… æ›´æ–°å·²å­˜åœ¨çš„åŒæ­¥çŠ¶æ€

#### 3. å†²çªæ£€æµ‹æµ‹è¯•
- âœ… æ£€æµ‹æœ¬åœ°æ›´æ–°ï¼ˆlocal_winsï¼‰
- âœ… æ£€æµ‹è¿œç¨‹æ›´æ–°ï¼ˆremote_winsï¼‰
- âœ… æ£€æµ‹å¹¶å‘ä¿®æ”¹ï¼ˆconflictï¼‰
- âœ… æ£€æµ‹å·²åŒæ­¥çŠ¶æ€ï¼ˆsyncedï¼‰
- âœ… å¤„ç†ç¼ºå¤±DIDçš„æƒ…å†µ

#### 4. å†²çªè§£å†³æµ‹è¯•
- âœ… LWWç­–ç•¥-è¿œç¨‹è·èƒœ
- âœ… LWWç­–ç•¥-æœ¬åœ°è·èƒœ
- âœ… æ ¹æ®èµ„æºç±»å‹é€‰æ‹©ç­–ç•¥

#### 5. ç¦»çº¿é˜Ÿåˆ—æµ‹è¯•
- âœ… æ·»åŠ é¡¹åˆ°ç¦»çº¿é˜Ÿåˆ—
- âœ… å¤„ç†ç¦»çº¿é˜Ÿåˆ—ä¸­çš„é¡¹
- âœ… é‡è¯•å¤±è´¥çš„é˜Ÿåˆ—é¡¹
- âœ… è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°åæ ‡è®°ä¸ºå¤±è´¥

#### 6. åŒæ­¥ç»Ÿè®¡æµ‹è¯•
- âœ… è·å–åŒæ­¥ç»Ÿè®¡ä¿¡æ¯
- âœ… è¿”å›ç©ºç»„ç»‡çš„ç»Ÿè®¡ä¿¡æ¯

#### 7. å¾…åŒæ­¥èµ„æºæµ‹è¯•
- âœ… è·å–å¾…åŒæ­¥çš„èµ„æºåˆ—è¡¨
- âœ… é™åˆ¶è¿”å›çš„èµ„æºæ•°é‡ï¼ˆæ‰¹é‡å¤§å°ï¼‰

#### 8. è‡ªåŠ¨åŒæ­¥æµ‹è¯•
- âœ… å¯åŠ¨è‡ªåŠ¨åŒæ­¥
- âœ… åœæ­¢è‡ªåŠ¨åŒæ­¥
- âœ… å¯åŠ¨æ–°åŒæ­¥å‰åœæ­¢æ—§åŒæ­¥

#### 9. P2Pæ¶ˆæ¯å¤„ç†æµ‹è¯•
- âœ… å¤„ç†åŒæ­¥è¯·æ±‚æ¶ˆæ¯
- âœ… å¤„ç†åŒæ­¥å˜æ›´æ¶ˆæ¯

---

## ğŸ”„ é›†æˆæµ‹è¯•

### åœºæ™¯1: å®Œæ•´åŒæ­¥æµç¨‹

#### æµ‹è¯•æ­¥éª¤

1. **å‡†å¤‡æµ‹è¯•ç¯å¢ƒ**
   ```bash
   npm run dev
   ```

2. **åˆ›å»ºæµ‹è¯•ç»„ç»‡**
   - æ‰“å¼€åº”ç”¨
   - åˆ›å»ºæ–°ç»„ç»‡"æµ‹è¯•åŒæ­¥ç»„ç»‡"
   - è®°å½•ç»„ç»‡ID

3. **åˆ›å»ºæµ‹è¯•èµ„æº**
   - åˆ›å»ºçŸ¥è¯†åº“æ¡ç›® "æµ‹è¯•çŸ¥è¯†1"
   - åˆ›å»ºé¡¹ç›® "æµ‹è¯•é¡¹ç›®1"

4. **éªŒè¯åŒæ­¥çŠ¶æ€**
   - æ‰“å¼€åŒæ­¥çŠ¶æ€ç›‘æ§ç»„ä»¶
   - æ£€æŸ¥ç»Ÿè®¡ä¿¡æ¯ï¼š
     - æ€»èµ„æºæ•° â‰¥ 2
     - å·²åŒæ­¥æ•° â‰¥ 2
     - å¾…åŒæ­¥æ•° = 0
     - å†²çªæ•° = 0

5. **ä¿®æ”¹èµ„æºè§¦å‘åŒæ­¥**
   - ç¼–è¾‘ "æµ‹è¯•çŸ¥è¯†1" å†…å®¹
   - è§‚å¯ŸåŒæ­¥çŠ¶æ€å˜åŒ–ï¼š
     - å¾…åŒæ­¥æ•° +1
     - è‡ªåŠ¨åŒæ­¥åå˜å›å·²åŒæ­¥

#### é¢„æœŸç»“æœ

- âœ… èµ„æºä¿®æ”¹åæ ‡è®°ä¸º 'pending'
- âœ… 30ç§’å†…è‡ªåŠ¨åŒæ­¥å®Œæˆ
- âœ… åŒæ­¥çŠ¶æ€æ›´æ–°ä¸º 'synced'
- âœ… ç¦»çº¿é˜Ÿåˆ—ä¸ºç©º

---

### åœºæ™¯2: å†²çªæ£€æµ‹ä¸è§£å†³

#### æµ‹è¯•æ­¥éª¤

1. **æ¨¡æ‹Ÿå¹¶å‘ä¿®æ”¹**

   æ–¹æ³•1ï¼šä½¿ç”¨ä¸¤ä¸ªå®¢æˆ·ç«¯
   - æ‰“å¼€ä¸¤ä¸ªåº”ç”¨å®ä¾‹ï¼ˆAliceå’ŒBobï¼‰
   - åŒæ—¶ç¼–è¾‘åŒä¸€ä¸ªçŸ¥è¯†åº“æ¡ç›®
   - è§‚å¯Ÿå†²çªäº§ç”Ÿ

   æ–¹æ³•2ï¼šç›´æ¥ä¿®æ”¹æ•°æ®åº“ï¼ˆä»…æµ‹è¯•ç”¨ï¼‰
   ```javascript
   // åœ¨æ§åˆ¶å°æ‰§è¡Œ
   await window.ipc.invoke('db:execute', `
     INSERT INTO sync_conflicts (
       id, org_id, resource_type, resource_id,
       local_version, remote_version,
       local_data, remote_data,
       local_vector_clock, remote_vector_clock,
       created_at
     ) VALUES (
       'conflict_test_001',
       'org_abc123',
       'knowledge',
       'kb_001',
       2, 2,
       '{"title": "Local Title", "content": "Local content"}',
       '{"title": "Remote Title", "content": "Remote content"}',
       '{"did:test:alice": 2}',
       '{"did:test:bob": 2}',
       ${Date.now()}
     )
   `);
   ```

2. **æŸ¥çœ‹å†²çª**
   - ç‚¹å‡»åŒæ­¥çŠ¶æ€ç›‘æ§ä¸­çš„"æŸ¥çœ‹å†²çª"æŒ‰é’®
   - åº”è¯¥æ˜¾ç¤ºå†²çªåˆ—è¡¨

3. **è§£å†³å†²çª**

   **æ–¹æ¡ˆAï¼šä½¿ç”¨æœ¬åœ°ç‰ˆæœ¬**
   - ç‚¹å‡»"ä½¿ç”¨æœ¬åœ°ç‰ˆæœ¬"æŒ‰é’®
   - éªŒè¯æœ¬åœ°æ•°æ®è¢«ä¿ç•™

   **æ–¹æ¡ˆBï¼šä½¿ç”¨è¿œç¨‹ç‰ˆæœ¬**
   - ç‚¹å‡»"ä½¿ç”¨è¿œç¨‹ç‰ˆæœ¬"æŒ‰é’®
   - éªŒè¯è¿œç¨‹æ•°æ®è¢«åº”ç”¨

   **æ–¹æ¡ˆCï¼šæ‰‹åŠ¨åˆå¹¶**
   - ç‚¹å‡»"æ‰‹åŠ¨åˆå¹¶"æŒ‰é’®
   - ç¼–è¾‘JSONæ•°æ®
   - ä¿å­˜åˆå¹¶ç»“æœ
   - éªŒè¯åˆå¹¶åçš„æ•°æ®æ­£ç¡®

#### é¢„æœŸç»“æœ

- âœ… å†²çªè¢«æ­£ç¡®æ£€æµ‹å¹¶è®°å½•
- âœ… å†²çªåˆ—è¡¨æ˜¾ç¤ºå®Œæ•´ä¿¡æ¯
- âœ… æœ¬åœ°/è¿œç¨‹æ•°æ®å¯¹æ¯”æ¸…æ™°
- âœ… å†²çªè§£å†³åä»åˆ—è¡¨æ¶ˆå¤±
- âœ… åŒæ­¥çŠ¶æ€æ›´æ–°ä¸º 'synced'

---

### åœºæ™¯3: ç¦»çº¿é˜Ÿåˆ—æµ‹è¯•

#### æµ‹è¯•æ­¥éª¤

1. **æ¨¡æ‹Ÿç¦»çº¿çŠ¶æ€**
   - ç¦ç”¨ç½‘ç»œæˆ–P2Pè¿æ¥
   - æˆ–åœ¨ä»£ç ä¸­ä¸´æ—¶ç¦ç”¨ `p2pManager`

2. **æ‰§è¡Œæ“ä½œ**
   - åˆ›å»ºæ–°çŸ¥è¯†åº“æ¡ç›®
   - ç¼–è¾‘ç°æœ‰æ¡ç›®
   - åˆ é™¤æ¡ç›®

3. **éªŒè¯é˜Ÿåˆ—**
   ```javascript
   // åœ¨æ§åˆ¶å°æŸ¥çœ‹ç¦»çº¿é˜Ÿåˆ—
   const queue = await window.ipc.invoke('db:query', `
     SELECT * FROM sync_queue WHERE status = 'pending'
   `);
   console.log('ç¦»çº¿é˜Ÿåˆ—:', queue);
   ```

4. **æ¢å¤åœ¨çº¿**
   - é‡æ–°å¯ç”¨ç½‘ç»œ
   - ç­‰å¾…é˜Ÿåˆ—è‡ªåŠ¨å¤„ç†ï¼ˆ5ç§’é—´éš”ï¼‰

5. **éªŒè¯åŒæ­¥**
   - æ£€æŸ¥é˜Ÿåˆ—é¡¹çŠ¶æ€å˜ä¸º 'completed'
   - éªŒè¯æ•°æ®å·²åŒæ­¥

#### é¢„æœŸç»“æœ

- âœ… ç¦»çº¿æ“ä½œè¢«æ·»åŠ åˆ°é˜Ÿåˆ—
- âœ… é˜Ÿåˆ—æŒä¹…åŒ–ï¼ˆé‡å¯ä¸ä¸¢å¤±ï¼‰
- âœ… åœ¨çº¿åè‡ªåŠ¨å¤„ç†é˜Ÿåˆ—
- âœ… å¤±è´¥é¡¹è‡ªåŠ¨é‡è¯•
- âœ… è¶…è¿‡æœ€å¤§é‡è¯•æ¬¡æ•°åæ ‡è®°ä¸ºå¤±è´¥

---

### åœºæ™¯4: è‡ªåŠ¨åŒæ­¥æµ‹è¯•

#### æµ‹è¯•æ­¥éª¤

1. **å¯åŠ¨è‡ªåŠ¨åŒæ­¥**
   ```javascript
   const orgId = 'org_abc123';
   await window.ipc.invoke('sync:start-auto-sync', orgId);
   ```

2. **è§‚å¯Ÿè‡ªåŠ¨åŒæ­¥**
   - æ¯30ç§’åº”è¯¥è‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡åŒæ­¥
   - è§‚å¯Ÿæ§åˆ¶å°æ—¥å¿—ï¼š
     ```
     [P2PSyncEngine] å¼€å§‹åŒæ­¥: org_abc123
     [P2PSyncEngine] å¾…åŒæ­¥èµ„æº: X ä¸ª
     [P2PSyncEngine] è¿œç¨‹å˜æ›´: Y ä¸ª
     [P2PSyncEngine] âœ“ åŒæ­¥å®Œæˆ: {...}
     ```

3. **ä¿®æ”¹æ•°æ®æµ‹è¯•**
   - åœ¨è‡ªåŠ¨åŒæ­¥é—´éš”å†…ä¿®æ”¹æ•°æ®
   - éªŒè¯ä¸‹æ¬¡è‡ªåŠ¨åŒæ­¥æ—¶æ•°æ®è¢«æ¨é€

4. **åœæ­¢è‡ªåŠ¨åŒæ­¥**
   ```javascript
   await window.ipc.invoke('sync:stop-auto-sync');
   ```

#### é¢„æœŸç»“æœ

- âœ… è‡ªåŠ¨åŒæ­¥å®šæ—¶å™¨æ­£å¸¸è¿è¡Œï¼ˆ30ç§’ï¼‰
- âœ… é˜Ÿåˆ—å¤„ç†å®šæ—¶å™¨æ­£å¸¸è¿è¡Œï¼ˆ5ç§’ï¼‰
- âœ… æ•°æ®å˜æ›´è¢«è‡ªåŠ¨åŒæ­¥
- âœ… åœæ­¢åä¸å†è‡ªåŠ¨åŒæ­¥

---

## ğŸ¯ æ‰‹åŠ¨æµ‹è¯•æ£€æŸ¥æ¸…å•

### åŠŸèƒ½æµ‹è¯•

- [ ] **åŒæ­¥çŠ¶æ€ç›‘æ§ç»„ä»¶**
  - [ ] æ˜¾ç¤ºæ­£ç¡®çš„ç»Ÿè®¡ä¿¡æ¯
  - [ ] å®æ—¶åˆ·æ–°ï¼ˆ10ç§’ï¼‰
  - [ ] ç‚¹å‡»æŒ‰é’®æ‰“å¼€æŠ½å±‰
  - [ ] ç«‹å³åŒæ­¥æŒ‰é’®å·¥ä½œæ­£å¸¸
  - [ ] æŸ¥çœ‹å†²çªæŒ‰é’®è·³è½¬æ­£ç¡®

- [ ] **å†²çªè§£å†³UI**
  - [ ] æ˜¾ç¤ºå†²çªåˆ—è¡¨
  - [ ] æ•°æ®å¯¹æ¯”æ¸…æ™°
  - [ ] ä¸‰ç§è§£å†³æ–¹æ¡ˆéƒ½èƒ½æ­£å¸¸å·¥ä½œ
  - [ ] æ‰‹åŠ¨åˆå¹¶JSONç¼–è¾‘å™¨æ­£å¸¸
  - [ ] JSONæ ¼å¼é”™è¯¯æ—¶æ˜¾ç¤ºæç¤º

- [ ] **IPCæ¥å£**
  - [ ] `sync:start-auto-sync` æ­£å¸¸å·¥ä½œ
  - [ ] `sync:stop-auto-sync` æ­£å¸¸å·¥ä½œ
  - [ ] `sync:sync-now` è¿”å›æ­£ç¡®ç»“æœ
  - [ ] `sync:get-stats` è¿”å›æ­£ç¡®ç»Ÿè®¡
  - [ ] `sync:get-conflicts` è¿”å›å†²çªåˆ—è¡¨
  - [ ] `sync:resolve-conflict` æ­£ç¡®è§£å†³å†²çª
  - [ ] `sync:add-to-queue` æ·»åŠ åˆ°é˜Ÿåˆ—

### æ€§èƒ½æµ‹è¯•

- [ ] **å¤§é‡èµ„æºåŒæ­¥**
  - [ ] åˆ›å»º100+ä¸ªçŸ¥è¯†åº“æ¡ç›®
  - [ ] å…¨éƒ¨æ ‡è®°ä¸ºå¾…åŒæ­¥
  - [ ] éªŒè¯æ‰¹é‡åŒæ­¥æ€§èƒ½
  - [ ] æ£€æŸ¥æ˜¯å¦æœ‰å†…å­˜æ³„æ¼

- [ ] **é¢‘ç¹ä¿®æ”¹**
  - [ ] å¿«é€Ÿè¿ç»­ä¿®æ”¹å¤šä¸ªèµ„æº
  - [ ] éªŒè¯ç¦»çº¿é˜Ÿåˆ—ä¸ä¼šæº¢å‡º
  - [ ] æ£€æŸ¥æ•°æ®åº“æ€§èƒ½

- [ ] **é•¿æ—¶é—´è¿è¡Œ**
  - [ ] è®©è‡ªåŠ¨åŒæ­¥è¿è¡Œ1å°æ—¶+
  - [ ] æ£€æŸ¥æ˜¯å¦æœ‰å®šæ—¶å™¨æ³„æ¼
  - [ ] éªŒè¯ç»Ÿè®¡ä¿¡æ¯å‡†ç¡®æ€§

### è¾¹ç•Œæµ‹è¯•

- [ ] **ç©ºæ•°æ®æµ‹è¯•**
  - [ ] ç©ºç»„ç»‡åŒæ­¥
  - [ ] æ— å¾…åŒæ­¥èµ„æº
  - [ ] æ— å†²çª

- [ ] **æç«¯æƒ…å†µ**
  - [ ] éå¸¸å¤§çš„JSONæ•°æ®ï¼ˆ>1MBï¼‰
  - [ ] ç‰ˆæœ¬å·å¾ˆå¤§ï¼ˆ>1000ï¼‰
  - [ ] å‘é‡æ—¶é’ŸåŒ…å«å¤§é‡DIDï¼ˆ>100ï¼‰

- [ ] **é”™è¯¯å¤„ç†**
  - [ ] P2Pç½‘ç»œæœªåˆå§‹åŒ–
  - [ ] æ•°æ®åº“é”™è¯¯
  - [ ] JSONè§£æé”™è¯¯
  - [ ] ç½‘ç»œæ–­å¼€

---

## ğŸ› å·²çŸ¥é—®é¢˜å’Œé™åˆ¶

### å½“å‰é™åˆ¶

1. **P2Pç½‘ç»œä¾èµ–**
   - å¦‚æœP2Pç®¡ç†å™¨æœªåˆå§‹åŒ–ï¼Œä»…å¤„ç†æœ¬åœ°é˜Ÿåˆ—
   - éœ€è¦ç¡®ä¿P2Pç½‘ç»œæ­£å¸¸å·¥ä½œ

2. **ç­¾åéªŒè¯**
   - å½“å‰ä½¿ç”¨ç®€åŒ–çš„å“ˆå¸Œç­¾å
   - éœ€è¦å®ç°çœŸå®çš„DIDç§é’¥ç­¾å

3. **å†²çªè§£å†³**
   - Knowledgeç±»å‹é»˜è®¤éœ€è¦æ‰‹åŠ¨è§£å†³
   - æ²¡æœ‰è‡ªåŠ¨Three-Way Merge

4. **æ€§èƒ½**
   - å¤§é‡èµ„æºåŒæ­¥å¯èƒ½è¾ƒæ…¢
   - éœ€è¦ä¼˜åŒ–æ‰¹é‡å¤„ç†

### æµ‹è¯•æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“çŠ¶æ€**
   - æµ‹è¯•å‰å¤‡ä»½æ•°æ®åº“
   - æµ‹è¯•åæ¸…ç†æµ‹è¯•æ•°æ®

2. **å®šæ—¶å™¨æ¸…ç†**
   - åœæ­¢è‡ªåŠ¨åŒæ­¥åéªŒè¯å®šæ—¶å™¨å·²æ¸…ç†
   - é¿å…å†…å­˜æ³„æ¼

3. **å¹¶å‘æµ‹è¯•**
   - å¤šå®¢æˆ·ç«¯æµ‹è¯•éœ€è¦çœŸå®P2Pç½‘ç»œ
   - æœ¬åœ°æ¨¡æ‹Ÿæœ‰é™

---

## ğŸ“Š æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

### æµ‹è¯•æ‰§è¡ŒæŠ¥å‘Š

```markdown
# åŒæ­¥å¼•æ“æµ‹è¯•æŠ¥å‘Š

**æµ‹è¯•æ—¥æœŸ**: YYYY-MM-DD
**æµ‹è¯•äººå‘˜**: XXX
**æµ‹è¯•ç¯å¢ƒ**:
- OS: Windows/macOS/Linux
- Nodeç‰ˆæœ¬: vX.X.X
- åº”ç”¨ç‰ˆæœ¬: vX.X.X

## æµ‹è¯•ç»“æœ

### å•å…ƒæµ‹è¯•
- æ€»ç”¨ä¾‹æ•°: XX
- é€šè¿‡: XX
- å¤±è´¥: XX
- è¦†ç›–ç‡: XX%

### é›†æˆæµ‹è¯•
- [ ] å®Œæ•´åŒæ­¥æµç¨‹ - âœ…/âŒ
- [ ] å†²çªæ£€æµ‹ä¸è§£å†³ - âœ…/âŒ
- [ ] ç¦»çº¿é˜Ÿåˆ— - âœ…/âŒ
- [ ] è‡ªåŠ¨åŒæ­¥ - âœ…/âŒ

### å‘ç°çš„é—®é¢˜
1. é—®é¢˜æè¿°
   - é‡ç°æ­¥éª¤
   - é¢„æœŸç»“æœ
   - å®é™…ç»“æœ
   - ä¸¥é‡ç¨‹åº¦: é«˜/ä¸­/ä½

### æ€§èƒ½æ•°æ®
- 100ä¸ªèµ„æºåŒæ­¥æ—¶é—´: XXXms
- å†²çªæ£€æµ‹è€—æ—¶: XXXms
- å†…å­˜ä½¿ç”¨: XXXmb

### ç»“è®º
- [ ] é€šè¿‡æ‰€æœ‰æµ‹è¯•
- [ ] é€šè¿‡éƒ¨åˆ†æµ‹è¯•ï¼ˆæœ‰minor issuesï¼‰
- [ ] æœªé€šè¿‡æµ‹è¯•ï¼ˆæœ‰major bugsï¼‰
```

---

## ğŸš€ è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬

### å¿«é€Ÿæµ‹è¯•è„šæœ¬

åˆ›å»º `desktop-app-vue/tests/sync-quick-test.js`:

```javascript
const { spawn } = require('child_process');

async function runQuickTest() {
  console.log('ğŸš€ å¼€å§‹å¿«é€Ÿæµ‹è¯•...\n');

  // 1. è¿è¡Œå•å…ƒæµ‹è¯•
  console.log('ğŸ“ è¿è¡Œå•å…ƒæµ‹è¯•...');
  const jest = spawn('npm', ['run', 'test:sync']);

  jest.stdout.on('data', (data) => {
    console.log(data.toString());
  });

  jest.on('close', (code) => {
    if (code === 0) {
      console.log('\nâœ… å•å…ƒæµ‹è¯•é€šè¿‡\n');
    } else {
      console.log('\nâŒ å•å…ƒæµ‹è¯•å¤±è´¥\n');
      process.exit(1);
    }
  });
}

runQuickTest();
```

### è¿è¡Œå¿«é€Ÿæµ‹è¯•

```bash
node tests/sync-quick-test.js
```

---

## ğŸ“š å‚è€ƒèµ„æ–™

- **åŒæ­¥åè®®è®¾è®¡**: `desktop-app-vue/docs/SYNC_PROTOCOL_DESIGN.md`
- **åŒæ­¥å¼•æ“å®ç°æŠ¥å‘Š**: `SYNC_ENGINE_IMPLEMENTATION_REPORT.md`
- **Jestæ–‡æ¡£**: https://jestjs.io/
- **Better-SQLite3æ–‡æ¡£**: https://github.com/WiseLibs/better-sqlite3

---

**åˆ›å»ºæ—¥æœŸ**: 2025-12-30
**æœ€åæ›´æ–°**: 2025-12-30
