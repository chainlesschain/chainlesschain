# P0功能完整测试计划

**测试日期**: 2025-12-26
**测试范围**: 所有P0高优先级功能
**测试类型**: 端到端测试、功能测试、性能测试
**测试环境**: Windows 10, Electron 39.2.6, Vue 3.4

---

## 📋 测试总览

### 测试功能列表

| 编号 | 功能 | 测试优先级 | 预估时间 |
|------|------|-----------|---------|
| P0-1 | 项目统计实时收集和可视化 | P0 | 30分钟 |
| P0-2 | PDF直接生成能力 | P0 | 30分钟 |
| P0-3 | Git AI提交信息生成 | P0 | 30分钟 |
| P0-4 | 模板变量替换引擎 | P0 | 30分钟 |
| P0-5 | 模板预览弹窗 | P0 | 20分钟 |
| 性能测试 | 大数据量场景 | P1 | 40分钟 |
| 集成测试 | 跨功能联动 | P1 | 30分钟 |

**总预估时间**: 3小时

---

## 🧪 P0-1: 项目统计实时收集和可视化

### 测试环境准备
- [ ] 创建测试项目（包含多种文件类型）
- [ ] 准备不同规模的项目（小/中/大）

### 测试用例

#### TC-P0-1-001: 基本统计功能
**测试步骤**:
1. 打开桌面应用
2. 创建或打开一个项目
3. 导航到项目详情页
4. 查看项目统计面板

**预期结果**:
- ✅ 显示文件总数
- ✅ 显示项目总大小
- ✅ 显示代码总行数
- ✅ 显示注释行数
- ✅ ECharts饼图正确渲染
- ✅ 数据准确无误

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-1-002: 实时文件监听
**测试步骤**:
1. 在项目目录中添加新文件
2. 修改现有文件
3. 删除文件
4. 观察统计数据是否自动更新

**预期结果**:
- ✅ 添加文件后，文件数和代码行数增加
- ✅ 修改文件后，代码行数更新
- ✅ 删除文件后，统计数据减少
- ✅ 更新延迟不超过3秒（防抖）

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-1-003: 多种文件类型支持
**测试步骤**:
1. 创建以下文件类型：
   - JavaScript (.js)
   - TypeScript (.ts)
   - Vue (.vue)
   - Python (.py)
   - Java (.java)
   - Markdown (.md)
   - JSON (.json)
2. 查看统计结果

**预期结果**:
- ✅ 所有文件类型都被正确统计
- ✅ 代码行、注释行、空行准确识别
- ✅ 不同语言的注释语法正确处理

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-1-004: 手动刷新功能
**测试步骤**:
1. 点击统计面板上的"刷新"按钮
2. 观察loading状态
3. 查看更新后的数据

**预期结果**:
- ✅ 显示loading动画
- ✅ 数据重新计算
- ✅ 更新完成后显示成功提示
- ✅ 刷新时间<5秒（中等项目）

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-1-005: ECharts可视化
**测试步骤**:
1. 查看统计饼图
2. 鼠标悬停在图表上
3. 点击图例切换显示

**预期结果**:
- ✅ 饼图正确显示各类型占比
- ✅ 悬停时显示详细数据
- ✅ 图例交互正常
- ✅ 颜色区分清晰
- ✅ 响应式布局适配

**实际结果**:

**状态**: ⏸️ 待测试

---

## 🧪 P0-2: PDF直接生成能力

### 测试环境准备
- [ ] 准备测试Markdown文件（包含各种元素）
- [ ] 准备HTML测试文件
- [ ] 准备TXT测试文件

### 测试用例

#### TC-P0-2-001: Markdown转PDF（基本元素）
**测试步骤**:
1. 创建包含以下元素的Markdown文件：
   - 标题（H1-H6）
   - 段落
   - 列表（有序、无序）
   - 链接
   - 图片
2. 点击"导出 → 下载为PDF"
3. 打开生成的PDF文件

**预期结果**:
- ✅ PDF文件成功生成
- ✅ 所有标题样式正确（边框底线、字号）
- ✅ 段落间距合理
- ✅ 列表缩进正确
- ✅ 链接可点击（蓝色、下划线）
- ✅ 图片正确嵌入

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-2-002: Markdown转PDF（代码块）
**测试步骤**:
1. 创建包含代码块的Markdown：
   ```javascript
   function hello() {
     console.log("Hello World");
   }
   ```
2. 导出为PDF

**预期结果**:
- ✅ 代码块背景色正确（浅灰）
- ✅ 等宽字体显示
- ✅ 语法高亮正确（Prism.js）
- ✅ 代码缩进保持
- ✅ 换行不截断

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-2-003: Markdown转PDF（表格）
**测试步骤**:
1. 创建包含表格的Markdown：
   ```markdown
   | 列1 | 列2 | 列3 |
   |-----|-----|-----|
   | A   | B   | C   |
   | D   | E   | F   |
   ```
2. 导出为PDF

**预期结果**:
- ✅ 表格边框显示
- ✅ 表头样式突出
- ✅ 斑马纹样式（交替行背景色）
- ✅ 单元格对齐正确
- ✅ 表格不会被页面截断

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-2-004: 中文字符支持
**测试步骤**:
1. 创建包含大量中文的Markdown
2. 包含特殊中文符号（、。！？）
3. 导出为PDF

**预期结果**:
- ✅ 所有中文字符正确显示
- ✅ 无乱码
- ✅ 标点符号正确
- ✅ 换行和断字合理

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-2-005: HTML转PDF
**测试步骤**:
1. 创建HTML文件
2. 调用 `pdf:htmlFileToPDF` API
3. 查看生成的PDF

**预期结果**:
- ✅ HTML正确转换为PDF
- ✅ CSS样式保持
- ✅ 页面布局正确

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-2-006: 大文件导出性能
**测试步骤**:
1. 创建超过100KB的Markdown文件
2. 导出为PDF
3. 记录转换时间

**预期结果**:
- ✅ 转换过程显示进度提示
- ✅ 转换时间<30秒
- ✅ 内存使用合理（不超过500MB）
- ✅ 导出完成后资源正确释放

**实际结果**:

**状态**: ⏸️ 待测试

---

## 🧪 P0-3: Git AI提交信息生成

### 测试环境准备
- [ ] 初始化Git仓库
- [ ] 准备测试修改（不同类型的变更）
- [ ] 确保LLM服务可用

### 测试用例

#### TC-P0-3-001: UI集成测试
**测试步骤**:
1. 修改项目文件
2. 打开Git状态对话框
3. 暂存文件
4. 点击"提交更改"按钮

**预期结果**:
- ✅ 提交Modal正确打开
- ✅ 显示提交信息输入框
- ✅ 显示"AI生成提交信息"按钮
- ✅ 按钮有灯泡图标
- ✅ 未暂存时按钮禁用

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-3-002: AI生成功能（LLM可用）
**测试步骤**:
1. 暂存修改的文件
2. 点击"AI生成提交信息"按钮
3. 等待生成完成

**预期结果**:
- ✅ 按钮显示loading动画
- ✅ 成功生成提交信息
- ✅ 提交信息符合Conventional Commits规范
- ✅ 格式：`<type>(<scope>): <subject>`
- ✅ 显示绿色成功提示框
- ✅ 生成时间<5秒

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-3-003: AI生成功能（LLM不可用）
**测试步骤**:
1. 停止LLM服务
2. 暂存文件
3. 点击"AI生成提交信息"

**预期结果**:
- ✅ 使用规则引擎降级策略
- ✅ 仍能生成基本的提交信息
- ✅ 格式符合规范
- ✅ 显示降级提示（可选）

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-3-004: 编辑AI生成的提交信息
**测试步骤**:
1. AI生成提交信息
2. 手动编辑内容
3. 点击"确定"提交

**预期结果**:
- ✅ 可以编辑生成的内容
- ✅ 字符计数实时更新
- ✅ 最多500字符限制
- ✅ 提交成功

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-3-005: 手动输入提交信息
**测试步骤**:
1. 不使用AI生成
2. 手动输入提交信息
3. 提交

**预期结果**:
- ✅ 手动输入正常
- ✅ 空信息时阻止提交并提示
- ✅ 提交成功后Modal关闭
- ✅ Git状态自动刷新

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-3-006: 不同类型的变更
**测试步骤**:
1. 分别测试以下变更类型：
   - 新增文件 (feat)
   - 修改文件 (fix/refactor)
   - 删除文件 (chore)
   - 文档更改 (docs)
2. 每次AI生成提交信息

**预期结果**:
- ✅ 每种类型都生成正确的type前缀
- ✅ subject描述准确

**实际结果**:

**状态**: ⏸️ 待测试

---

## 🧪 P0-4: 模板变量替换引擎

### 测试环境准备
- [ ] 确认test-template-engine.js存在

### 测试用例

#### TC-P0-4-001: 运行测试套件
**测试步骤**:
1. 打开终端
2. 执行：`cd desktop-app-vue && node test-template-engine.js`
3. 查看测试结果

**预期结果**:
- ✅ 所有6个测试通过
- ✅ 基本模板渲染 - PASS
- ✅ Handlebars Helpers - PASS
- ✅ 变量验证 - PASS
- ✅ 变量提取 - PASS
- ✅ 获取默认值 - PASS
- ✅ 完整模板 - PASS

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-4-002: 模板渲染API测试
**测试步骤**:
1. 在开发者控制台执行：
   ```javascript
   window.electron.invoke('template:render', {
     template: 'Hello, {{name}}!',
     variables: { name: 'World' }
   })
   ```

**预期结果**:
- ✅ 返回：`{ success: true, result: 'Hello, World!' }`

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-4-003: 变量验证API测试
**测试步骤**:
1. 测试有效变量验证
2. 测试缺少必填项
3. 测试邮箱格式验证
4. 测试数值范围验证

**预期结果**:
- ✅ 有效变量返回 `{ valid: true, errors: [] }`
- ✅ 无效变量返回详细错误信息

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-4-004: TemplateVariablesForm组件测试
**测试步骤**:
1. 创建测试页面使用TemplateVariablesForm组件
2. 传入不同类型的变量定义
3. 测试表单交互

**预期结果**:
- ✅ 10种输入类型正确渲染
- ✅ v-model双向绑定正常
- ✅ 验证规则生效
- ✅ 实时验证提示显示

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-4-005: Handlebars Helpers测试
**测试步骤**:
1. 测试所有6个custom helpers：
   - uppercase
   - lowercase
   - capitalize
   - formatDate
   - eq
   - default

**预期结果**:
- ✅ 所有helpers工作正常
- ✅ 日期格式化正确
- ✅ 字符串转换准确

**实际结果**:

**状态**: ⏸️ 待测试

---

## 🧪 P0-5: 模板预览弹窗

### 测试环境准备
- [ ] 准备测试模板数据

### 测试用例

#### TC-P0-5-001: 基本预览功能
**测试步骤**:
1. 使用TemplatePreviewModal组件
2. 传入模板数据
3. 打开预览弹窗

**预期结果**:
- ✅ Modal正确打开
- ✅ 显示模板预览图（或占位符）
- ✅ 显示模板名称和描述
- ✅ 显示类型标签（带颜色）
- ✅ 显示创建时间、使用次数、评分

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-5-002: "做同款"按钮
**测试步骤**:
1. 点击"做同款"按钮
2. 验证事件触发

**预期结果**:
- ✅ 触发 `use-template` 事件
- ✅ 传递正确的模板数据
- ✅ Modal自动关闭

**实际结果**:

**状态**: ⏸️ 待测试

---

#### TC-P0-5-003: 响应式布局
**测试步骤**:
1. 调整窗口大小
2. 观察Modal布局

**预期结果**:
- ✅ 800px宽度
- ✅ 预览图响应式缩放
- ✅ 内容布局合理

**实际结果**:

**状态**: ⏸️ 待测试

---

## 🚀 性能测试

### PT-001: 大项目统计性能
**测试场景**: 10000+文件的项目
**预期性能**:
- ✅ 初始统计完成时间 <30秒
- ✅ 内存占用 <300MB
- ✅ CPU占用率峰值 <80%

**实际结果**:

**状态**: ⏸️ 待测试

---

### PT-002: PDF导出大文件性能
**测试场景**: 100+ 页的Markdown文档
**预期性能**:
- ✅ 转换完成时间 <60秒
- ✅ 内存占用 <500MB
- ✅ 导出完成后内存释放

**实际结果**:

**状态**: ⏸️ 待测试

---

### PT-003: 多次AI生成响应时间
**测试场景**: 连续10次AI生成请求
**预期性能**:
- ✅ 平均响应时间 <5秒
- ✅ 无内存泄漏
- ✅ 无请求失败

**实际结果**:

**状态**: ⏸️ 待测试

---

## 🔗 集成测试

### IT-001: 项目创建→统计→导出流程
**测试步骤**:
1. 创建新项目
2. 导入文件
3. 查看统计
4. 导出PDF

**预期结果**:
- ✅ 整个流程无阻塞
- ✅ 数据一致性

**实际结果**:

**状态**: ⏸️ 待测试

---

### IT-002: Git修改→统计更新→AI提交流程
**测试步骤**:
1. 修改项目文件
2. 验证统计自动更新
3. 使用AI生成提交信息
4. 提交并查看Git历史

**预期结果**:
- ✅ 统计实时更新
- ✅ AI生成准确
- ✅ 提交成功

**实际结果**:

**状态**: ⏸️ 待测试

---

### IT-003: 模板→创建项目→统计流程
**测试步骤**:
1. 使用模板创建项目
2. 查看项目统计
3. 验证文件生成正确

**预期结果**:
- ✅ 项目文件正确生成
- ✅ 统计数据准确

**实际结果**:

**状态**: ⏸️ 待测试

---

## 🐛 已知问题跟踪

### 发现的Bug列表

| ID | 功能 | 问题描述 | 优先级 | 状态 |
|----|------|---------|--------|------|
| - | - | - | - | - |

---

## 📊 测试总结

### 测试完成度

| 功能模块 | 测试用例数 | 通过 | 失败 | 跳过 | 完成率 |
|---------|-----------|------|------|------|--------|
| P0-1: 项目统计 | 5 | 0 | 0 | 0 | 0% |
| P0-2: PDF导出 | 6 | 0 | 0 | 0 | 0% |
| P0-3: Git AI | 6 | 0 | 0 | 0 | 0% |
| P0-4: 模板引擎 | 5 | 0 | 0 | 0 | 0% |
| P0-5: 模板预览 | 3 | 0 | 0 | 0 | 0% |
| 性能测试 | 3 | 0 | 0 | 0 | 0% |
| 集成测试 | 3 | 0 | 0 | 0 | 0% |
| **总计** | **31** | **0** | **0** | **0** | **0%** |

### 测试环境信息

- **操作系统**: Windows 10
- **Node.js版本**:
- **Electron版本**: 39.2.6
- **Chrome版本**:
- **测试开始时间**:
- **测试结束时间**:
- **测试人员**: AI开发团队

---

## ✅ 测试验收标准

### 功能验收
- [ ] 所有P0功能测试用例通过率 ≥ 95%
- [ ] 无P0级别的阻塞性bug
- [ ] 所有用户操作流程顺畅

### 性能验收
- [ ] 项目统计（1000文件）完成时间 < 10秒
- [ ] PDF导出（50页）完成时间 < 30秒
- [ ] AI生成响应时间 < 5秒
- [ ] 内存占用 < 500MB（正常使用）

### 用户体验验收
- [ ] 所有操作有明确的加载状态提示
- [ ] 错误信息清晰易懂
- [ ] UI响应流畅，无卡顿
- [ ] 无明显的界面bug

---

**测试计划创建时间**: 2025-12-26
**计划版本**: v1.0
**下一步**: 开始执行测试用例
