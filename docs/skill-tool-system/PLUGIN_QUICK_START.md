# ChainlessChain æ’ä»¶ç³»ç»Ÿå¿«é€Ÿå¼€å§‹æŒ‡å—

**ç‰ˆæœ¬**: v0.16.0
**çŠ¶æ€**: âœ… Phase 1 å®Œæˆï¼ŒUI é›†æˆå®Œæˆ
**æµ‹è¯•çŠ¶æ€**: âœ… 20/20 æµ‹è¯•é€šè¿‡ (100%)
**æœ€åæ›´æ–°**: 2025-12-29

---

## ğŸ‰ åŠŸèƒ½æ¦‚è§ˆ

ChainlessChain æ’ä»¶ç³»ç»Ÿå…è®¸æ‚¨æ‰©å±•åº”ç”¨çš„åŠŸèƒ½ï¼Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç ã€‚æ”¯æŒï¼š

- âœ… **æœ¬åœ°æ’ä»¶å¼€å‘**ï¼šä»æœ¬åœ°ç›®å½•å®‰è£…è‡ªå®šä¹‰æ’ä»¶
- âœ… **NPM åŒ…å®‰è£…**ï¼šä» NPM ä»“åº“å®‰è£…ç¤¾åŒºæ’ä»¶
- âœ… **ZIP æ–‡ä»¶å®‰è£…**ï¼šå¯¼å…¥æ‰“åŒ…çš„æ’ä»¶æ–‡ä»¶
- âœ… **æƒé™ç®¡ç†**ï¼šç²¾ç»†åŒ–æ§åˆ¶æ’ä»¶æƒé™
- âœ… **æ‰©å±•ç‚¹ç³»ç»Ÿ**ï¼šé€šè¿‡ 8 ä¸ªå†…ç½®æ‰©å±•ç‚¹æ‰©å±•åŠŸèƒ½
- âœ… **ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼šå®Œæ•´çš„æ’ä»¶å¯ç”¨/ç¦ç”¨/å¸è½½æµç¨‹
- âœ… **å¯è§†åŒ–ç®¡ç†ç•Œé¢**ï¼šå‹å¥½çš„ UI æ“ä½œç•Œé¢

---

## ğŸ“¦ å¿«é€Ÿå¼€å§‹ - 5 åˆ†é’Ÿä½“éªŒ

### æ­¥éª¤ 1: å¯åŠ¨åº”ç”¨

```bash
cd desktop-app-vue
npm run dev
```

### æ­¥éª¤ 2: æ‰“å¼€æ’ä»¶ç®¡ç†

1. åœ¨å·¦ä¾§èœå•æ‰¾åˆ° **"ç³»ç»Ÿè®¾ç½®"**
2. å±•å¼€åç‚¹å‡» **"æ’ä»¶ç®¡ç†"**ï¼ˆå¸¦ç»¿è‰²"æ–°"æ ‡ç­¾ï¼‰
3. æ‚¨å°†çœ‹åˆ°æ’ä»¶ç®¡ç†ç•Œé¢

### æ­¥éª¤ 3: å®‰è£…æµ‹è¯•æ’ä»¶

1. ç‚¹å‡» **"å®‰è£…æ’ä»¶"** æŒ‰é’®
2. é€‰æ‹©å®‰è£…æ–¹å¼ï¼š**"æœ¬åœ°ç›®å½•"**
3. ç‚¹å‡» **"é€‰æ‹©ç›®å½•"**
4. å¯¼èˆªåˆ°ï¼š`C:\code\chainlesschain\desktop-app-vue\test-plugin`
5. ç‚¹å‡» **"ç¡®å®š"**
6. ç­‰å¾…æç¤º "æ’ä»¶å®‰è£…æˆåŠŸ"

### æ­¥éª¤ 4: å¯ç”¨æ’ä»¶

1. åœ¨æ’ä»¶åˆ—è¡¨æ‰¾åˆ° **"Hello World Plugin"**
2. ç‚¹å‡»å³ä¸Šè§’çš„ **å¼€å…³** å¯ç”¨æ’ä»¶
3. è§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºï¼š`[HelloWorldPlugin] æ’ä»¶å·²å¯ç”¨`
4. æ’ä»¶å¡ç‰‡å·¦ä¾§çŠ¶æ€æŒ‡ç¤ºå™¨å˜ä¸º **ç»¿è‰²**

### æ­¥éª¤ 5: æµ‹è¯•åŠŸèƒ½

#### æŸ¥çœ‹æ’ä»¶è¯¦æƒ…
- ç‚¹å‡» **"è¯¦æƒ…"** æŒ‰é’®
- æ£€æŸ¥æ’ä»¶å…ƒæ•°æ®ï¼ˆIDã€ç‰ˆæœ¬ã€ä½œè€…ç­‰ï¼‰

#### ç®¡ç†æƒé™
- ç‚¹å‡» **"æƒé™"** æŒ‰é’®
- æŸ¥çœ‹æ’ä»¶è¯·æ±‚çš„æƒé™ï¼š
  - æ•°æ®åº“è¯»å– (database:read)
  - UIç»„ä»¶ (ui:component)
- å°è¯•åˆ‡æ¢æƒé™å¼€å…³
- ç‚¹å‡» "ç¡®å®š" ä¿å­˜

#### æŸ¥çœ‹æ‰©å±•ç‚¹
- åœ¨æ’ä»¶å¡ç‰‡åº•éƒ¨æŸ¥çœ‹æ‰©å±•ç‚¹æ ‡ç­¾
- åº”è¯¥æ˜¾ç¤ºï¼š`ui.menu`

---

## ğŸ”§ æµ‹è¯•æ‰€æœ‰åŠŸèƒ½

### æµ‹è¯•æ¸…å•

è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼š
```bash
cd desktop-app-vue
node test-plugin-installation.js
```

è¿™å°†æ˜¾ç¤ºè¯¦ç»†çš„ 10 æ­¥æµ‹è¯•æµç¨‹ã€‚

#### âœ… åŸºç¡€åŠŸèƒ½æµ‹è¯•

- [x] å®‰è£…æ’ä»¶
- [x] æŸ¥çœ‹æ’ä»¶è¯¦æƒ…
- [x] å¯ç”¨æ’ä»¶
- [x] ç¦ç”¨æ’ä»¶
- [x] æƒé™ç®¡ç†
- [x] æ‰©å±•ç‚¹éªŒè¯
- [x] æœç´¢åŠŸèƒ½
- [x] ç­›é€‰åŠŸèƒ½
- [x] å¸è½½æ’ä»¶
- [x] æ‰“å¼€æ’ä»¶ç›®å½•

#### ğŸ” éªŒè¯å‘½ä»¤ï¼ˆåœ¨æµè§ˆå™¨æ§åˆ¶å° F12 è¿è¡Œï¼‰

```javascript
// 1. æ£€æŸ¥ plugin API æ˜¯å¦å¯ç”¨
console.log('Plugin API:', window.electronAPI?.plugin);

// 2. è·å–æ‰€æœ‰æ’ä»¶
const plugins = await window.electronAPI.plugin.getPlugins({});
console.log('æ‰€æœ‰æ’ä»¶:', plugins);

// 3. è·å–ç‰¹å®šæ’ä»¶
const plugin = await window.electronAPI.plugin.getPlugin('com.chainlesschain.hello-world');
console.log('Hello World Plugin:', plugin);

// 4. è·å–æ’ä»¶æƒé™
const permissions = await window.electronAPI.plugin.getPermissions('com.chainlesschain.hello-world');
console.log('æ’ä»¶æƒé™:', permissions);
```

---

## ğŸ“ æ’ä»¶å¼€å‘æŒ‡å—

### åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªæ’ä»¶

#### 1. åˆ›å»ºæ’ä»¶ç›®å½•

```bash
mkdir my-first-plugin
cd my-first-plugin
```

#### 2. åˆ›å»º `plugin.json`

```json
{
  "id": "com.mycompany.my-first-plugin",
  "name": "My First Plugin",
  "version": "1.0.0",
  "author": "Your Name",
  "description": "æˆ‘çš„ç¬¬ä¸€ä¸ª ChainlessChain æ’ä»¶",
  "homepage": "https://github.com/yourname/my-first-plugin",
  "license": "MIT",
  "main": "index.js",
  "category": "custom",
  "permissions": [
    "database:read",
    "ui:component"
  ],
  "extensionPoints": [
    {
      "point": "ui.menu",
      "config": {
        "label": "æˆ‘çš„æ’ä»¶",
        "position": "tools"
      }
    }
  ],
  "compatibility": {
    "chainlesschain": ">=0.16.0"
  }
}
```

#### 3. åˆ›å»º `index.js`

```javascript
/**
 * My First Plugin
 */
class MyFirstPlugin {
  constructor() {
    this.name = 'My First Plugin';
  }

  /**
   * æ’ä»¶å¯ç”¨æ—¶è°ƒç”¨
   */
  onEnable() {
    console.log('[MyFirstPlugin] æ’ä»¶å·²å¯ç”¨');
  }

  /**
   * æ’ä»¶ç¦ç”¨æ—¶è°ƒç”¨
   */
  onDisable() {
    console.log('[MyFirstPlugin] æ’ä»¶å·²ç¦ç”¨');
  }

  /**
   * æ’ä»¶å¸è½½æ—¶è°ƒç”¨
   */
  onUninstall() {
    console.log('[MyFirstPlugin] æ’ä»¶å·²å¸è½½');
  }

  /**
   * è‡ªå®šä¹‰æ–¹æ³•
   */
  doSomething() {
    return {
      success: true,
      message: 'Hello from my plugin!',
    };
  }
}

module.exports = MyFirstPlugin;
```

#### 4. å®‰è£…å¹¶æµ‹è¯•

1. åœ¨æ’ä»¶ç®¡ç†ç•Œé¢ç‚¹å‡» "å®‰è£…æ’ä»¶"
2. é€‰æ‹© "æœ¬åœ°ç›®å½•"
3. é€‰æ‹©æ‚¨çš„æ’ä»¶ç›®å½•
4. å®‰è£…å®Œæˆåå¯ç”¨æ’ä»¶

---

## ğŸ¨ æ’ä»¶ API å‚è€ƒ

### Manifest å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `id` | string | âœ… | å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå»ºè®®ä½¿ç”¨åå‘åŸŸåæ ¼å¼ |
| `name` | string | âœ… | æ’ä»¶æ˜¾ç¤ºåç§° |
| `version` | string | âœ… | è¯­ä¹‰åŒ–ç‰ˆæœ¬å· (semver) |
| `main` | string | âœ… | å…¥å£æ–‡ä»¶è·¯å¾„ï¼Œé»˜è®¤ `index.js` |
| `author` | string | âŒ | ä½œè€…åç§° |
| `description` | string | âŒ | æ’ä»¶æè¿° |
| `homepage` | string | âŒ | æ’ä»¶ä¸»é¡µ URL |
| `license` | string | âŒ | è®¸å¯è¯ç±»å‹ |
| `category` | string | âŒ | åˆ†ç±»ï¼š`official`, `community`, `custom` |
| `permissions` | array | âŒ | è¯·æ±‚çš„æƒé™åˆ—è¡¨ |
| `extensionPoints` | array | âŒ | æ³¨å†Œçš„æ‰©å±•ç‚¹ |
| `dependencies` | object | âŒ | NPM ä¾èµ–å’Œæ’ä»¶ä¾èµ– |
| `compatibility` | object | âŒ | å…¼å®¹æ€§è¦æ±‚ |

### æƒé™ç±»å‹

| æƒé™ | è¯´æ˜ |
|------|------|
| `database:read` | è¯»å–æ•°æ®åº“æ•°æ® |
| `database:write` | ä¿®æ”¹æ•°æ®åº“æ•°æ® |
| `database:admin` | ç®¡ç†æ•°æ®åº“ç»“æ„ |
| `llm:query` | è°ƒç”¨ LLM æœåŠ¡ |
| `llm:stream` | ä½¿ç”¨ LLM æµå¼å“åº” |
| `llm:embed` | æ–‡æœ¬å‘é‡åŒ– |
| `ui:component` | æ³¨å†Œ UI ç»„ä»¶ |
| `ui:page` | æ·»åŠ é¡µé¢ |
| `ui:menu` | æ·»åŠ èœå•é¡¹ |
| `file:read` | è¯»å–æ–‡ä»¶ |
| `file:write` | å†™å…¥æ–‡ä»¶ |
| `network:request` | å‘èµ·ç½‘ç»œè¯·æ±‚ |
| `system:notification` | æ˜¾ç¤ºç³»ç»Ÿé€šçŸ¥ |

### æ‰©å±•ç‚¹

| æ‰©å±•ç‚¹ | è¯´æ˜ |
|--------|------|
| `ui.page` | UI é¡µé¢æ‰©å±• |
| `ui.menu` | èœå•æ‰©å±• |
| `ui.component` | ç»„ä»¶æ‰©å±• |
| `data.importer` | æ•°æ®å¯¼å…¥å™¨ |
| `data.exporter` | æ•°æ®å¯¼å‡ºå™¨ |
| `ai.llm-provider` | LLM æä¾›å•† |
| `ai.function-tool` | AI Function å·¥å…· |
| `lifecycle.hook` | ç”Ÿå‘½å‘¨æœŸé’©å­ |

### ç”Ÿå‘½å‘¨æœŸæ–¹æ³•

```javascript
class YourPlugin {
  // æ’ä»¶åŠ è½½æ—¶è°ƒç”¨ï¼ˆPhase 2 æ”¯æŒï¼‰
  onLoad() { }

  // æ’ä»¶å¯ç”¨æ—¶è°ƒç”¨
  onEnable() { }

  // æ’ä»¶ç¦ç”¨æ—¶è°ƒç”¨
  onDisable() { }

  // æ’ä»¶å¸è½½æ—¶è°ƒç”¨
  onUninstall() { }

  // æ’ä»¶å¸è½½å‰è°ƒç”¨ï¼ˆPhase 2 æ”¯æŒï¼‰
  onBeforeUninstall() { }
}
```

---

## ğŸš€ é«˜çº§åŠŸèƒ½ï¼ˆå³å°†æ¨å‡ºï¼‰

### Phase 2: æ²™ç®±å’Œæƒé™ç³»ç»Ÿ

- [ ] VM2/isolated-vm æ²™ç®±éš”ç¦»
- [ ] è¿è¡Œæ—¶æƒé™æ£€æŸ¥
- [ ] æƒé™å¯¹è¯æ¡† UI
- [ ] æ’ä»¶ API æ¥å£å±‚
- [ ] èµ„æºé…é¢ç®¡ç†

### Phase 3: UI æ‰©å±•

- [ ] æ’ä»¶å¸‚åœº UI
- [ ] æ’ä»¶å¼€å‘è€…å·¥å…·
- [ ] è°ƒè¯•å·¥å…·
- [ ] æ€§èƒ½åˆ†æ

### Phase 4: é«˜çº§åŠŸèƒ½

- [ ] æ’ä»¶çƒ­é‡è½½
- [ ] è‡ªåŠ¨æ›´æ–°
- [ ] æ’ä»¶å•†åº—é›†æˆ
- [ ] é¥æµ‹å’Œåˆ†æ

---

## ğŸ“Š ç³»ç»ŸçŠ¶æ€

### è‡ªåŠ¨åŒ–æµ‹è¯•ç»“æœ

```
æ€»æµ‹è¯•æ•°: 20
âœ… é€šè¿‡: 20
âŒ å¤±è´¥: 0
é€šè¿‡ç‡: 100.0%
```

### æµ‹è¯•è¦†ç›–

- âœ… æµ‹è¯•æ’ä»¶æ–‡ä»¶éªŒè¯ (10/10)
- âœ… æ’ä»¶ç®¡ç†å™¨ç»„ä»¶éªŒè¯ (5/5)
- âœ… Preload è„šæœ¬éªŒè¯ (3/3)
- âœ… å‰ç«¯ç»„ä»¶éªŒè¯ (2/2)

### æ•°æ®åº“æ¶æ„

7 ä¸ªæ’ä»¶ç³»ç»Ÿè¡¨å·²åˆ›å»ºï¼š
- `plugins` - æ’ä»¶æ³¨å†Œè¡¨
- `plugin_permissions` - æƒé™ç®¡ç†
- `plugin_dependencies` - ä¾èµ–å…³ç³»
- `plugin_extensions` - æ‰©å±•ç‚¹
- `plugin_settings` - æ’ä»¶è®¾ç½®
- `plugin_event_logs` - äº‹ä»¶æ—¥å¿—
- `plugin_api_stats` - API ç»Ÿè®¡

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ 1: `window.electronAPI.plugin` æœªå®šä¹‰

**åŸå› **: Preload è„šæœ¬æœªæ­£ç¡®åŠ è½½

**è§£å†³æ–¹æ¡ˆ**:
1. å®Œå…¨å…³é—­åº”ç”¨
2. é‡æ–°æ„å»ºï¼š`npm run build:main`
3. é‡æ–°å¯åŠ¨ï¼š`npm run dev`
4. åœ¨æµè§ˆå™¨æ§åˆ¶å°éªŒè¯ï¼š`console.log(window.electronAPI)`

### é—®é¢˜ 2: æ’ä»¶å®‰è£…å¤±è´¥

**æ£€æŸ¥æ¸…å•**:
- [ ] `plugin.json` æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Ÿ
- [ ] å¿…éœ€å­—æ®µæ˜¯å¦éƒ½å­˜åœ¨ï¼Ÿ
- [ ] `id` æ˜¯å¦å”¯ä¸€ï¼Ÿ
- [ ] `main` å­—æ®µæŒ‡å‘çš„æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Ÿ

**éªŒè¯ manifest**:
```bash
node -e "console.log(JSON.parse(require('fs').readFileSync('./plugin.json', 'utf-8')))"
```

### é—®é¢˜ 3: æ’ä»¶å¯ç”¨åæ²¡æœ‰ååº”

**æ£€æŸ¥**:
1. æ‰“å¼€æ§åˆ¶å° (F12)
2. æŸ¥çœ‹æ˜¯å¦æœ‰é”™è¯¯æ—¥å¿—
3. éªŒè¯ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ˜¯å¦è¢«è°ƒç”¨
4. æ£€æŸ¥æ’ä»¶ç±»æ˜¯å¦æ­£ç¡®å¯¼å‡º

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **æŠ€æœ¯å®ç°**: [PLUGIN_SYSTEM_IMPLEMENTATION_PHASE1.md](./PLUGIN_SYSTEM_IMPLEMENTATION_PHASE1.md)
- **ç³»ç»Ÿè®¾è®¡**: [ç³»ç»Ÿè®¾è®¡_ä¸ªäººç§»åŠ¨AIç®¡ç†ç³»ç»Ÿ.md](./ç³»ç»Ÿè®¾è®¡_ä¸ªäººç§»åŠ¨AIç®¡ç†ç³»ç»Ÿ.md) - ç¬¬15ç« 
- **é¡¹ç›®è¿›åº¦**: [PROJECT_PROGRESS_REPORT_2025-12-18.md](./PROJECT_PROGRESS_REPORT_2025-12-18.md)
- **è´¡çŒ®æŒ‡å—**: [CONTRIBUTING.md](./CONTRIBUTING.md)

---

## ğŸ’¬ åé¦ˆä¸æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š
- æäº¤ Issue: https://github.com/chainlesschain/chainlesschain/issues
- æŸ¥çœ‹æ–‡æ¡£: ./docs/plugins/
- è”ç³»å¼€å‘å›¢é˜Ÿ

---

**Happy Coding!** ğŸ‰
