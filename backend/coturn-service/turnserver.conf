# Coturn TURN/STUN Server Configuration
# 生产环境配置

# 监听端口
listening-port=3478
tls-listening-port=5349

# 监听地址（0.0.0.0表示监听所有网络接口）
listening-ip=0.0.0.0

# 外部IP地址（需要替换为实际的公网IP）
# 如果在云服务器上运行，设置为服务器的公网IP
# external-ip=YOUR_PUBLIC_IP

# Relay IP地址（TURN中继使用的IP）
relay-ip=0.0.0.0

# TURN中继端口范围
min-port=49152
max-port=65535

# 启用详细日志
verbose

# 日志输出到标准输出（Docker推荐）
log-file=stdout

# 启用指纹（WebRTC需要）
fingerprint

# 启用长期凭证机制
lt-cred-mech

# 用户认证（用户名:密码）
# 生产环境建议使用更强的密码
user=chainlesschain:chainlesschain2024

# Realm（域）
realm=chainlesschain.com

# 总带宽限制（字节/秒）
# 0表示无限制，生产环境建议设置合理值
total-quota=0

# 每用户带宽限制（字节/秒）
bps-capacity=0

# 最大分配数
max-allocate-lifetime=3600

# 通道生命周期
channel-lifetime=600

# 权限生命周期
permission-lifetime=300

# 禁用TCP relay（仅使用UDP，性能更好）
# no-tcp-relay

# 禁用TLS和DTLS（如果不需要加密连接）
# 生产环境建议启用TLS
# no-tls
# no-dtls

# 禁止使用环回地址
no-loopback-peers

# 禁止使用多播地址
no-multicast-peers

# 启用移动性支持（移动设备切换网络）
mobility

# 禁用CLI（命令行接口）
no-cli

# 数据库配置（可选，用于持久化用户信息）
# userdb=/var/lib/coturn/turndb

# 证书配置（TLS/DTLS需要）
# cert=/etc/coturn/cert.pem
# pkey=/etc/coturn/pkey.pem

# 允许的对等地址（可选，限制TURN relay的目标地址）
# denied-peer-ip=0.0.0.0-0.255.255.255
# denied-peer-ip=127.0.0.0-127.255.255.255
# denied-peer-ip=::1

# STUN only模式（如果只需要STUN功能）
# stun-only

# 进程用户（安全性）
# proc-user=turnserver
# proc-group=turnserver
