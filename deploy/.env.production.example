# ChainlessChain 生产环境配置示例
# 复制此文件为 .env 并修改相应值
# 警告: 不要将包含真实密钥的.env文件提交到版本控制

# ===========================================
# 基础配置
# ===========================================
ENVIRONMENT=production
LOG_LEVEL=INFO
LOG_PATH=/var/log/chainlesschain

# ===========================================
# 数据库配置（PostgreSQL）
# ===========================================
DB_HOST=postgres
DB_PORT=5432
DB_NAME=chainlesschain
DB_USER=chainlesschain
# ⚠️ 必须修改: 使用强密码（至少16位，包含大小写字母、数字、特殊字符）
DB_PASSWORD=CHANGE_THIS_TO_STRONG_PASSWORD_32_CHARS

# 生成强密码命令: openssl rand -base64 32

# ===========================================
# Redis配置
# ===========================================
REDIS_HOST=redis
REDIS_PORT=6379
# ⚠️ 必须修改: 使用强密码
REDIS_PASSWORD=CHANGE_THIS_TO_REDIS_PASSWORD_32_CHARS

# ===========================================
# LLM配置（选择一个）
# ===========================================
# LLM提供商: dashscope, openai, zhipu, volcengine, qianfan, etc.
LLM_PROVIDER=dashscope
LLM_MODEL=qwen-turbo

# -------------------- 阿里云通义千问（推荐）--------------------
# 获取地址: https://dashscope.console.aliyun.com/apiKey
# 定价: qwen-turbo ¥0.002/千tokens(输入), ¥0.006/千tokens(输出)
DASHSCOPE_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# -------------------- OpenAI --------------------
# 获取地址: https://platform.openai.com/api-keys
# 定价: gpt-4o-mini $0.15/M输入tokens, $0.60/M输出tokens
# OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# OPENAI_BASE_URL=https://api.openai.com/v1
# OPENAI_MODEL=gpt-4o-mini

# -------------------- 智谱AI（ChatGLM）--------------------
# 获取地址: https://open.bigmodel.cn/usercenter/apikeys
# 定价: GLM-4-Flash 免费
# ZHIPU_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx.xxxxxxxxxxxxxx
# ZHIPU_MODEL=glm-4

# -------------------- 火山引擎（豆包）--------------------
# 获取地址: https://console.volcengine.com/ark
# 格式: access_key:secret_key
# VOLCENGINE_API_KEY=AKLTxxxxxxxxxxxxxxxx:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# VOLCENGINE_MODEL=doubao-pro-4k

# -------------------- 百度千帆 --------------------
# 获取地址: https://console.bce.baidu.com/qianfan/ais/console/applicationConsole/application
# 格式: access_key:secret_key
# QIANFAN_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxx:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# QIANFAN_MODEL=ERNIE-Speed-8K

# -------------------- 其他云LLM（使用OpenAI兼容API）--------------------
# 腾讯混元
# HUNYUAN_API_KEY=your-api-key
# HUNYUAN_MODEL=hunyuan-lite

# 讯飞星火
# SPARK_API_KEY=your-api-key
# SPARK_MODEL=spark-lite

# MiniMax
# MINIMAX_API_KEY=your-api-key
# MINIMAX_MODEL=abab5.5-chat

# DeepSeek
# DEEPSEEK_API_KEY=your-api-key
# DEEPSEEK_MODEL=deepseek-chat

# ===========================================
# 向量数据库配置
# ===========================================
QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_COLLECTION=chainlesschain_vectors

# Embedding模型配置
EMBEDDING_MODEL=BAAI/bge-base-zh-v1.5
EMBEDDING_PROVIDER=local  # local 或 cloud
EMBEDDING_BATCH_SIZE=32

# ===========================================
# 文件存储配置
# ===========================================
PROJECTS_ROOT_PATH=/data/projects
KNOWLEDGE_ROOT_PATH=/data/knowledge

# ===========================================
# JWT认证配置（移动端/Web端必需）
# ===========================================
# ⚠️ 必须修改: 使用至少64位随机字符串
JWT_SECRET=CHANGE_THIS_TO_RANDOM_64_CHARS_STRING
JWT_EXPIRATION=86400  # 24小时（秒）

# 生成JWT密钥命令: openssl rand -hex 64

# ===========================================
# CORS配置
# ===========================================
# 允许的前端域名（多个用逗号分隔）
CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://app.yourdomain.com,https://mobile.yourdomain.com

# ===========================================
# Git配置
# ===========================================
GIT_USER_NAME=ChainlessChain Bot
GIT_USER_EMAIL=bot@yourdomain.com

# ===========================================
# 性能优化配置
# ===========================================
# AI服务
WORKERS=4  # 根据CPU核心数调整
MAX_CONCURRENT_REQUESTS=10

# HuggingFace镜像（国内加速）
HF_ENDPOINT=https://hf-mirror.com
TRANSFORMERS_OFFLINE=0

# ===========================================
# 服务端口配置（内部）
# ===========================================
PROJECT_SERVICE_PORT=9090
AI_SERVICE_PORT=8000

# ===========================================
# 监控和告警（可选）
# ===========================================
# SENTRY_DSN=
# PROMETHEUS_ENABLED=false
# GRAFANA_ADMIN_PASSWORD=

# ===========================================
# 备份配置
# ===========================================
BACKUP_DIR=/backup/chainlesschain
RETENTION_DAYS=30

# 云存储备份（可选）
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_S3_BUCKET=
# AWS_REGION=

# 阿里云OSS备份（可选）
# ALIYUN_ACCESS_KEY_ID=
# ALIYUN_ACCESS_KEY_SECRET=
# ALIYUN_OSS_BUCKET=
# ALIYUN_OSS_ENDPOINT=

# ===========================================
# 安全配置
# ===========================================
# 限流配置
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60

# IP白名单（可选，用于管理接口）
# ADMIN_IP_WHITELIST=192.168.1.0/24,10.0.0.0/8

# ===========================================
# 加密配置（可选）
# ===========================================
# 如果需要端到端加密
# AES_ENCRYPTION_KEY=
# SQLCIPHER_KEY=

# ===========================================
# 通知配置（可选）
# ===========================================
# 邮件通知
# SMTP_HOST=
# SMTP_PORT=587
# SMTP_USER=
# SMTP_PASSWORD=
# SMTP_FROM=

# 钉钉/企业微信通知
# DINGTALK_WEBHOOK=
# WECOM_WEBHOOK=
