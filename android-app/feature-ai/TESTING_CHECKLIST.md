# Android LLM功能 - 测试清单

## 🧪 功能测试清单

### 1. LLM配置管理 ✅

#### 1.1 提供商选择

- [ ] 可以打开LLM设置页面
- [ ] 提供商列表显示所有12个选项
- [ ] 点击提供商可以切换
- [ ] 切换后配置表单正确更新
- [ ] RadioButton状态正确同步

#### 1.2 Ollama配置

- [ ] 可以输入服务器地址
- [ ] 可以输入模型名称
- [ ] 可以输入嵌入模型
- [ ] 保存后配置持久化
- [ ] 刷新后配置保持

#### 1.3 OpenAI配置

- [ ] 可以输入API Key
- [ ] API Key输入框默认隐藏
- [ ] 点击眼睛图标可以显示/隐藏
- [ ] 可以输入Base URL
- [ ] 可以输入模型名称
- [ ] 保存后配置持久化

#### 1.4 DeepSeek配置

- [ ] 可以输入API Key
- [ ] API Key输入框默认隐藏
- [ ] 可以输入Base URL
- [ ] 可以输入模型名称
- [ ] 保存后配置持久化

#### 1.5 其他提供商配置

- [ ] Claude配置正常
- [ ] 豆包配置正常
- [ ] 通义千问配置正常
- [ ] 文心一言配置正常
- [ ] 智谱AI配置正常
- [ ] 月之暗面配置正常
- [ ] 讯飞星火配置正常
- [ ] Gemini配置正常
- [ ] 自定义配置正常

#### 1.6 高级选项

- [ ] Temperature滑块可用（0.0-2.0）
- [ ] Top-P滑块可用（0.0-1.0）
- [ ] Top-K输入框可用（1-100）
- [ ] Max Tokens输入框可用（256-32768）
- [ ] 参数保存后持久化

#### 1.7 配置验证

- [ ] 点击"验证配置"按钮
- [ ] 显示验证结果
- [ ] 错误配置会高亮显示
- [ ] 错误信息准确描述问题

### 2. 连接测试 ✅

#### 2.1 Ollama连接测试

- [ ] 配置正确的Ollama地址
- [ ] 点击"测试连接"按钮
- [ ] 显示"测试连接中..."加载状态
- [ ] 成功时显示"✓ 连接成功！Ollama服务正常"
- [ ] 失败时显示具体错误信息
- [ ] 测试结果2秒后自动消失

#### 2.2 OpenAI连接测试

- [ ] 配置正确的API Key
- [ ] 点击"测试连接"按钮
- [ ] 成功时显示连接成功
- [ ] API Key错误时显示401错误
- [ ] 网络错误时显示超时错误

#### 2.3 其他提供商连接测试

- [ ] DeepSeek连接测试正常
- [ ] 豆包连接测试正常
- [ ] 其他提供商测试正常

#### 2.4 错误处理

- [ ] 未配置API Key时提示"请先配置API Key"
- [ ] 网络不可用时提示"连接失败"
- [ ] 服务器不可达时提示"服务不可用"

### 3. 导入导出功能 ✅

#### 3.1 完整导出

- [ ] 点击Import/Export图标
- [ ] 弹出导入导出对话框
- [ ] 点击"完整导出"按钮
- [ ] 系统文件选择器打开
- [ ] 默认文件名为"llm-config-full.json"
- [ ] 选择位置后文件成功保存
- [ ] 显示"✓ 完整配置导出成功"
- [ ] 导出的JSON文件包含API密钥

#### 3.2 安全导出

- [ ] 点击"安全导出"按钮
- [ ] 系统文件选择器打开
- [ ] 默认文件名为"llm-config-safe.json"
- [ ] 选择位置后文件成功保存
- [ ] 显示"✓ 安全配置导出成功"
- [ ] 导出的JSON文件不包含API密钥
- [ ] 所有其他配置正常保存

#### 3.3 导入配置

- [ ] 点击"从文件导入"按钮
- [ ] 系统文件选择器打开
- [ ] 可以选择JSON文件
- [ ] 选择后文件成功导入
- [ ] 显示"✓ 配置导入成功，已重新加载"
- [ ] 配置界面自动刷新
- [ ] 导入的配置正确应用

#### 3.4 桌面端兼容性

- [ ] 可以导入桌面端导出的配置
- [ ] 配置格式正确映射
- [ ] 所有字段正确解析
- [ ] 不兼容字段有默认值

#### 3.5 错误处理

- [ ] 选择非JSON文件时提示错误
- [ ] 文件损坏时提示错误
- [ ] 格式不正确时提示错误
- [ ] 导入导出取消时无错误

### 4. 智能推荐功能 ✅

#### 4.1 推荐对话框

- [ ] 点击Lightbulb图标
- [ ] 弹出智能推荐对话框
- [ ] 对话框UI美观
- [ ] 可以滚动查看内容

#### 4.2 使用场景选择

- [ ] "免费优先" FilterChip可选
- [ ] "性价比优先" FilterChip可选
- [ ] "质量优先" FilterChip可选
- [ ] "编程任务" FilterChip可选
- [ ] "写作任务" FilterChip可选
- [ ] "中文优化" FilterChip可选
- [ ] "翻译任务" FilterChip可选
- [ ] "摘要任务" FilterChip可选
- [ ] "对话任务" FilterChip可选
- [ ] "分析任务" FilterChip可选
- [ ] "通用场景" FilterChip可选
- [ ] 选中状态视觉反馈明显

#### 4.3 预算选择

- [ ] "低" FilterChip可选
- [ ] "中" FilterChip可选
- [ ] "高" FilterChip可选
- [ ] "不限" FilterChip可选
- [ ] 选中状态视觉反馈明显

#### 4.4 推荐结果

- [ ] 选择场景和预算后自动刷新
- [ ] 显示最多5个推荐
- [ ] 每个推荐显示提供商名称
- [ ] 每个推荐显示分数（0-100）
- [ ] 每个推荐显示推荐理由
- [ ] 分数≥80的卡片高亮显示
- [ ] 分数排序正确（从高到低）

#### 4.5 应用推荐

- [ ] 点击"应用此推荐"按钮
- [ ] 对话框自动关闭
- [ ] 提供商自动切换
- [ ] 配置界面自动更新
- [ ] 新提供商配置正确加载

#### 4.6 推荐准确性

- [ ] "免费优先"推荐Ollama
- [ ] "性价比优先"推荐DeepSeek
- [ ] "质量优先"推荐Claude/GPT-4
- [ ] "编程任务"推荐DeepSeek-Coder
- [ ] "中文优化"推荐中文友好模型

### 5. 使用统计功能 ✅

#### 5.1 统计页面

- [ ] 点击Analytics图标
- [ ] 打开使用统计页面
- [ ] 页面布局美观
- [ ] 卡片间距合理

#### 5.2 总览卡片

- [ ] 显示总Tokens数量
- [ ] 显示总成本（USD）
- [ ] 显示总请求次数
- [ ] 数字格式化正确（K/M缩写）
- [ ] 图标显示正常
- [ ] 主色调使用正确

#### 5.3 单个提供商卡片

- [ ] 每个使用过的提供商显示独立卡片
- [ ] 显示提供商名称
- [ ] 显示输入Token数
- [ ] 显示输出Token数
- [ ] 显示总Token数（高亮）
- [ ] 显示请求次数
- [ ] 显示预估成本
- [ ] 免费提供商显示"免费"
- [ ] 付费提供商显示成本（USD）
- [ ] 有删除按钮

#### 5.4 数字格式化

- [ ] 小于1000显示原数字
- [ ] 1000-999999显示K（如1.5K）
- [ ] 1000000+显示M（如1.2M）
- [ ] 小数点保留1位
- [ ] 格式一致性

#### 5.5 成本计算

- [ ] OpenAI成本计算正确
- [ ] DeepSeek成本计算正确
- [ ] Ollama显示免费
- [ ] 其他提供商成本合理
- [ ] 总成本为各提供商之和

#### 5.6 清除功能

- [ ] 点击顶部删除图标
- [ ] 弹出确认对话框
- [ ] 对话框文字为"清除所有统计数据？"
- [ ] 点击"确认"清除所有
- [ ] 点击"取消"不清除
- [ ] 清除后统计归零
- [ ] 清除后显示空状态

#### 5.7 单个清除

- [ ] 点击单个卡片删除按钮
- [ ] 弹出确认对话框
- [ ] 对话框文字为"清除[提供商]的统计数据？"
- [ ] 点击"确认"清除该提供商
- [ ] 清除后该卡片消失
- [ ] 总览数据相应减少

#### 5.8 刷新功能

- [ ] 点击刷新按钮
- [ ] 数据重新加载
- [ ] 显示最新统计

#### 5.9 空状态

- [ ] 无数据时显示空状态
- [ ] 空状态图标显示
- [ ] 空状态文字提示
- [ ] UI友好美观

### 6. 对话集成测试 ✅

#### 6.1 发送消息

- [ ] 创建新对话
- [ ] 使用配置的提供商
- [ ] 发送消息成功
- [ ] 接收流式响应
- [ ] 响应内容正确
- [ ] 无明显延迟

#### 6.2 Token统计

- [ ] 发送消息后token数增加
- [ ] 输入token估算合理
- [ ] 输出token估算合理
- [ ] 统计实时更新
- [ ] 可以在统计页面查看

#### 6.3 成本累积

- [ ] 多次对话后成本累加
- [ ] 成本计算准确
- [ ] 不同提供商独立统计

#### 6.4 提供商切换

- [ ] 切换提供商后对话正常
- [ ] 历史对话保持
- [ ] 新对话使用新提供商
- [ ] 统计独立记录

### 7. 安全性测试 🔐

#### 7.1 API Key加密

- [ ] API Key使用EncryptedSharedPreferences存储
- [ ] 无法从文件系统直接读取
- [ ] Root设备也受保护（KeyStore）

#### 7.2 导出安全

- [ ] 安全导出不包含API Key
- [ ] 完整导出包含加密密钥
- [ ] 导出文件权限正确

#### 7.3 日志脱敏

- [ ] 日志中API Key脱敏
- [ ] 只显示前10个字符
- [ ] 敏感信息不打印

### 8. 性能测试 ⚡

#### 8.1 启动性能

- [ ] 配置加载时间<500ms
- [ ] UI渲染流畅无卡顿
- [ ] 首屏显示快速

#### 8.2 响应性能

- [ ] 提供商切换<100ms
- [ ] 配置保存<200ms
- [ ] 统计加载<300ms

#### 8.3 内存使用

- [ ] 长时间使用无内存泄漏
- [ ] 内存占用合理（<100MB）
- [ ] 后台自动释放资源

#### 8.4 网络性能

- [ ] 连接测试超时合理（30s）
- [ ] 流式响应延迟低
- [ ] 网络错误恢复正常

### 9. 兼容性测试 📱

#### 9.1 Android版本

- [ ] Android 8.0 (API 26) 正常运行
- [ ] Android 9.0 (API 28) 正常运行
- [ ] Android 10.0 (API 29) 正常运行
- [ ] Android 11.0 (API 30) 正常运行
- [ ] Android 12.0 (API 31) 正常运行
- [ ] Android 13.0 (API 33) 正常运行
- [ ] Android 14.0 (API 34) 正常运行

#### 9.2 设备类型

- [ ] 小屏手机（<5.5英寸）
- [ ] 中屏手机（5.5-6.5英寸）
- [ ] 大屏手机（>6.5英寸）
- [ ] 平板电脑
- [ ] 折叠屏

#### 9.3 屏幕方向

- [ ] 竖屏显示正常
- [ ] 横屏显示正常
- [ ] 旋转时状态保持

### 10. 边界情况测试 🔍

#### 10.1 网络异常

- [ ] 无网络时提示正确
- [ ] 网络恢复后自动重试
- [ ] 超时后正确处理

#### 10.2 输入边界

- [ ] 超长文本处理正常
- [ ] 空输入验证正常
- [ ] 特殊字符处理正常

#### 10.3 并发场景

- [ ] 快速切换提供商无崩溃
- [ ] 多次点击按钮无重复操作
- [ ] 同时导出导入无冲突

#### 10.4 存储边界

- [ ] 存储空间不足时提示
- [ ] 大量统计数据不影响性能
- [ ] 配置文件过大时处理

### 11. 用户体验测试 🎨

#### 11.1 易用性

- [ ] 操作流程直观
- [ ] 按钮位置合理
- [ ] 文字说明清晰
- [ ] 图标语义明确

#### 11.2 反馈及时性

- [ ] 所有操作有即时反馈
- [ ] 加载状态明显
- [ ] 错误提示清楚
- [ ] 成功提示友好

#### 11.3 视觉设计

- [ ] 配色协调
- [ ] 间距合理
- [ ] 字体大小适中
- [ ] 图标清晰

### 12. 文档测试 📚

#### 12.1 用户指南

- [ ] USER_GUIDE.md存在
- [ ] 内容完整准确
- [ ] 示例可用
- [ ] 截图清晰

#### 12.2 开发者指南

- [ ] DEVELOPER_GUIDE.md存在
- [ ] 代码示例正确
- [ ] API文档完整
- [ ] 架构图清晰

#### 12.3 发布说明

- [ ] RELEASE_NOTES.md存在
- [ ] 功能列表完整
- [ ] 版本号正确
- [ ] 变更日志详细

## 📊 测试统计

### 测试进度

| 类别     | 测试项  | 通过   | 失败   | 跳过   | 进度    |
| -------- | ------- | ------ | ------ | ------ | ------- |
| 配置管理 | 30      | \_     | \_     | \_     | \_%     |
| 连接测试 | 15      | \_     | \_     | \_     | \_%     |
| 导入导出 | 18      | \_     | \_     | \_     | \_%     |
| 智能推荐 | 25      | \_     | \_     | \_     | \_%     |
| 使用统计 | 30      | \_     | \_     | \_     | \_%     |
| 对话集成 | 12      | \_     | \_     | \_     | \_%     |
| 安全性   | 8       | \_     | \_     | \_     | \_%     |
| 性能     | 12      | \_     | \_     | \_     | \_%     |
| 兼容性   | 15      | \_     | \_     | \_     | \_%     |
| 边界情况 | 12      | \_     | \_     | \_     | \_%     |
| 用户体验 | 12      | \_     | \_     | \_     | \_%     |
| 文档     | 8       | \_     | \_     | \_     | \_%     |
| **总计** | **197** | **\_** | **\_** | **\_** | **\_%** |

### 严重等级

- 🔴 P0 (阻塞) - 影响核心功能，必须修复
- 🟡 P1 (严重) - 影响重要功能，应该修复
- 🟢 P2 (一般) - 体验问题，可以延后
- ⚪ P3 (轻微) - 优化建议，可选

## 🐛 Bug报告模板

```markdown
### Bug标题

[简短描述问题]

### 严重等级

[ ] P0 - 阻塞
[ ] P1 - 严重
[ ] P2 - 一般
[ ] P3 - 轻微

### 复现步骤

1. 打开...
2. 点击...
3. 输入...
4. 观察到...

### 期望行为

[描述期望发生什么]

### 实际行为

[描述实际发生了什么]

### 环境信息

- 设备: [型号]
- Android版本: [版本号]
- App版本: [版本号]

### 附件

[截图/日志/视频]
```

## ✅ 签署

### 测试人员

| 姓名 | 角色   | 签名 | 日期 |
| ---- | ------ | ---- | ---- |
| \_   | QA     | \_   | \_   |
| \_   | 开发者 | \_   | \_   |
| \_   | 产品   | \_   | \_   |

### 审批

| 姓名 | 角色      | 签名 | 日期 |
| ---- | --------- | ---- | ---- |
| \_   | Tech Lead | \_   | \_   |
| \_   | PM        | \_   | \_   |

---

**版本**: v1.0.0
**创建日期**: 2026-01-25
**最后更新**: 2026-01-25
