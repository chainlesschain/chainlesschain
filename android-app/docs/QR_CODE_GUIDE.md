# ChainlessChain 二维码名片使用指南

欢迎使用ChainlessChain的二维码名片功能！本指南将帮助你快速掌握如何生成、分享和扫描个人二维码，轻松添加好友。

---

## 📖 目录

1. [功能概述](#功能概述)
2. [生成个人二维码](#生成个人二维码)
3. [扫描添加好友](#扫描添加好友)
4. [保存和分享二维码](#保存和分享二维码)
5. [常见问题](#常见问题)
6. [技术细节](#技术细节)

---

## 功能概述

二维码名片是ChainlessChain v0.31.0引入的新功能，让你可以：

- 🎴 **生成个人专属二维码**: 每个DID对应唯一的二维码
- 📸 **快速添加好友**: 扫一扫即可添加，无需手动输入复杂的DID
- 💾 **保存分享**: 将二维码保存到手机相册，方便线下分享
- 🔐 **安全可靠**: 二维码包含加密的DID信息，防止伪造

**适用场景**:

- 线下活动（会议、聚会）快速加好友
- 社交媒体（微博、推特）展示个人名片
- 打印名片或海报进行推广

---

## 生成个人二维码

### 步骤1: 进入社交页面

1. 打开ChainlessChain应用
2. 点击底部导航栏的 **"社交"** 标签
3. 切换到 **"我的"** 页面

<img src="./images/qr_step1.png" width="300" alt="进入社交页面" />

### 步骤2: 打开二维码对话框

1. 在"我的"页面，点击 **"我的二维码"** 按钮
2. 系统会自动生成你的个人二维码

<img src="./images/qr_step2.png" width="300" alt="二维码对话框" />

### 步骤3: 查看二维码信息

生成的二维码包含以下信息：

- **个人头像**: 显示你的账号头像
- **昵称**: 显示你的用户昵称
- **DID**: 显示你的完整DID标识符
- **二维码图片**: 512x512像素的高清二维码

**示例二维码**:

```
┌───────────────────────────┐
│                           │
│  █▀▀▀▀▀█ ▀▀▀█ █▀▀▀▀▀█   │
│  █ ███ █ ▄█▄█ █ ███ █   │
│  █ ▀▀▀ █ ▀▀██ █ ▀▀▀ █   │
│  ▀▀▀▀▀▀▀ █▄▀ ▀▀▀▀▀▀▀▀   │
│  ▄▀█▄▀▀█▀▄█▄▀ ▄▀▀█▀▀    │
│  ▀▀█▄██▀▄▀█▄█ ██▀▄▀█    │
│  █▀▀▀▀▀█ █▄▀█ ▀▀▀▀▀█    │
│  █ ███ █ ▀▀▄█ ▄██▄▄█    │
│  █ ▀▀▀ █ ▀▄▀█ ▄█▀▀▄█    │
│  ▀▀▀▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀    │
└───────────────────────────┘
  did:chainlesschain:user:123
```

---

## 扫描添加好友

### 步骤1: 进入添加好友页面

1. 在社交页面，点击 **"好友"** 标签
2. 点击右上角的 **"+"** 或 **"添加好友"** 按钮

<img src="./images/qr_scan_step1.png" width="300" alt="添加好友页面" />

### 步骤2: 开启扫描功能

1. 在添加好友页面，点击 **"扫码添加"** 按钮
2. 首次使用会请求相机权限，点击 **"允许"**

<img src="./images/qr_scan_step2.png" width="300" alt="相机权限请求" />

### 步骤3: 扫描二维码

1. 将相机对准好友的二维码
2. 确保二维码在取景框中央
3. 应用会自动识别并解码DID

**扫描提示**:

- 💡 **光线充足**: 确保环境光线良好，避免反光
- 📏 **适当距离**: 保持10-30厘米的扫描距离
- 📷 **对焦清晰**: 确保二维码清晰可见，避免模糊

<img src="./images/qr_scan_step3.png" width="300" alt="扫描界面" />

### 步骤4: 发送好友请求

1. 扫描成功后，会显示好友的信息预览：
   - 头像
   - 昵称
   - DID
   - 个人简介（如果有）

2. 输入 **验证消息**（可选）
   - 例如："你好，我是张三，通过二维码添加你"

3. 点击 **"发送请求"** 按钮

4. 等待对方接受请求即可成为好友

<img src="./images/qr_scan_step4.png" width="300" alt="发送请求" />

---

## 保存和分享二维码

### 方法一: 保存到相册

1. 在"我的二维码"对话框中，点击 **"保存到相册"** 按钮
2. 首次使用会请求存储权限，点击 **"允许"**
3. 保存成功后，在手机相册的"ChainlessChain"文件夹中查看

**文件命名规则**:

```
chainlesschain_qrcode_[时间戳].png
例如: chainlesschain_qrcode_1674567890123.png
```

### 方法二: 截图分享

1. 打开"我的二维码"对话框
2. 按下手机的 **电源键 + 音量下键** 进行截图
3. 在相册中找到截图，通过微信、QQ等分享

### 方法三: 打印名片

1. 保存二维码到相册
2. 使用图片编辑软件添加装饰和文字
3. 打印到名片或海报上

**打印建议**:

- 📐 **尺寸**: 至少3x3厘米，推荐5x5厘米
- 🎨 **背景**: 使用白色背景，避免浅色背景
- 🖨️ **清晰度**: 使用300DPI以上的打印分辨率
- 🔍 **测试**: 打印后用手机扫描验证是否清晰

---

## 常见问题

### Q1: 二维码为什么扫不出来？

**可能原因**:

1. **光线不足**: 尝试在光线充足的地方扫描
2. **二维码模糊**: 保存时选择"高清"模式，避免压缩
3. **距离不当**: 调整手机与二维码的距离（10-30厘米）
4. **相机脏污**: 清洁相机镜头

**解决方案**:

```
1. 确保二维码尺寸至少3x3厘米
2. 重新生成并保存二维码
3. 检查相机权限是否授予
4. 尝试使用其他二维码扫描应用测试
```

---

### Q2: 可以自定义二维码样式吗？

**当前版本**: 暂不支持自定义样式（如颜色、Logo）

**计划支持** (v0.32.0+):

- 🎨 自定义二维码颜色
- 🖼️ 添加个人Logo
- 🎭 选择不同风格模板

**临时方案**:
保存二维码后，使用第三方图片编辑软件（如美图秀秀、Canva）进行美化。

---

### Q3: 二维码会过期吗？

**答**: 不会过期。二维码中编码的是你的DID，只要DID不变，二维码永久有效。

**注意事项**:

- 如果更换DID（例如重新注册账号），需要重新生成二维码
- 删除账号后，原二维码将无法使用

---

### Q4: 扫描时提示"相机权限未授予"怎么办？

**解决步骤**:

1. 打开手机 **设置** → **应用管理**
2. 找到 **ChainlessChain**
3. 点击 **权限管理**
4. 开启 **相机** 权限
5. 返回应用，重新尝试扫描

**Android 13+额外步骤**:

- 同时授予 **"附近的设备"** 权限（用于P2P发现）

---

### Q5: 保存二维码失败怎么办？

**常见原因**:

1. **存储空间不足**: 清理手机存储
2. **权限未授予**: 检查存储权限
3. **系统限制**: 某些品牌手机（如小米、OPPO）需要手动授权"存储文件"权限

**解决方案**:

```bash
# 检查存储空间
设置 → 存储 → 可用空间 > 500MB

# 授予权限（Android 11+）
设置 → 应用管理 → ChainlessChain → 权限
开启"照片和视频"或"文件和媒体"权限
```

---

### Q6: 扫描别人的二维码后看不到信息？

**可能原因**:

1. **二维码损坏**: 二维码图片破损或格式错误
2. **非ChainlessChain二维码**: 扫描的是其他应用的二维码
3. **网络问题**: 无法获取用户信息

**解决方案**:

1. 请对方重新生成二维码
2. 确认扫描的是ChainlessChain的个人二维码
3. 检查网络连接，尝试切换Wi-Fi/移动数据

---

## 技术细节

### 二维码编码格式

ChainlessChain使用 **QR_CODE** 格式编码DID，规格如下：

| 参数       | 值                             | 说明           |
| ---------- | ------------------------------ | -------------- |
| 格式       | QR_CODE                        | 通用二维码格式 |
| 纠错级别   | Level H                        | 30%容错率      |
| 编码字符集 | UTF-8                          | 支持中文       |
| 尺寸       | 512x512                        | 像素           |
| 数据格式   | `did:chainlesschain:user:[id]` | DID标准格式    |

**示例编码数据**:

```
did:chainlesschain:user:a1b2c3d4e5f6
```

### 扫描识别流程

```
用户打开扫描页面
       ↓
请求相机权限
       ↓
启动CameraX预览
       ↓
实时帧分析（ML Kit Barcode Scanning）
       ↓
检测到二维码 → 解码DID
       ↓
验证DID格式
       ↓
查询用户信息（本地/远程）
       ↓
显示好友信息预览
```

**使用的技术栈**:

- **ZXing Core 3.5.3**: 二维码生成
- **ML Kit Barcode Scanning 17.2.0**: 二维码扫描
- **CameraX 1.3.1**: 相机预览和图像分析
- **Coil 2.6.0**: 图片加载（头像）

### 安全性

二维码本身是明文编码DID，但结合以下机制确保安全：

1. **DID验证**: 扫描后会验证DID的合法性（前缀、格式、校验和）
2. **用户确认**: 添加好友前需要发送请求并等待对方接受
3. **权限控制**: 相机和存储权限按需动态申请
4. **防伪造**: DID由系统生成，无法伪造有效DID

**不安全场景及防范**:

- ⚠️ **二维码泄露**: 不要在公开场合展示二维码太久，避免被陌生人扫描添加
- ⚠️ **恶意二维码**: 不要扫描来源不明的二维码，可能是伪造的DID
- ⚠️ **钓鱼攻击**: 确认扫描后显示的用户信息是否与预期一致

---

## 最佳实践

### 1. 定期更新二维码图片

虽然二维码不会过期，但建议：

- 每6个月重新保存一次（确保图片清晰）
- 更换头像或昵称后，重新截图分享

### 2. 多渠道分享

- **线上**: 社交媒体、电子邮件、即时通讯软件
- **线下**: 名片、海报、展台
- **混合**: 在线活动中展示二维码屏幕

### 3. 添加引导文字

在分享二维码时，添加引导语：

```
欢迎扫码加我ChainlessChain好友！
1. 下载ChainlessChain应用
2. 打开"社交" → "好友" → "扫码添加"
3. 扫描下方二维码
```

### 4. 测试可用性

每次保存或打印二维码后，自己先扫描测试：

- 确保能正确识别DID
- 确保信息显示完整
- 确保扫描速度快（<2秒）

---

## 反馈与支持

如果你在使用二维码功能时遇到问题：

- 📖 **查看文档**: [完整文档](https://docs.chainlesschain.com)
- 🐛 **报告Bug**: [GitHub Issues](https://github.com/chainlesschain/chainlesschain/issues)
- 💬 **社区讨论**: [Discord](https://discord.gg/chainlesschain)
- 📧 **联系支持**: support@chainlesschain.com

---

## 未来计划

v0.32.0及以后版本将支持：

- 🎨 **自定义二维码样式**: 颜色、Logo、图案
- 🌐 **多格式支持**: 支持Aztec、Data Matrix等格式
- 📊 **扫描统计**: 查看二维码被扫描的次数和时间
- 🔗 **动态二维码**: 可更新内容的动态二维码
- 🎁 **活动二维码**: 创建限时/限量的活动邀请二维码

---

**享受快速添加好友的便捷体验吧！** 🎉

---

_最后更新: 2026-01-26 | v0.31.0_
