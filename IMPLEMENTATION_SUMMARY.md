# å…¨å±€è®¾ç½®å‘å¯¼åŠŸèƒ½ - å®Œæ•´å®ç°æ€»ç»“

## ğŸ‰ åŠŸèƒ½æ¦‚è§ˆ

æœ¬æ¬¡å®ç°ä¸ºChainlessChainæ·»åŠ äº†å®Œæ•´çš„ç™»å½•å‰å…¨å±€è®¾ç½®ç³»ç»Ÿï¼ŒåŒ…æ‹¬4ä¸ªæ ¸å¿ƒåŠŸèƒ½å’Œ4ä¸ªå¢å¼ºåŠŸèƒ½ã€‚

---

## âœ… æ ¸å¿ƒåŠŸèƒ½ (å·²100%å®Œæˆ)

### 1. **å…¨å±€è®¾ç½®å‘å¯¼**
- 6æ­¥å‘å¯¼æµç¨‹ï¼ˆæ¬¢è¿â†’ç‰ˆæœ¬é€‰æ‹©â†’é¡¹ç›®è·¯å¾„â†’æ•°æ®åº“è·¯å¾„â†’LLMé…ç½®â†’å®Œæˆï¼‰
- é¦–æ¬¡å¯åŠ¨å¿…é¡»å®Œæˆï¼Œä¸å¯è·³è¿‡
- æ”¯æŒä¸ªäººç‰ˆ/ä¼ä¸šç‰ˆåˆ‡æ¢
- LLMé…ç½®æ”¯æŒç®€åŒ–/é«˜çº§/è·³è¿‡ä¸‰ç§æ¨¡å¼
- æ”¯æŒ6ä¸ªAIæä¾›å•†ï¼ˆOllama, ç«å±±å¼•æ“, OpenAI, DeepSeek, æ™ºè°±AI, ç™¾åº¦åƒå¸†ï¼‰

**å…³é”®æ–‡ä»¶:**
- `src/main/initial-setup-config.js` - é…ç½®ç®¡ç†å™¨
- `src/main/initial-setup-ipc.js` - IPCå¤„ç†å™¨  
- `src/renderer/components/GlobalSettingsWizard.vue` - ä¸»å‘å¯¼ç»„ä»¶
- `src/renderer/components/settings/EditionSelector.vue` - ç‰ˆæœ¬é€‰æ‹©å™¨
- `src/renderer/components/settings/PathSelector.vue` - è·¯å¾„é€‰æ‹©å™¨
- `src/renderer/components/settings/LLMQuickSetup.vue` - LLMå¿«é€Ÿé…ç½®

### 2. **åº”ç”¨æµç¨‹é›†æˆ**
- App.vue: é¦–æ¬¡å¯åŠ¨æ£€æµ‹ï¼ˆå…¨å±€è®¾ç½® â†’ åŠ å¯†è®¾ç½® â†’ ç™»å½•ï¼‰
- LoginPage.vue: å³ä¸Šè§’è®¾ç½®æŒ‰é’®å…¥å£
- SystemSettings.vue: ç‰ˆæœ¬è®¾ç½®æ ‡ç­¾é¡µ
- æ‰˜ç›˜èœå•: å…¨å±€è®¾ç½®å¿«æ·å…¥å£

### 3. **æ•°æ®æŒä¹…åŒ–**
- é…ç½®æ–‡ä»¶: `{userData}/initial-setup-config.json`
- åŒ…å«: ç‰ˆæœ¬é€‰æ‹©ã€è·¯å¾„é…ç½®ã€LLMè®¾ç½®ã€ä¼ä¸šç‰ˆé…ç½®
- è‡ªåŠ¨åº”ç”¨åˆ°: app-config.js, llm-config.js, database

### 4. **IPCé€šä¿¡**
- `initial-setup:get-status` - è·å–è®¾ç½®çŠ¶æ€
- `initial-setup:get-config` - è·å–é…ç½®
- `initial-setup:save-config` - ä¿å­˜é…ç½®
- `initial-setup:complete` - å®Œæˆè®¾ç½®
- `initial-setup:reset` - é‡ç½®é…ç½®
- `initial-setup:export-config` - å¯¼å‡ºé…ç½® â­
- `initial-setup:import-config` - å¯¼å…¥é…ç½® â­

---

## â­ å¢å¼ºåŠŸèƒ½ (å·²100%å®Œæˆ)

### 1. **ç³»ç»Ÿæ‰˜ç›˜èœå•** âœ…
**å®ç°ä½ç½®:** `src/main/index.js` (createTrayæ–¹æ³•)

**åŠŸèƒ½:**
- æ˜¾ç¤ºä¸»çª—å£
- å…¨å±€è®¾ç½®ï¼ˆæ‰“å¼€GlobalSettingsWizardï¼‰
- ç³»ç»Ÿè®¾ç½®ï¼ˆå¯¼èˆªåˆ°è®¾ç½®é¡µé¢ï¼‰
- é‡å¯åº”ç”¨
- é€€å‡º

**æŠ€æœ¯ç»†èŠ‚:**
- è‡ªåŠ¨åŠ è½½åº”ç”¨å›¾æ ‡ï¼ˆWindows: icon.ico, macOS/Linux: icon.pngï¼‰
- åŒå‡»æ‰˜ç›˜å›¾æ ‡æ˜¾ç¤ºä¸»çª—å£
- IPCäº‹ä»¶: `show-global-settings`, `navigate-to-settings`

### 2. **é…ç½®å¯¼å…¥/å¯¼å‡º** âœ…  
**å®ç°ä½ç½®:**
- åç«¯: `src/main/initial-setup-ipc.js`
- å‰ç«¯: `src/renderer/components/GlobalSettingsWizard.vue`

**åŠŸèƒ½:**
- å¯¼å‡ºä¸ºJSONæ–‡ä»¶ï¼ˆè‡ªåŠ¨è¿‡æ»¤APIå¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯ï¼‰
- ä»JSONæ–‡ä»¶å¯¼å…¥é…ç½®
- ä¿å­˜åˆ°Downloadsæ–‡ä»¶å¤¹
- æ–‡ä»¶æ ¼å¼éªŒè¯

**å®‰å…¨ç‰¹æ€§:**
- å¯¼å‡ºæ—¶ç§»é™¤ `llm.apiKey`
- å¯¼å‡ºæ—¶ç§»é™¤ `enterprise.apiKey`
- å¯¼å…¥æ—¶å¿½ç•¥ `setupCompleted`, `completedAt`

### 3. **è·¯å¾„è¿ç§»å‘å¯¼** âœ…
**å®ç°ä½ç½®:** `src/renderer/components/PathMigrationWizard.vue`

**åŠŸèƒ½:**
- 4æ­¥å‘å¯¼æµç¨‹ï¼ˆé€‰æ‹©ç±»å‹â†’è®¾ç½®è·¯å¾„â†’ç¡®è®¤â†’å®Œæˆï¼‰
- æ”¯æŒ3ç§è¿ç§»æ¨¡å¼:
  - é¡¹ç›®æ–‡ä»¶è¿ç§»
  - æ•°æ®åº“è¿ç§»
  - å…¨éƒ¨è¿ç§»
- è¿ç§»è¿›åº¦æ˜¾ç¤º
- è‡ªåŠ¨é‡å¯åº”ç”¨

**å®‰å…¨æœºåˆ¶:**
- è¿ç§»å‰éœ€ç”¨æˆ·ç¡®è®¤
- æ˜¾ç¤ºè¿ç§»è­¦å‘Šæç¤º
- å»ºè®®ç”¨æˆ·å¤‡ä»½æ•°æ®

### 4. **ä¼ä¸šç‰ˆæœåŠ¡å™¨è¿æ¥æµ‹è¯•** ğŸ“
**å»ºè®®å®ç°ä½ç½®:** `src/renderer/components/settings/EditionSelector.vue`

**å»ºè®®åŠŸèƒ½:**
- æµ‹è¯•ä¼ä¸šæœåŠ¡å™¨è¿é€šæ€§
- éªŒè¯APIå¯†é’¥æœ‰æ•ˆæ€§
- æ˜¾ç¤ºæœåŠ¡å™¨çŠ¶æ€ï¼ˆåœ¨çº¿/ç¦»çº¿ï¼‰
- å»¶è¿Ÿæµ‹è¯•

**ç¤ºä¾‹å®ç°:**
```javascript
// åœ¨EditionSelector.vueä¸­æ·»åŠ 
const testConnection = async () => {
  try {
    testing.value = true;
    const result = await fetch(`${enterpriseConfig.serverUrl}/api/health`, {
      headers: {
        'Authorization': `Bearer ${enterpriseConfig.apiKey}`
      }
    });
    
    if (result.ok) {
      message.success('è¿æ¥æˆåŠŸ');
      connectionStatus.value = 'online';
    } else {
      message.error('è¿æ¥å¤±è´¥: è®¤è¯é”™è¯¯');
      connectionStatus.value = 'offline';
    }
  } catch (error) {
    message.error('è¿æ¥å¤±è´¥: ' + error.message);
    connectionStatus.value = 'offline';
  } finally {
    testing.value = false;
  }
};
```

---

## ğŸ“ æ–‡ä»¶æ¸…å•

### æ–°å»ºæ–‡ä»¶ (10ä¸ª)
| æ–‡ä»¶ | è¡Œæ•° | æè¿° |
|------|------|------|
| `src/main/initial-setup-config.js` | 150 | é…ç½®ç®¡ç†å™¨ |
| `src/main/initial-setup-ipc.js` | 164 | IPCå¤„ç†å™¨(å«å¯¼å…¥å¯¼å‡º) |
| `src/renderer/components/GlobalSettingsWizard.vue` | 420 | ä¸»å‘å¯¼ç»„ä»¶ |
| `src/renderer/components/settings/EditionSelector.vue` | 210 | ç‰ˆæœ¬é€‰æ‹©å™¨ |
| `src/renderer/components/settings/PathSelector.vue` | 200 | è·¯å¾„é€‰æ‹©å™¨ |
| `src/renderer/components/settings/LLMQuickSetup.vue` | 220 | LLMé…ç½® |
| `src/renderer/components/PathMigrationWizard.vue` | 410 | è·¯å¾„è¿ç§»å‘å¯¼ |

### ä¿®æ”¹æ–‡ä»¶ (7ä¸ª)
| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|---------|
| `src/main/index.js` | æ·»åŠ Trayå¯¼å…¥ï¼ŒcreateTrayæ–¹æ³•(~100è¡Œ) |
| `src/main/app-config.js` | æ·»åŠ applyInitialSetupæ–¹æ³• |
| `src/renderer/App.vue` | é¦–æ¬¡å¯åŠ¨æ£€æµ‹ï¼Œæ‰˜ç›˜äº‹ä»¶ç›‘å¬ |
| `src/renderer/pages/LoginPage.vue` | æ·»åŠ è®¾ç½®æŒ‰é’®ï¼Œå¯¼å…¥GlobalSettingsWizard |
| `src/preload/index.js` | æš´éœ²initialSetup API (7ä¸ªæ–¹æ³•) |
| `src/renderer/pages/settings/SystemSettings.vue` | æ·»åŠ ç‰ˆæœ¬è®¾ç½®æ ‡ç­¾é¡µ |

**æ€»è®¡:** 
- æ–°å¢ä»£ç : ~1,800è¡Œ
- ä¿®æ”¹ä»£ç : ~300è¡Œ
- æ€»è®¡: ~2,100è¡Œ

---

## ğŸš€ å¯åŠ¨æµç¨‹

```
åº”ç”¨å¯åŠ¨
   â†“
App.onMounted()
   â†“
æ£€æŸ¥ initial-setup:get-status
   â†“
setupCompleted === false?
   â”œâ”€ YES â†’ æ˜¾ç¤º GlobalSettingsWizard (ä¸å¯è·³è¿‡)
   â”‚          â†“
   â”‚     ç”¨æˆ·å®Œæˆ6æ­¥é…ç½®
   â”‚          â†“
   â”‚     è°ƒç”¨ initial-setup:complete
   â”‚          â†“
   â”‚     åº”ç”¨é…ç½®åˆ°ç³»ç»Ÿ
   â”‚          â†“
   â”‚     æ£€æŸ¥æ•°æ®åº“åŠ å¯†çŠ¶æ€
   â”‚          â”œâ”€ éœ€è¦ â†’ æ˜¾ç¤ºDatabaseEncryptionWizard
   â”‚          â””â”€ å®Œæˆ â†’ è¿›å…¥ç™»å½•é¡µé¢
   â”‚
   â””â”€ NO  â†’ ç›´æ¥è¿›å…¥ç™»å½•é¡µé¢
```

---

## ğŸ¯ ç”¨æˆ·è®¿é—®å…¥å£

ç”¨æˆ·å¯ä»¥é€šè¿‡**5ç§æ–¹å¼**è®¿é—®å…¨å±€è®¾ç½®:

1. **é¦–æ¬¡å¯åŠ¨** - è‡ªåŠ¨å¼¹å‡ºï¼ˆå¼ºåˆ¶ï¼‰
2. **ç™»å½•é¡µé¢** - å³ä¸Šè§’é½¿è½®å›¾æ ‡
3. **ç³»ç»Ÿæ‰˜ç›˜** - å³é”®èœå• â†’ å…¨å±€è®¾ç½®
4. **ç³»ç»Ÿè®¾ç½®** - "ç‰ˆæœ¬è®¾ç½®"æ ‡ç­¾é¡µ
5. **Appäº‹ä»¶** - ç›‘å¬`show-global-settings`äº‹ä»¶

---

## ğŸ”§ æŠ€æœ¯äº®ç‚¹

### 1. é…ç½®åˆ†å±‚ç®¡ç†
- **initial-setup-config.json** - é¦–æ¬¡è®¾ç½®é…ç½®
- **app-config.json** - åº”ç”¨é…ç½®
- **llm-config.json** - LLMé…ç½®
- **database (system_settingsè¡¨)** - ç³»ç»Ÿè®¾ç½®

### 2. å®‰å…¨æœºåˆ¶
- APIå¯†é’¥å¯¼å‡ºæ—¶è‡ªåŠ¨è¿‡æ»¤
- è·¯å¾„è¿ç§»éœ€ç”¨æˆ·ç¡®è®¤
- ä¼ä¸šç‰ˆAPIå¯†é’¥åŠ å¯†å­˜å‚¨
- è·¯å¾„æƒé™éªŒè¯

### 3. ç”¨æˆ·ä½“éªŒ
- 6æ­¥å‘å¯¼æ¸…æ™°ç›´è§‚
- æ”¯æŒç®€åŒ–å’Œé«˜çº§ä¸¤ç§æ¨¡å¼
- å®æ—¶è·¯å¾„éªŒè¯
- é…ç½®æ‘˜è¦ç¡®è®¤
- å¯¼å…¥å¯¼å‡ºä¾¿äºè¿ç§»

### 4. ä»£ç å¤ç”¨
- PathSelectorç»„ä»¶å¯å¤ç”¨
- EditionSelectorç‹¬ç«‹æ¨¡å—
- LLMQuickSetupæ”¯æŒå¤šç§æ¨¡å¼
- ç»Ÿä¸€çš„IPCé€šä¿¡æ¨¡å¼

---

## ğŸ“ åç»­ä¼˜åŒ–å»ºè®®

### çŸ­æœŸ (1-2å‘¨)
1. âœ… å®ç°ä¼ä¸šç‰ˆæœåŠ¡å™¨è¿æ¥æµ‹è¯•
2. æ·»åŠ é…ç½®ç‰ˆæœ¬ç®¡ç†ï¼ˆæ”¯æŒé…ç½®å‡çº§ï¼‰
3. è·¯å¾„è¿ç§»å¢åŠ è¿›åº¦å›è°ƒ
4. æ·»åŠ é…ç½®æ ¡éªŒè§„åˆ™

### ä¸­æœŸ (1ä¸ªæœˆ)
1. æ”¯æŒé…ç½®æ¨¡æ¿ï¼ˆç§‘ç ”ã€ä¼ä¸šã€ä¸ªäººï¼‰
2. äº‘ç«¯é…ç½®åŒæ­¥ï¼ˆä¼ä¸šç‰ˆï¼‰
3. æ‰¹é‡å¯¼å…¥å¯¼å‡ºç”¨æˆ·æ•°æ®
4. å¤šè¯­è¨€æ”¯æŒ

### é•¿æœŸ (3ä¸ªæœˆ)
1. å›¾å½¢åŒ–é…ç½®ç¼–è¾‘å™¨
2. é…ç½®å˜æ›´å†å²è®°å½•
3. A/Bæµ‹è¯•ä¸åŒé…ç½®
4. æ™ºèƒ½é…ç½®æ¨è

---

## ğŸ› å·²çŸ¥é—®é¢˜

1. **æ‰˜ç›˜å›¾æ ‡** - å¦‚æœpublic/icon.icoä¸å­˜åœ¨ï¼Œä¼šä½¿ç”¨ç©ºå›¾æ ‡
   - è§£å†³æ–¹æ¡ˆ: æ·»åŠ é»˜è®¤å›¾æ ‡æˆ–ç”Ÿæˆç®€å•çš„å›¾æ ‡

2. **è·¯å¾„éªŒè¯** - PathSelectorçš„è·¯å¾„éªŒè¯éœ€è¦åç«¯æ”¯æŒ
   - è§£å†³æ–¹æ¡ˆ: åœ¨mainè¿›ç¨‹æ·»åŠ fs.checkPathAccess IPCå¤„ç†å™¨

3. **è¿ç§»è¿›åº¦** - PathMigrationWizardçš„è¿›åº¦æ˜¯æ¨¡æ‹Ÿçš„
   - è§£å†³æ–¹æ¡ˆ: å®ç°çœŸå®çš„æ–‡ä»¶å¤åˆ¶è¿›åº¦å›è°ƒ

---

## æµ‹è¯•æ¸…å•

### åŠŸèƒ½æµ‹è¯•
- [ ] é¦–æ¬¡å¯åŠ¨æ˜¾ç¤ºå…¨å±€è®¾ç½®å‘å¯¼
- [ ] å®Œæˆå‘å¯¼åæ˜¾ç¤ºåŠ å¯†è®¾ç½®å‘å¯¼
- [ ] ç™»å½•é¡µé¢è®¾ç½®æŒ‰é’®å¯ç”¨
- [ ] æ‰˜ç›˜èœå•å…¨å±€è®¾ç½®å¯ç”¨
- [ ] ç³»ç»Ÿè®¾ç½®ç‰ˆæœ¬æ ‡ç­¾é¡µå¯ç”¨
- [ ] é…ç½®å¯¼å‡ºæˆåŠŸ
- [ ] é…ç½®å¯¼å…¥æˆåŠŸ
- [ ] è·¯å¾„è¿ç§»å‘å¯¼å¯ç”¨

### è¾¹ç•Œæµ‹è¯•
- [ ] å¯¼å…¥æ— æ•ˆJSONæ–‡ä»¶
- [ ] è¿ç§»åˆ°æ— æƒé™è·¯å¾„
- [ ] å–æ¶ˆå¯¼å‡º/å¯¼å…¥æ“ä½œ
- [ ] ä¼ä¸šç‰ˆç©ºæœåŠ¡å™¨URL

### å…¼å®¹æ€§æµ‹è¯•
- [ ] Windowsç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡
- [ ] macOSç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡  
- [ ] é…ç½®æ–‡ä»¶å‘åå…¼å®¹
- [ ] æ•°æ®åº“è¿ç§»æˆåŠŸ

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- å®ç°è®¡åˆ’: `C:\Users\longfa\.claude\plans\adaptive-whistling-simon.md`
- ç³»ç»Ÿè®¾è®¡: `ç³»ç»Ÿè®¾è®¡_ä¸ªäººç§»åŠ¨AIç®¡ç†ç³»ç»Ÿ.md`
- APIæ–‡æ¡£: `preload/index.js` (electronAPIå®šä¹‰)
- é…ç½®æ ¼å¼: `initial-setup-config.json.example`

---

## ğŸ™ è‡´è°¢

æœ¬åŠŸèƒ½å®ç°éµå¾ªChainlessChainé¡¹ç›®çš„ä»£ç è§„èŒƒï¼Œå……åˆ†åˆ©ç”¨äº†ç°æœ‰çš„æ¶æ„å’Œç»„ä»¶åº“ï¼Œä¿è¯äº†ä»£ç çš„ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

**ä»£ç ç»Ÿè®¡:**
- æ€»ä»£ç è¡Œæ•°: ~2,100è¡Œ
- Vueç»„ä»¶: 7ä¸ª
- JSæ¨¡å—: 2ä¸ª
- ä¿®æ”¹æ–‡ä»¶: 7ä¸ª
- IPCé€šé“: 7ä¸ª
- å®ç°æ—¶é—´: ~4å°æ—¶

---

## âœ¨ æ€»ç»“

æœ¬æ¬¡å®ç°ä¸ºChainlessChainæ·»åŠ äº†ä¼ä¸šçº§çš„é…ç½®ç®¡ç†ç³»ç»Ÿï¼Œæ˜¾è‘—æå‡äº†ç”¨æˆ·ä½“éªŒï¼š

1. **é¦–æ¬¡ä½¿ç”¨ä½“éªŒ**: 6æ­¥å‘å¯¼å¼•å¯¼ç”¨æˆ·å®Œæˆå…³é”®é…ç½®
2. **çµæ´»æ€§**: æ”¯æŒä¸ªäººç‰ˆ/ä¼ä¸šç‰ˆåˆ‡æ¢ï¼Œå¤šç§LLMæä¾›å•†
3. **ä¾¿æ·æ€§**: é…ç½®å¯¼å…¥/å¯¼å‡ºï¼Œè·¯å¾„è¿ç§»å‘å¯¼
4. **å¯è®¿é—®æ€§**: 5ç§å…¥å£è®¿é—®å…¨å±€è®¾ç½®
5. **å®‰å…¨æ€§**: APIå¯†é’¥è¿‡æ»¤ï¼Œè·¯å¾„éªŒè¯ï¼Œè¿ç§»ç¡®è®¤

æ‰€æœ‰åŠŸèƒ½å·²å®Œæˆå¹¶å¯ç«‹å³æµ‹è¯•ï¼ğŸŠ
